!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.onix=t():e.onix=t()}(self,(function(){return(self.webpackChunkonix=self.webpackChunkonix||[]).push([[641],{4679:function(e){e.exports={core:{save:"Save",send:"Send",cancel:"Cancel"},datetime:{years:"{y,plural,one{# year} few{# years} many{# years} other{# years}}",months:"{m,plural,one{# month} few{# months} many{# months} other{# months}}",days:"{d,plural,one{# day} few{# days} many{# days} other{# days}}",hours:"{h,plural,one{# hour} few{# hours} many{# hours} other{# hours}}",minutes:"{i,plural,one{# minute} few{# minutes} many{# minutes} other{# minutes}}",seconds:"{s,plural,one{# second} few{# seconds} many{# seconds} other{# seconds}}"},timer:{lessone:"less 1",isend:"time is up",empty:"---",days:"{d} d.",hours:"{h} h.",minutes:"{i} min.",seconds:"{s} sec."},chess:{fen:"FEN",pieces:"Pieces",squares:"Board",who_move:"Who move",white:"White",black:"Black",white_move:"White move",black_move:"Black move",move_no:"Move no",ep_target:"e.p.",castle:"Castle",startPos:"Starting position",firstMove:"First move",prevMove:" Prev move",nextMove:"Next move",lastMove:"Last move",mateIn:"Mate in #%d"},game:{movesTab:"Moves",infoTab:"Information",startDate:"Started",completeDate:"Completed",completeState:"Game complete",datesFmt:"Game was playing sinse %s to %s",tournament:"Tournament",viewTournTable:"View tournament table",noTrn:"none",canPostpone:"отпуск разрешен",noPostpone:"без отпуска",variantVsSpeed:"Rating zone",varCorrs:"Correspondence",varAdvance:"Advance",timeControl:"Time control",privateGame:"Private",ratedGame:"Rated",unratedGame:"Unrated",useCompHints:"Using computer hints",allow:"allow",denied:"denied",whiteWin:"White win",blackWin:"Black win",drawWin:"Draw",resCreated:"Game created",resNew:"New game",resWait:"Wait for opponent",resAborted:"Game aborted",resStarted:"Game started",resPaused:"Game paused",resCheckmate:"won by checkmate",resResign:"was resign",resOutOfTime:"won on time",resNotMoved:"not moved",resNotStarted:"Game not started",resArbiter:"Result by arbiter adjudgement",resRepeat:"Game draw by position repeating",res50move:"Game draw by 50th moves rule",resDrawArbiter:"Game draw by arbiter adjudgement",resStalemate:"Game draw by stalemate",resMaterial:"Game draw. No materials",resDraw:"Game draw by agreement",resEnd:"Game end",gameResultWhite:"%s (%s) wins by white - %s",gameResultWhite1:"%s wins by white - %s",gameResultBlack:"%s (%s) wins by black - %s",gameResultBlack1:"%s wins by black - %s",gameResultDraw:"The game ended a draw",infoLoading:"Loading...",send:"Send",config:"Configure",flip:"Flip board",board_size:"Board size",display_coord:"Coordinates"},analyse:{title:"Computer analysis",advantage:"Advantage",mateIn:"Mate in #%d",request:"Request analysis...",inprogress:"Game analysis in progress... Please reload the page in a few minutes.",completed:"Completed %d %%",loading:"Loading...",averageCentipawnLoss:"Average centipawn loss",averageCentipawnLossTitle:"Average centipawn loss",inaccuracies:"Inaccuracies",mistakes:"Mistakes",blunders:"Blunders"},app:{load:"Load",send:"Send",save:"Save"},"chess-ctrls":{white_move:"White move",black_move:"Black move",set_board:"Set the board",position_label:"-- Position --",std_fen:"Standart start",empty_fen:"Empty board",get_fen:"Custom position",paste_fen_prompt:"Paste FEN position",popular_opening:"Popular openings",copy_to_clipboard:"Copy to clipboard"},builder:{pb_title:"Chess position builder",board_size:"Board size",image_link:"URL",forum_code:"CODE",paste_forum_code:"Paste to message body",pos_param:"Posittion settings",ep_target_hint:"En passant square (unless the last pawn's move was on the 2 horizontal)",set_board:"Set the board",std_fen:"Standart start",empty_fen:"Empty board",pos_diplay:"Display",display_flip:"Flip board",display_coord:"Coordinates",display_frame:"Frame",display_showturn:"Move turn",marks:"Markers",marks_hint:"Entry square or move names for marks (example e2-e4,d5,h4)",position_label:"-- Position --",get_fen:"Custom position",paste_fen_prompt:"Paste FEN position",popular_opening:"Popular openings"}}},4652:function(e){e.exports={core:{save:"Save",send:"Send",cancel:"Cancel"},datetime:{years:"{y,plural,one{# year} few{# years} many{# years} other{# years}}",months:"{m,plural,one{# month} few{# months} many{# months} other{# months}}",days:"{d,plural,one{# day} few{# days} many{# days} other{# days}}",hours:"{h,plural,one{# hour} few{# hours} many{# hours} other{# hours}}",minutes:"{i,plural,one{# minute} few{# minutes} many{# minutes} other{# minutes}}",seconds:"{s,plural,one{# second} few{# seconds} many{# seconds} other{# seconds}}"},timer:{lessone:"less 1",isend:"time is up",empty:"---",days:"{d} d.",hours:"{h} h.",minutes:"{i} min.",seconds:"{s} sec."},chess:{fen:"FEN",pieces:"Pieces",squares:"Board",who_move:"Who move",white:"White",black:"Black",white_move:"White move",black_move:"Black move",move_no:"Move no",ep_target:"e.p.",castle:"Castle",startPos:"Starting position",firstMove:"First move",prevMove:" Prev move",nextMove:"Next move",lastMove:"Last move",mateIn:"Mate in #%d"},game:{movesTab:"Moves",infoTab:"Information",startDate:"Started",completeDate:"Completed",completeState:"Game complete",datesFmt:"Game was playing sinse %s to %s",tournament:"Tournament",viewTournTable:"View tournament table",noTrn:"none",canPostpone:"отпуск разрешен",noPostpone:"без отпуска",variantVsSpeed:"Rating zone",varCorrs:"Correspondence",varAdvance:"Advance",timeControl:"Time control",privateGame:"Private",ratedGame:"Rated",unratedGame:"Unrated",useCompHints:"Using computer hints",allow:"allow",denied:"denied",whiteWin:"White win",blackWin:"Black win",drawWin:"Draw",resCreated:"Game created",resNew:"New game",resWait:"Wait for opponent",resAborted:"Game aborted",resStarted:"Game started",resPaused:"Game paused",resCheckmate:"won by checkmate",resResign:"was resign",resOutOfTime:"won on time",resNotMoved:"not moved",resNotStarted:"Game not started",resArbiter:"Result by arbiter adjudgement",resRepeat:"Game draw by position repeating",res50move:"Game draw by 50th moves rule",resDrawArbiter:"Game draw by arbiter adjudgement",resStalemate:"Game draw by stalemate",resMaterial:"Game draw. No materials",resDraw:"Game draw by agreement",resEnd:"Game end",gameResultWhite:"%s (%s) wins by white - %s",gameResultWhite1:"%s wins by white - %s",gameResultBlack:"%s (%s) wins by black - %s",gameResultBlack1:"%s wins by black - %s",gameResultDraw:"The game ended a draw",infoLoading:"Loading...",send:"Send",config:"Configure",flip:"Flip board",board_size:"Board size",display_coord:"Coordinates"},analyse:{title:"Computer analysis",advantage:"Advantage",mateIn:"Mate in #%d",request:"Request analysis...",inprogress:"Game analysis in progress... Please reload the page in a few minutes.",completed:"Completed %d %%",loading:"Loading...",averageCentipawnLoss:"Average centipawn loss",averageCentipawnLossTitle:"Average centipawn loss",inaccuracies:"Inaccuracies",mistakes:"Mistakes",blunders:"Blunders"},app:{load:"Load",send:"Send",save:"Save"},"chess-ctrls":{white_move:"White move",black_move:"Black move",set_board:"Set the board",position_label:"-- Position --",std_fen:"Standart start",empty_fen:"Empty board",get_fen:"Custom position",paste_fen_prompt:"Paste FEN position",popular_opening:"Popular openings",copy_to_clipboard:"Copy to clipboard"},builder:{pb_title:"Chess position builder",board_size:"Board size",image_link:"URL",forum_code:"CODE",paste_forum_code:"Paste to message body",pos_param:"Posittion settings",ep_target_hint:"En passant square (unless the last pawn's move was on the 2 horizontal)",set_board:"Set the board",std_fen:"Standart start",empty_fen:"Empty board",pos_diplay:"Display",display_flip:"Flip board",display_coord:"Coordinates",display_frame:"Frame",display_showturn:"Move turn",marks:"Markers",marks_hint:"Entry square or move names for marks (example e2-e4,d5,h4)",position_label:"-- Position --",get_fen:"Custom position",paste_fen_prompt:"Paste FEN position",popular_opening:"Popular openings"}}},8364:function(e){e.exports={core:{save:"Сохранить",send:"Отправить",cancel:"Отмена"},datetime:{years:"{y, plural, one{# год} few{# года} many{# лет} other{# года}}",months:"{m, plural, one{# месяц} few{# месяца} many{# месяцев} other{# месяца}}",days:"{d, plural, one{# день} few{# дня} many{# дней} other{# дня}}",hours:"{h, plural, one{# час} few{# часа} many{# часов} other{# часа}}",minutes:"{i, plural, one{# минута} few{# минуты} many{# минут} other{# минуты}}",seconds:"{s, plural, one{# секунда} few{# секунды} many{# секунд} other{# секунды}}"},timer:{lessone:"менее 1",isend:"истекло",empty:"---",days:"{d} дн.",hours:"{h} ч.",minutes:"{i} мин.",seconds:"{s} сек."},chess:{fen:"FEN",pieces:"Фигуры",squares:"Доска",who_move:"Очередь хода",white:"Белые",black:"Черные",white_move:"Ход белых",black_move:"Ход черных",move_no:"№ хода",ep_target:"e.p.",castle:"Рокировка",startPos:"Начальная позиция",firstMove:"Первый ход",prevMove:"Предыдущий ход",nextMove:"Следующий ход",lastMove:"Последний ход",mateIn:"Мат через %d"},game:{movesTab:"Ходы",infoTab:"Информация",startDate:"Начата",completeDate:"Завершена",completeState:"Игра завершена",datesFmt:"Партия продолжалась с %s по %s",tournament:"Турнир",viewTournTable:"Посмотреть турнирную таблицу",noTrn:"нет",canPostpone:"отпуск разрешен",noPostpone:"без отпуска",variantVsSpeed:"Рейтинговая зона",varCorrs:"Переписка",varAdvance:"Адванс",timeControl:"Контроль времени",privateGame:"Приватная",ratedGame:"Рейтинговая",unratedGame:"Без рейтинга",useCompHints:"Использование подсказок компьютера",allow:"разрешено",denied:"запрещено",whiteWin:"Победа белых",blackWin:"Победа чёрных",drawWin:"Ничья",resCreated:"Партия создана",resNew:"Новая партия",resWait:"Ожидание соперника",resAborted:"Партия прервана",resStarted:"Партия началась",resPaused:"Игра приостановлена",resCheckmate:"поставил шах",resResign:"сдался",resOutOfTime:"выиграл по времени",resNotMoved:"не сделал ход",resNotStarted:"Не сделано ходов",resArbiter:"Результат присужден арбитром",resRepeat:"Партия завершилась вничью из-за повтороения позиции",res50move:"Партия завершилась вничью по правилу 50ти ходов",resDrawArbiter:"Партия завершилась вничью присуждена арбитром",resStalemate:"Партия завершилась вничью. Пат",resMaterial:"Партия завершилась вничью. Недостаточно материала",resDraw:"Партия завершилась вничью по соглашению соперников",resEnd:"Партия завершена",gameResultWhite:"Белыми фигурами победил %s (%s) - %s",gameResultWhite1:"Белыми фигурами победил %s - %s",gameResultBlack:"Чёрными фигурами победил %s (%s) - %s",gameResultBlack1:"Чёрными фигурами победил %s - %s",gameResultDraw:"В партии зафиксирована ничья",infoLoading:"Информация загружается...",send:"Отправить",config:"Настройки",flip:"Развернуть доску",board_size:"Размер доски",display_coord:"Координаты"},analyse:{title:"Компьютерный анализ",advantage:"Оценка",mateIn:"Мат через %d",request:"Запросить анализ...",inprogress:"Партия анализируется... Обновите страницу через несколько минут.",completed:"Завершено %d %%",loading:"Загрузка...",averageCentipawnLoss:"Средние потери (p/100)",averageCentipawnLossTitle:"В среднем потеряно сотых пешки",inaccuracies:"Неточности",mistakes:"Ошибки",blunders:"Зевки"},app:{load:"Загрузить",send:"Отправить",save:"Сохранить"},"chess-ctrls":{white_move:"Ход белых",black_move:"Ход черных",set_board:"Установить позицию",position_label:"-- Позиция --",std_fen:"Стартовая позиция",empty_fen:"Пустая доска",get_fen:"Загрузить FEN",paste_fen_prompt:"Скопируйте сюда собственный FEN",popular_opening:"Популярные дебюты",copy_to_clipboard:"Копировать в буфер обмена"},builder:{pb_title:"Конструктор шахматной позиции",board_size:"Размер доски",image_link:"URL",forum_code:"CODE",paste_forum_code:"Вставить в сообщение",pos_param:"Параметры позиции",ep_target_hint:"Поле для взятия на проходе (если последний ход был ход пешкой на 2 горизонтали)",set_board:"Установить позицию",std_fen:"Стартовая позиция",empty_fen:"Пустая доска",pos_diplay:"Отображение",display_flip:"Разворот",display_coord:"Координаты",display_frame:"Рамка",display_showturn:"Очередь хода",marks:"Маркеры",marks_hint:"Для установки маркеров укажите наименования клеток или ходов через запятую (например e2-e4,d5,h4)",position_label:"-- Позиция --",get_fen:"Загрузить FEN",paste_fen_prompt:"Скопируйте сюда собственный FEN",popular_opening:"Популярные дебюты"}}},5125:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SET_SQUARE=t.SET_PIECE=t.CHANGE_SIZE=t.SET_COORDS=t.FLIP_BOARD=void 0,t.FLIP_BOARD="FLIP_BOARD",t.SET_COORDS="SET_COORDS",t.CHANGE_SIZE="CHANGE_SIZE",t.SET_PIECE="SET_PIECE",t.SET_SQUARE="SET_SQUARE"},4078:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBoardStore=t.boardReducer=void 0;const i=n(6105),a=n(4890),s=n(5125),r=n(5146),o={is3d:!1,size:i.BoardSize.Normal,piece:"alpha",square:"color-brown",orientation:"white",coordinates:!0};t.boardReducer=(e=o,t)=>{switch(t.type){case s.FLIP_BOARD:const{orientation:n}=e,i=r.Color.fromName(n);return Object.assign(Object.assign({},e),{orientation:r.Color.toName(r.Color.flip(i))});case s.SET_COORDS:const{coordinates:a}=e;return Object.assign(Object.assign({},e),{coordinates:!a});case s.CHANGE_SIZE:return Object.assign(Object.assign({},e),{size:t.size});case s.SET_PIECE:return Object.assign(Object.assign({},e),{piece:t.piece});case s.SET_SQUARE:return Object.assign(Object.assign({},e),{square:t.square});default:return e}};t.createBoardStore=e=>a.createStore(t.boardReducer,e)},5275:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameActions=void 0,function(e){e.NAVIGATE_TO_PLY="NAVIGATE_TO_PLY",e.NAVIGATE_TO_KEY="NAVIGATE_TO_KEY",e.NAVIGATE_TO_MOVE="NAVIGATE_TO_MOVE",e.GAME_LOAD_FULL="GAME_LOAD_FULL",e.GAME_LOAD_PARTIAL="GAME_LOAD_PARTIAL",e.GAME_ADD_MOVE="GAME_ADD_MOVE"}(t.GameActions||(t.GameActions={}))},888:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gameReducer=void 0;const i=n(3518),a=n(5275),s=n(4200),r=n(1811),o={engine:new r.Chess,fen:"",isCheck:!1};t.gameReducer=(e=o,t)=>{switch(i.Logger.debug("Try game action",t),t.type){case a.GameActions.NAVIGATE_TO_PLY:{const{engine:n}=e;return n?(n.moveToPly(t.ply),Object.assign(Object.assign({},e),s.getGameState(n))):Object.assign({},e)}case a.GameActions.NAVIGATE_TO_MOVE:{const{engine:n}=e;return n?(n.moveToPly(t.move.PlyCount),Object.assign(Object.assign({},e),s.getGameState(n))):Object.assign({},e)}case a.GameActions.NAVIGATE_TO_KEY:{const{engine:n}=e;return n?(n.moveToKey(t.move),Object.assign(Object.assign({},e),s.getGameState(n))):Object.assign({},e)}case a.GameActions.GAME_ADD_MOVE:{const{engine:n}=e;return n?(n.decodeMove(t.move),n.moveLast(),Object.assign(Object.assign({},e),s.getGameState(n))):Object.assign({},e)}case a.GameActions.GAME_LOAD_PARTIAL:{const{engine:n}=e,i=n.CurrentPlyCount,a=Object.assign(Object.assign({},n.RawData),t.game),o=new r.Chess(a);return o.moveToPly(i),Object.assign({engine:o},s.getGameState(o))}case a.GameActions.GAME_LOAD_FULL:{const e=new r.Chess(t.game);return e.moveLast(),Object.assign({engine:e},s.getGameState(e))}default:return e}}},4200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGameState=t.getGameState=void 0;const i=n(1811),a=n(5146),s=n(8797),r=n(7040),o=e=>{let t;if(!e.isBegin()){const{sm:n}=e;n&&(t=[r.Square.name(n.from),r.Square.name(n.to)])}return t};t.getGameState=e=>{var t;return{lastMove:o(e.CurrentMove),fen:null!==(t=e.CurrentMove.fen)&&void 0!==t?t:s.FenString.fromPosition(e.CurrentPos),isCheck:!!e.CurrentPos.isKingInCheck()&&a.Color.toName(e.CurrentPos.WhoMove)}};t.createGameState=e=>{const n=new i.Chess(e);return n.moveLast(),Object.assign({engine:n},t.getGameState(n))}},8118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Castling=t.CastlingSide=void 0;const i=n(5146);var a;!function(e){e[e.Queen=0]="Queen",e[e.King=1]="King"}(a=t.CastlingSide||(t.CastlingSide={}));class s{constructor(e=0){this.flag=0,"string"==typeof e?this.fromFen(e)||this.clear():this.flag=e}get Flag(){return this.flag}set Flag(e){this.flag=e}clone(){return new s(this.flag)}assign(e){this.flag=e.flag}clear(){this.flag=0}any(){return this.flag>0}getMask(e,t){let n=e===i.Color.White?1:4;return t===a.King&&(n+=n),n}has(e,t){let n=0;if("string"==typeof e)switch(e){case"K":n=this.getMask(i.Color.White,a.King);break;case"Q":n=this.getMask(i.Color.White,a.Queen);break;case"k":n=this.getMask(i.Color.Black,a.King);break;case"q":n=this.getMask(i.Color.Black,a.Queen)}else void 0!==t&&(n=this.getMask(e,t));return!!(this.flag&n)}set(e,t,n){let i=this.getMask(e,t);n?this.flag|=i:this.flag&=255-i}on(e,t){if("string"==typeof e)switch(e){case"K":this.set(i.Color.White,a.King,!0);break;case"Q":this.set(i.Color.White,a.Queen,!0);break;case"k":this.set(i.Color.Black,a.King,!0);break;case"q":this.set(i.Color.Black,a.Queen,!0)}else void 0!==t&&this.set(e,t,!0)}off(e,t){if("string"==typeof e)switch(e){case"K":this.set(i.Color.White,a.King,!1);break;case"Q":this.set(i.Color.White,a.Queen,!1);break;case"k":this.set(i.Color.Black,a.King,!1);break;case"q":this.set(i.Color.Black,a.Queen,!1)}else void 0!==t&&this.set(e,t,!1)}fromFen(e){return!!/^(?:-|(?:K?Q?k?q?)){1}$/.test(e)&&(this.clear(),"-"!=e&&(this.set(i.Color.White,a.King,e.indexOf("K")>=0),this.set(i.Color.White,a.Queen,e.indexOf("Q")>=0),this.set(i.Color.Black,a.King,e.indexOf("k")>=0),this.set(i.Color.Black,a.Queen,e.indexOf("q")>=0)),!0)}asFen(){if(this.any()){let e="";return this.has(i.Color.White,a.King)&&(e+="K"),this.has(i.Color.White,a.Queen)&&(e+="Q"),this.has(i.Color.Black,a.King)&&(e+="k"),this.has(i.Color.Black,a.Queen)&&(e+="q"),e}return"-"}}t.Castling=s,s.Q="O-O-O",s.K="O-O",s.WQ=1,s.WK=2,s.BQ=4,s.BK=8},1811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.ChessGameState=t.ChessTags=t.ChessRatingType=void 0;const i=n(655),a=i.__importDefault(n(1987)),s=i.__importStar(n(4670)),r=i.__importDefault(n(1763)),o=i.__importDefault(n(3651)),l=n(5146),c=n(2353),p=n(7042),u=n(7040),d=n(401),h=n(4588),m=n(1113),P=n(8797),f=n(3950),g=n(440);var b;!function(e){e[e.None=0]="None",e[e.Elo=1]="Elo",e[e.Internal=2]="Internal",e[e.Rapid=3]="Rapid",e[e.Iccf=4]="Iccf"}(b=t.ChessRatingType||(t.ChessRatingType={}));function v(e){return r.default(e)?e:a.default(e)}function y(e){return r.default(e)?e:a.default(e)}const R=["gameid","gtype_id","white","white_id","black","black_id","event","event_id","site","site_id","round","game_date","event_date","result_id"],C=["whiteratingtype","whiterating","blackratingtype","blackrating","ecocode","fen","setup"];class k{constructor(e){this.owner=e,this.tags=new Map}clear(){this.tags.clear()}add(e,t){if(e&&(e=e.toLowerCase(),-1===o.default(R,e)))if(-1!==o.default(C,e))switch(e){case"whiteratingtype":this.owner.WhiteRatingType=v(t);break;case"whiterating":this.owner.WhiteElo=y(t);break;case"blackratingtype":this.owner.BlackRatingType=v(t);break;case"blackrating":this.owner.BlackElo=y(t);break;case"ecocode":this.owner.Eco={code:t};break;case"fen":this.owner.StartFen=t}else this.tags.set(e,t)}}t.ChessTags=k;class N{constructor(){this.InCheckMate=!1,this.InStaleMate=!1,this.IsNoMaterialWhite=!1,this.IsNoMaterialBlack=!1,this.IsPosRepeation=!1,this.Is50MovesRule=!1}}t.ChessGameState=N;const w={game:{id:0,load:!1,insite:!1,variant:{key:"standard",name:"Standard",shortName:"Std"},speed:"correspondence",rated:!1,initialFen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",player:"white",turns:0,startedAtTurn:0,status:{name:"noStart"}},orientation:"white"};t.Chess=class{constructor(e){var t,n,i;this.savedMove=null,this.savedPos=null,this.savedPlyCount=0,this.varDepth=0,this.supressEvents=!1,this.moveList=new Map,this.startFen=P.FenString.standartStart,this.InPromotion=!1,this.NoQueenPromotion=!1,this.GameId=void 0,this.Result=c.GameResult.Color.None,this.Analysis={},this.data=e||w,this.Tags=new k(this),this.Altered=!1,this.pgnLastMovePos=this.pgnNextMovePos=0,this.startPos=d.ChessPositionStd,(null===(t=this.data.game)||void 0===t?void 0:t.initialFen)&&(null===(n=this.data.game)||void 0===n?void 0:n.initialFen)!=P.FenString.standartStart&&(this.startFen=null===(i=this.data.game)||void 0===i?void 0:i.initialFen,this.startPos=new d.Position(this.startFen)),this.clear(),this.init(),this.positionChanged()}get RawData(){return this.data}get ToMove(){return this.CurrentPos.WhoMove}get CurrentPlyCount(){return this.CurrentMove.PlyCount}get StartPlyCount(){return this.startPos?this.startPos.PlyCount+1:1}get CurrentMove(){return this.currentMove}get CurrentPos(){return this.curPos}get StartFen(){return this.startFen}set StartFen(e){this.startFen=e}get NonStandardStart(){return this.startFen!==P.FenString.standartStart}clear(){this.GameId=0,this.InPromotion=!1,this.NoQueenPromotion=!1,this.Analysis={},this.clearStandardTags(),this.clearExtraTags(),this.clearMoves()}clearStandardTags(){this.White={color:"white",name:"?",user:{id:0,name:"?"}},this.Black={color:"black",name:"?",user:{id:0,name:"?"}},this.Event="?",this.Site="?",this.Round="?",this.GameDate="????.??.??",this.EventDate="????.??.??",this.Eco={code:"A00"},this.Result=c.GameResult.Color.None,this.WhiteElo=this.BlackElo=0,this.WhiteRatingType=this.BlackRatingType=b.Elo}clearExtraTags(){this.Tags.clear()}clearMoves(){this.moveList.clear(),this.InPromotion=!1,this.NoQueenPromotion=!1,this.savedMove=null,this.savedPlyCount=0,this.savedPos=null,this.currentMove=h.Move.init(this.startFen,this.startPos),this.moveList.set(this.currentMove.Prev.moveKey,this.currentMove.Prev),this.curPos=new d.Position,this.curPos.copyFrom(this.startPos)}init(){var e,t,n,i,s;const{game:r,player:o,opponent:l,analysis:c,steps:p,treeParts:u}=this.data;r&&(this.GameId=r.id,this.Event=r.event,r.status.result&&(this.Result=r.status.result),r.opening&&(this.Eco=r.opening)),this.assignPlayer(o),this.assignPlayer(l),c&&(this.Analysis.state=null!==(e=c.state)&&void 0!==e?e:"empty","inprogress"==this.Analysis.state&&c.completed&&(this.Analysis.completed=c.completed),c.white&&(this.Analysis.white={blunder:a.default(c.white.blunder),mistake:a.default(c.white.mistake),inaccuracy:a.default(c.white.inaccuracy),acpl:a.default(c.white.acpl)}),c.black&&(this.Analysis.black={blunder:a.default(c.black.blunder),mistake:a.default(c.black.mistake),inaccuracy:a.default(c.black.inaccuracy),acpl:a.default(c.black.acpl)}));const d=null!=u?u:p;if(d){if(this.supressEvents=!0,this.decodeMoves(d),u){let e=this.CurrentMove.Begin;for(;!e.END_MARKER;)!e.START_MARKER&&(null===(t=e.sm)||void 0===t?void 0:t.eval)&&(null===(n=e.Prev.sm)||void 0===n?void 0:n.eval)&&e.sm.eval.normalize(e.Prev.sm.eval),e=e.Next;for(e=this.CurrentMove.Begin;!e.END_MARKER;)!e.isLast()&&(null===(i=e.sm)||void 0===i?void 0:i.eval)&&(null===(s=e.Next.sm)||void 0===s?void 0:s.eval)&&e.sm.eval.extend(e.Next.sm.eval),e=e.Next}if(null==r?void 0:r.moveCentis){const e=[].concat(null==r?void 0:r.moveCentis);let t=this.CurrentMove.First;for(;!t.END_MARKER&&e.length;){const n=e.shift();t.sm&&(t.sm.time=a.default(n)),t=t.Next}}this.supressEvents=!1}}assignPlayer(e){e&&("black"===e.color?this.Black=e:this.White=e)}isInstanceOfTreePart(e){return"eval"in e}decodeMove(e){if(void 0===e.uci){if(this.isInstanceOfTreePart(e)){const t=this.CurrentMove.Begin;t&&t.sm&&(t.sm.eval=new g.EvalItem(e.eval),t.sm.judgments=e.comments,t.sm.glyphs=e.glyphs)}return}const t=this.curPos.readCoordMove(e.uci);if(null!==t){t.ply=this.CurrentPos.PlyCount+1,t.permanent=!0,t.san=e.san,t.color=this.CurrentPos.WhoMove,this.isInstanceOfTreePart(e)&&(t.eval=new g.EvalItem(e.eval),t.judgments=e.comments,t.glyphs=e.glyphs);const n=this.addMove(t,t.san,e.fen);n.id=e.id||s.generate(),this.moveList.set(n.moveKey,n)}}decodeMoves(e){for(let t=0;t<e.length;t++){const n=e[t];this.decodeMove(n)}}positionChanged(){this.supressEvents||(this.currentMove.fen||(this.currentMove.fen=P.FenString.fromPosition(this.curPos)),this.Fen=this.currentMove.fen)}checkGameState(){const e=new N;0===this.curPos.generateMoves(p.Piece.None,d.GenerateMode.All,!0).length&&(this.curPos.isKingInCheck()?e.InCheckMate=!0:e.InStaleMate=!0),this.curPos.hasPiece(p.Piece.WPawn)||this.curPos.hasPiece(p.Piece.WQueen)||this.curPos.hasPiece(p.Piece.WRook)||(this.curPos.hasPiece(p.Piece.WKnight)||this.curPos.hasPiece(p.Piece.WBishop))&&(this.curPos.hasPiece(p.Piece.WKnight)||1!==this.curPos.getPieceCount(p.Piece.WBishop))&&(1!==this.curPos.getPieceCount(p.Piece.WKnight)||this.curPos.hasPiece(p.Piece.WBishop))||(e.IsNoMaterialWhite=!0),this.curPos.hasPiece(p.Piece.BPawn)||this.curPos.hasPiece(p.Piece.BQueen)||this.curPos.hasPiece(p.Piece.BRook)||(this.curPos.hasPiece(p.Piece.BKnight)||this.curPos.hasPiece(p.Piece.BBishop))&&(this.curPos.hasPiece(p.Piece.BKnight)||1!==this.curPos.getPieceCount(p.Piece.BBishop))&&(1!==this.curPos.getPieceCount(p.Piece.BKnight)||this.curPos.hasPiece(p.Piece.BBishop))||(e.IsNoMaterialBlack=!0);const t=this.currentMove.Prev,n=t.fen;let i=1;for(;!t.START_MARKER;)n===t.fen&&i++;return e.IsPosRepeation=i>=3,e.Is50MovesRule=this.curPos.HalfMoveCount>100,e}makeMove(e,t,n){const{curPos:i}=this,a=new m.SimpleMove;if(a.pieceNum=i.getPieceNum(e),a.movingPiece=i.getPiece(e),!p.Piece.isPiece(a.movingPiece))return;a.color=p.Piece.color(a.movingPiece),a.from=e,a.to=t,a.capturedPiece=i.getPiece(t),a.capturedSquare=t,a.castleFlags=i.Castling.Flag,a.epSquare=i.EpTarget,a.promote=p.Piece.None;const s=a.movingPiece,r=p.Piece.type(s),o=l.Color.flip(i.WhoMove),c=i.WhoMove===l.Color.White?7:0;if(r==p.Piece.Pawn&&u.Square.rank(t)==c){if(!n)return this.InPromotion=!0,a;a.promote=p.Piece.typeFromChar(n)}if(r==p.Piece.Pawn&&a.capturedPiece==p.Piece.None&&u.Square.fyle(e)!=u.Square.fyle(t)){const e=p.Piece.create(o,p.Piece.Pawn);a.capturedSquare=this.curPos.WhoMove===l.Color.White?t-8:t+8,a.capturedPiece=e}return a}addMove(e,t,n){const{curPos:i}=this;this.currentMove.END_MARKER||this.currentMove.truncate(),e.san||(e.san=t&&null!=t?t:this.curPos.makeSanString(e,d.SanCheckLevel.MateTest));const a=this.currentMove.append(e);return this.curPos.doSimpleMove(e),n||(n=P.FenString.fromPosition(i)),a.fen=n,this.currentMove.fen=n,this.positionChanged(),a}moveToKey(e){const t=this.moveList.get(e);t&&(t.inVariation()?(this.supressEvents=!0,this.currentMove=t,this.currentMove.isBegin()?this.curPos.copyFrom(this.startPos):this.curPos=new d.Position(this.currentMove.Prev.fen),this.supressEvents=!1,this.positionChanged()):this.moveToPly(t.PlyCount))}moveBegin(){this.currentMove=this.CurrentMove.Begin,this.curPos.copyFrom(this.startPos)}moveFirst(){this.moveBegin(),this.moveForward()}moveLast(){this.moveEnd(),this.moveBackward()}moveEnd(){this.moveToPly(9999)}moveForward(){return!this.currentMove.END_MARKER&&(this.currentMove=this.currentMove.Next,this.currentMove.END_MARKER||this.curPos.doSimpleMove(this.currentMove.sm),this.positionChanged(),!0)}moveBackward(){if(this.currentMove.START_MARKER)return!1;if(this.currentMove.Prev.START_MARKER){if(this.currentMove.inVariation())return this.curPos.undoSimpleMove(this.currentMove.sm),this.currentMove=this.currentMove.exitVariation(),this.positionChanged(),!0;this.curPos.copyFrom(this.startPos)}else this.currentMove.END_MARKER||this.curPos.undoSimpleMove(this.currentMove.sm);return this.currentMove=this.currentMove.Prev,this.positionChanged(),!0}moveToPly(e){if(this.supressEvents=!0,e>this.CurrentPlyCount){for(;!this.CurrentMove.END_MARKER&&e>this.CurrentPlyCount&&this.moveForward(););this.supressEvents=!1,this.positionChanged()}else if(e<this.CurrentPlyCount){for(;!this.CurrentMove.START_MARKER&&e<this.CurrentPlyCount&&this.moveBackward(););this.supressEvents=!1,this.positionChanged()}this.supressEvents=!1}findNextMistake(e,t,n){if(!this.currentMove.inVariation()){const i=Array.from(this.moveList.values()).filter((t=>{const i=t.sm;return i.color===e&&i.judgments&&i.judgments.length&&n===i.judgments[0].name.toLowerCase()}));if(i.length>0){const e=i.filter((e=>e.sm.ply>t));if(e.length>0)return e[0].PlyCount;const n=i.filter((e=>e.sm.ply<t));if(n.length>0)return n[0].PlyCount}}}getResultName(e){return"char"===e?c.GameResult.resultChar[this.Result]:"short"===e?c.GameResult.resultShortString[this.Result]:"long"===e?c.GameResult.resultLongStr[this.Result]:"html"===e?c.GameResult.resultHtmlStr[this.Result]:"?"}static plyToTurn(e){return f.plyToTurn(e)}static plyToColor(e){return f.plyToColor(e)}static turnToPly(e,t){return f.turnToPly(e,t)}}},5146:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0,function(e){const t=void 0;e.White=0,e.Black=1,e.None=t,e.WhiteChar="w",e.BlackChar="b",e.isColor=function(e){return e!==t&&(0===e||1===e)},e.flip=function(e){return 1-e},e.isBW=function(t){return t===e.White||t===e.Black},e.isName=function(e){return"white"===e||"black"===e},e.isChar=function(e){return"w"===e||"b"===e},e.toName=function(t){switch(t){case e.White:return"white";case e.Black:return"black"}},e.fromName=function(t){switch(t){case"white":return e.White;case"black":return e.Black}},e.toChar=function(t){switch(t){case e.White:return"w";case e.Black:return"b"}},e.fromChar=function(t){switch(t){case"w":return e.White;case"b":return e.Black}}}(t.Color||(t.Color={}))},3950:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.turnToPly=t.plyToColor=t.plyToTurn=void 0;const i=n(655).__importDefault(n(1987)),a=n(5146);t.plyToTurn=e=>i.default(1+(e-1)/2);t.plyToColor=e=>0===e||e%2==1?a.Color.White:a.Color.Black;t.turnToPly=(e,t)=>0===e?0:2*(e-1)+(t=null!=t?t:a.Color.White)+1},1686:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,function(e){const t=void 0,n=[0,2,1,0,8,10,9,0,4,6,5],i=[!1,!1,!1,!1,!1,!0,!0,!1,!1,!0,!0],a=[0,8,-8,0,-1,7,-9,0,1,9,-7],s=[[t,8,t,t,t,t,t,t,1,9,t],[t,9,t,t,0,8,t,t,2,10,t],[t,10,t,t,1,9,t,t,3,11,t],[t,11,t,t,2,10,t,t,4,12,t],[t,12,t,t,3,11,t,t,5,13,t],[t,13,t,t,4,12,t,t,6,14,t],[t,14,t,t,5,13,t,t,7,15,t],[t,15,t,t,6,14,t,t,t,t,t],[t,16,0,t,t,t,t,t,9,17,1],[t,17,1,t,8,16,0,t,10,18,2],[t,18,2,t,9,17,1,t,11,19,3],[t,19,3,t,10,18,2,t,12,20,4],[t,20,4,t,11,19,3,t,13,21,5],[t,21,5,t,12,20,4,t,14,22,6],[t,22,6,t,13,21,5,t,15,23,7],[t,23,7,t,14,22,6,t,t,t,t],[t,24,8,t,t,t,t,t,17,25,9],[t,25,9,t,16,24,8,t,18,26,10],[t,26,10,t,17,25,9,t,19,27,11],[t,27,11,t,18,26,10,t,20,28,12],[t,28,12,t,19,27,11,t,21,29,13],[t,29,13,t,20,28,12,t,22,30,14],[t,30,14,t,21,29,13,t,23,31,15],[t,31,15,t,22,30,14,t,t,t,t],[t,32,16,t,t,t,t,t,25,33,17],[t,33,17,t,24,32,16,t,26,34,18],[t,34,18,t,25,33,17,t,27,35,19],[t,35,19,t,26,34,18,t,28,36,20],[t,36,20,t,27,35,19,t,29,37,21],[t,37,21,t,28,36,20,t,30,38,22],[t,38,22,t,29,37,21,t,31,39,23],[t,39,23,t,30,38,22,t,t,t,t],[t,40,24,t,t,t,t,t,33,41,25],[t,41,25,t,32,40,24,t,34,42,26],[t,42,26,t,33,41,25,t,35,43,27],[t,43,27,t,34,42,26,t,36,44,28],[t,44,28,t,35,43,27,t,37,45,29],[t,45,29,t,36,44,28,t,38,46,30],[t,46,30,t,37,45,29,t,39,47,31],[t,47,31,t,38,46,30,t,t,t,t],[t,48,32,t,t,t,t,t,41,49,33],[t,49,33,t,40,48,32,t,42,50,34],[t,50,34,t,41,49,33,t,43,51,35],[t,51,35,t,42,50,34,t,44,52,36],[t,52,36,t,43,51,35,t,45,53,37],[t,53,37,t,44,52,36,t,46,54,38],[t,54,38,t,45,53,37,t,47,55,39],[t,55,39,t,46,54,38,t,t,t,t],[t,56,40,t,t,t,t,t,49,57,41],[t,57,41,t,48,56,40,t,50,58,42],[t,58,42,t,49,57,41,t,51,59,43],[t,59,43,t,50,58,42,t,52,60,44],[t,60,44,t,51,59,43,t,53,61,45],[t,61,45,t,52,60,44,t,54,62,46],[t,62,46,t,53,61,45,t,55,63,47],[t,63,47,t,54,62,46,t,t,t,t],[t,t,48,t,t,t,t,t,57,t,49],[t,t,49,t,56,t,48,t,58,t,50],[t,t,50,t,57,t,49,t,59,t,51],[t,t,51,t,58,t,50,t,60,t,52],[t,t,52,t,59,t,51,t,61,t,53],[t,t,53,t,60,t,52,t,62,t,54],[t,t,54,t,61,t,53,t,63,t,55],[t,t,55,t,62,t,54,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t]],r=[];function o(e,t){return((e,t)=>s[e][t])(e,t)}!function(){const e=[1,2,4,8,5,9,6,10,0];for(let e=0;e<=65;e++){r[e]=[];for(let t=0;t<=65;t++)r[e][t]=0}let n;for(let i=0;i<=63;i++){let a=0;for(;0!==e[a];){for(n=o(i,e[a]);n!==t;)r[i][n]=e[a],n=o(n,e[a]);a++}}}(),e.Null=0,e.Up=1,e.Down=2,e.Left=4,e.Right=8,e.UpLeft=5,e.UpRight=9,e.DownLeft=6,e.DownRight=10,e.opposite=function(e){return n[e]},e.isDiagonal=function(e){return i[e]},e.delta=function(e){return a[e]},e.squareDirection=function(e,t){return r[e][t]},e.squareMove=o}(t.Direction||(t.Direction={}))},440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EvalItem=void 0;const i=n(9895),a=n(2742);t.EvalItem=class{constructor(e){this.ceil=0,this.ceilPawn=0,this.advantage=0,this.mate=void 0,a.i18n.register(),e&&(this.cp=e.cp,this.cp||0===this.cp||(this.cp=void 0),this.mate=e.mate,this.mate||0===this.mate||(this.mate=void 0),this.best=e.best,this.variation=e.variation,this.depth=e.depth,this.time=e.time)}normalize(e){var t;void 0===this.cp&&(void 0!==this.mate?this.cp=1e3*Math.sign(this.mate):this.cp=null!==(t=e.cp)&&void 0!==t?t:0),this.ceil=this.cp,this.ceil>1e3&&(this.ceil=1e3),this.ceil<-1e3&&(this.ceil=-1e3),this.ceilPawn=this.ceil/100,this.advantage=this.ceilPawn}extend(e){if(this.advantage=e.ceilPawn,this.desc="",void 0!==this.mate){if(0!==this.mate){const e=a._("chess","mateIn");this.desc=i.sprintf(e,this.mate)}}else this.desc=this.advantage>0?"+":"",this.desc+=this.advantage}}},8797:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FenString=t.FenFormat=void 0;const i=n(655),a=i.__importDefault(n(6796)),s=i.__importDefault(n(1987)),r=n(7042),o=n(7040),l=n(5146),c=n(8118),p=n(3950),u=new Map([["P",r.Piece.WPawn],["K",r.Piece.WKing],["Q",r.Piece.WQueen],["R",r.Piece.WRook],["N",r.Piece.WKnight],["B",r.Piece.WBishop],["p",r.Piece.BPawn],["k",r.Piece.BKing],["q",r.Piece.BQueen],["r",r.Piece.BRook],["n",r.Piece.BKnight],["b",r.Piece.BBishop]]),d=[];d[r.Piece.WPawn]="P",d[r.Piece.WKing]="K",d[r.Piece.WQueen]="Q",d[r.Piece.WRook]="R",d[r.Piece.WKnight]="N",d[r.Piece.WBishop]="B",d[r.Piece.BPawn]="p",d[r.Piece.BKing]="k",d[r.Piece.BQueen]="q",d[r.Piece.BRook]="r",d[r.Piece.BKnight]="n",d[r.Piece.BBishop]="b";const h="8/8/8/8/8/8/8/8 w KQkq - 0 1";function m(e){return 8*(7-Math.floor(e/8))+e%8}function P(e){if(!e)return h;for(;e.indexOf("  ")>=0;)e=e.replace("  "," ");return e}var f;!function(e){e[e.board=0]="board",e[e.color=1]="color",e[e.castlingEp=2]="castlingEp",e[e.complete=3]="complete"}(f=t.FenFormat||(t.FenFormat={}));class g{static trim(e,t){const n=(e=P(e)).split(/\s+/);let i=String(n[0]);return t>=f.color&&n.length>1&&(i+=" "+(l.Color.isChar(n[1])?n[1]:"w"),t>=f.castlingEp&&n.length>2&&(i+=" "+n[2],n.length>3&&(i+=" "+n[3],t>=f.complete&&n.length>4&&(i+=" "+n[4],n.length>5&&(i+=" "+n[5]))))),i}static toDefenition(e){const t={board:"8/8/8/8/8/8/8/8",color:l.Color.White,castling:new c.Castling,castlingSet:!1,eptarget:o.Square.NullSquare,halfMoves:0,moveNo:1},n=(e=P(e)).split(/\s+/);if(t.board=String(n[0]),n.length>1&&(t.color=l.Color.isChar(n[1])?l.Color.fromChar(n[1]):l.Color.White),n.length>2&&(t.castlingSet=t.castling.fromFen(n[2])),n.length>3&&"-"!==n[3].charAt(0)){const e=n[3].charAt(0);if(e>="a"&&e<="h"){const i=n[3].charAt(1);if("3"===i||"6"===i){const n=o.Square.fyleFromChar(e),a=o.Square.rankFromChar(i);o.Square.isFyle(n)&&o.Square.isRank(a)&&(t.eptarget=o.Square.create(n,a))}}}if(n.length>4&&(t.halfMoves=s.default(n[4])),n.length>5){const e=s.default(n[5]);e>=1&&(t.moveNo=e)}return t}static toPosition(e,t,n=!0){const i=g.toDefenition(t);let s=0,o=0;for(s=2;s<=8;s++){const e=new RegExp(String(s),"g");i.board=i.board.replace(e,a.default("1",s))}if(i.board=i.board.replace(/\//g,""),64!==i.board.length)return!1;for(e.clear(),o=0;o<64;o++){const t=(d=i.board.charAt(o),u.has(d)?u.get(d):r.Piece.None);t!==r.Piece.None&&e.addPiece(t,m(o))}var d;if(e.WhoMove=i.color,e.Castling.assign(i.castling),!i.castlingSet&&n){const t=e.Board;t[4]===r.Piece.WKing&&(t[0]===r.Piece.WRook&&e.Castling.set(l.Color.White,c.CastlingSide.Queen,!0),t[7]===r.Piece.WRook&&e.Castling.set(l.Color.White,c.CastlingSide.King,!0)),t[60]===r.Piece.BKing&&(t[56]===r.Piece.BRook&&e.Castling.set(l.Color.Black,c.CastlingSide.Queen,!0),t[63]===r.Piece.BRook&&e.Castling.set(l.Color.Black,c.CastlingSide.King,!0))}return e.EpTarget=i.eptarget,e.HalfMoveCount=i.halfMoves,e.PlyCount=p.turnToPly(i.moveNo,e.WhoMove)-1,!0}static fromPosition(e,t=f.complete){let n,i="";const a=e.Board;for(let e=7;e>=0;e--){let t=0;7!==e&&(i+="/");for(let s=0;s<=7;s++)n=a[o.Square.create(s,e)],n!==r.Piece.None?(t>0&&(i+=t.toString()),t=0,i+=d[n]):t++;t&&(i+=t.toString())}return t>=f.color&&(i+=" "+l.Color.toChar(e.WhoMove),t>=f.castlingEp&&(i+=" "+e.Castling.asFen(),e.EpTarget===o.Square.NullSquare?i+=" -":(i+=" ",i+=o.Square.name(e.EpTarget)),t>=f.complete&&(i+=" "+e.HalfMoveCount.toString(),i+=" "+(Math.floor(e.PlyCount/2)+1).toString()))),i}}t.FenString=g,g.standartStart="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",g.emptyBoard=h},2353:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameResult=void 0,function(e){let t,n;!function(e){e[e.None=0]="None",e[e.White=1]="White",e[e.Black=2]="Black",e[e.Draw=3]="Draw"}(t=e.Color||(e.Color={})),function(e){e[e.None=0]="None",e[e.Win=1]="Win",e[e.Lose=2]="Lose",e[e.Draw=3]="Draw"}(n=e.Type||(e.Type={})),e.OppositeColor=[t.None,t.Black,t.White,t.Draw];n.None,n.Lose,n.Win,n.Draw;e.score=[0,1,0,.5],e.resultChar=["*","1","0","="],e.resultShortString=["*","1-0","0-1","=-="],e.resultLongStr=["*","1-0","0-1","1/2-1/2"],e.resultHtmlStr=["*","1&ndash;0","0&ndash;1","&frac12;&ndash;&frac12;"]}(t.GameResult||(t.GameResult={}))},4588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0;const i=n(655).__importStar(n(4670)),a=n(5146),s=n(1113),r=n(401);class o{constructor(){this.vars=[],this.varNo=0,this.parent=null,this.id="0",this.uid=i.generate(),this.name="",this.fen="",this.sm=new s.SimpleMove,this.whoMove=a.Color.White,this.ply=0,this.comments="",this.START_MARKER=!1,this.END_MARKER=!1,this.prev_move=null,this.next_move=null}static init(e,t){const n=new o;return n.name="FirstMove",n.fen=e,n.START_MARKER=!0,n.END_MARKER=!1,n.next_move=new o,n.next_move.name="LastMove",n.next_move.START_MARKER=!1,n.next_move.END_MARKER=!0,n.next_move.prev_move=n,t instanceof r.Position&&(n.ply=t.PlyCount,n.next_move.ply=t.PlyCount),t instanceof o&&(n.parent=t,n.ply=t.ply,n.varNo=t.numVars+1,n.next_move.parent=t,n.next_move.ply=t.ply,n.next_move.varNo=t.numVars+1),n.next_move}isBegin(){return this.START_MARKER}isFirst(){return this.START_MARKER||null!==this.prev_move&&this.prev_move.START_MARKER}isLast(){return this.END_MARKER||null!==this.next_move&&this.next_move.END_MARKER}isEnd(){return this.END_MARKER}get Begin(){let e=this;for(;e.prev_move;)e=e.prev_move;return e}get First(){return this.Begin.Next}get Prev(){return this.isBegin()?this:this.prev_move}get Next(){return this.isEnd()?this:this.next_move}get Last(){return this.End.Prev}get End(){let e=this;for(;e.next_move;)e=e.next_move;return e}get PlyCount(){return this.ply}get numVars(){return this.vars.length}addVariation(){let e=null;if(!this.START_MARKER){const t=this.Prev;t&&(e=o.init(t.fen,t),t.vars.push(e))}return e}moveIntoVariation(e){let t=null;return e>0&&e<=this.numVars&&(t=this.vars[e].Next),t}exitVariation(){return this.parent?this.parent:this}inVariation(){return!!this.parent}truncate(){this.vars=[],this.END_MARKER=!0}append(e){const t=new o;return t.parent=this.parent,t.varNo=this.varNo,t.sm=e,t.name=e.san?e.san:e.ply.toString(),t.ply=e.ply,t.next_move=this,t.prev_move=this.prev_move,this.prev_move&&(this.prev_move.next_move=t,this.prev_move=t),t.next_move.ply=t.ply,t}get moveKey(){const e=this.parentMoveKey;return e?e+"!"+this.varNo.toString()+"-"+this.ply.toString():this.ply.toString()}get parentMoveKey(){return this.parent?this.parent.moveKey:""}}t.Move=o},7042:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Piece=void 0;const i=n(5146);!function(e){const t=void 0,n=[!1,!1,!0,!0,!0,!1,!1,!1],a=["x","K","Q","R","B","N","P",".","x","k","q","r","b","n","p","x"],s=["xx","wk","wq","wr","wb","wn","wp","xx","xx","bk","bq","br","bb","bn","bp"];e.King=1,e.Queen=2,e.Rook=3,e.Bishop=4,e.Knight=5,e.Pawn=6,e.None=void 0,e.WKing=1,e.WQueen=2,e.WRook=3,e.WBishop=4,e.WKnight=5,e.WPawn=6,e.BKing=9,e.BQueen=10,e.BRook=11,e.BBishop=12,e.BKnight=13,e.BPawn=14,e.Score=[9999,10,6,3,3,1],e.notEmpty=function(e){return e},e.isPiece=function(n){return n!==t&&(n>=e.WKing&&n<=e.WPawn||n>=e.BKing&&n<=e.BPawn)},e.isPieceType=function(n){return n!==t&&n>=e.King&&n<=e.Pawn},e.type=function(e){return 7&e},e.color=function(e){return(8&e)>>3},e.colorOrEmpty=function(t){return t===e.None?i.Color.None:(8&t)>>3},e.create=function(e,t){return e<<3|7&t},e.isSlider=function(t){return n[e.type(t)]},e.typeFromChar=function(t){switch(t){case"k":return e.King;case"q":return e.Queen;case"r":return e.Rook;case"n":return e.Knight;case"b":return e.Bishop;case"p":return e.Pawn;default:return e.None}},e.toChar=function(e){return a[e]},e.toUpperChar=function(t){switch(e.type(t)){case e.King:return"K";case e.Queen:return"Q";case e.Rook:return"R";case e.Knight:return"N";case e.Bishop:return"B";case e.Pawn:return"P";default:return""}},e.pieceName=function(e){return s[e]}}(t.Piece||(t.Piece={}))},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChessPositionStd=t.Position=t.GenerateMode=t.SanCheckLevel=void 0;const i=n(655),a=i.__importDefault(n(361)),s=i.__importDefault(n(3651)),r=n(5146),o=n(8118),l=n(1686),c=n(7042),p=n(7040),u=n(1113),d=n(8797),h=p.Square.NullSquare,m=c.Piece.None,{Null:P,Up:f,Down:g,Left:b,Right:v,UpLeft:y,UpRight:R,DownLeft:C,DownRight:k}=l.Direction;function N(e,t){return void 0===t||-1!==s.default(t,e)}var w,S;!function(e){e[e.NoCheckTest=0]="NoCheckTest",e[e.CheckText=1]="CheckText",e[e.MateTest=2]="MateTest"}(w=t.SanCheckLevel||(t.SanCheckLevel={})),function(e){e[e.Captures=1]="Captures",e[e.NonCaptures=2]="NonCaptures",e[e.All=3]="All"}(S=t.GenerateMode||(t.GenerateMode={}));class E{constructor(e){this.brd=[],this.capt=[],this.plyCnt=0,this.strictCastling=!1,this.pinned=[],this.list=[],this.listPos=[],this.pieceCount=[],this.material=[],this.numOnRank=[],this.numOnFyle=[],this.numOnLeftDiag=[],this.numOnRightDiag=[],this.numOnSquareColor=[],this.wm=r.Color.White,this.castling=new o.Castling,this.EpTarget=h,this.HalfMoveCount=0,this.getPiece=e=>this.brd[e],this.getPieceNum=e=>this.listPos[e],this.clear(),e&&d.FenString.toPosition(this,e)}clear(){let e,t;for(this.wm=r.Color.White,this.capt=[],this.EpTarget=h,this.castling.clear(),this.HalfMoveCount=0,this.plyCnt=0,this.pieceCount[r.Color.White]=0,this.pieceCount[r.Color.Black]=0,this.list[r.Color.White]=[],this.list[r.Color.Black]=[],this.listPos=[],e=0;e<=64;e++)this.brd[e]=m;for(e=c.Piece.WKing;e<=c.Piece.BPawn;e++){for(this.material[e]=0,this.numOnRank[e]=[],this.numOnFyle[e]=[],this.numOnLeftDiag[e]=[],this.numOnRightDiag[e]=[],this.numOnSquareColor[e]=[],t=0;t<8;t++)this.numOnRank[e][t]=0,this.numOnFyle[e][t]=0;for(t=0;t<15;t++)this.numOnLeftDiag[e][t]=0,this.numOnRightDiag[e][t]=0;this.numOnSquareColor[e][r.Color.White]=0,this.numOnSquareColor[e][r.Color.Black]=0}}copyFrom(e){this.brd=a.default(e.brd),this.pieceCount=a.default(e.pieceCount),this.listPos=a.default(e.listPos),this.list=a.default(e.list),this.material=a.default(e.material),this.numOnFyle=a.default(e.numOnFyle),this.numOnRank=a.default(e.numOnRank),this.numOnLeftDiag=a.default(e.numOnLeftDiag),this.numOnRightDiag=a.default(e.numOnRightDiag),this.numOnSquareColor=a.default(e.numOnSquareColor),this.numOnSquareColor=a.default(e.numOnSquareColor),this.EpTarget=e.EpTarget,this.wm=e.wm,this.plyCnt=e.plyCnt,this.HalfMoveCount=e.HalfMoveCount,this.castling=e.castling.clone()}clone(){const e=new E;return e.copyFrom(this),e}get WhoMove(){return this.wm}set WhoMove(e){this.wm=e}get Board(){return this.brd}get Captured(){return this.capt}get Castling(){return this.castling}hasPiece(e){return this.material[e]>0}get PieceCount(){return this.pieceCount}getPieceCount(e){return this.material[e]}addPiece(e,t){const n=c.Piece.color(e);if(16===this.pieceCount[n])return!1;if(c.Piece.type(e)===c.Piece.King){if(this.material[e]>0)return!1;if(this.pieceCount[n]>0){const e=this.list[n][0];this.list[n][this.pieceCount[n]]=e,this.listPos[e]=this.pieceCount[n]}this.list[n][0]=t,this.listPos[t]=0}else this.listPos[t]=this.pieceCount[n],this.list[n][this.pieceCount[n]]=t;return this.pieceCount[n]++,this.material[e]++,this.addToBoard(e,t),!0}removePiece(e,t){const n=c.Piece.color(e);return 0!==this.pieceCount[n]&&(0!==this.material[e]&&(this.removeFromBoard(e,t),this.material[e]--,this.pieceCount[n]--,c.Piece.type(e)===c.Piece.King?(this.list[n][0]=0,this.listPos[t]=0):(this.listPos[t]=this.pieceCount[n],this.list[n][this.pieceCount[n]]=t),!0))}get PlyCount(){return this.plyCnt}set PlyCount(e){this.plyCnt=e}doSimpleMove(e){const t=p.Square.notEmpty(e.from),n=p.Square.notEmpty(e.to);let i=c.Piece.notEmpty(this.brd[t]);const a=c.Piece.type(i),s=r.Color.flip(this.wm);if(e.pieceNum=this.listPos[t],e.capturedPiece=this.brd[n],e.capturedSquare=n,e.castleFlags=this.castling.Flag,e.epSquare=this.EpTarget,e.oldHalfMoveClock=this.HalfMoveCount,this.HalfMoveCount++,this.plyCnt++,a===c.Piece.Pawn&&e.capturedPiece===m&&p.Square.fyle(t)!==p.Square.fyle(n)){const t=c.Piece.create(s,c.Piece.Pawn);e.capturedSquare=this.wm===r.Color.White?n-8:n+8,e.capturedPiece=t}if(c.Piece.isPiece(e.capturedPiece)&&p.Square.isSquare(e.capturedSquare)&&(e.capturedNum=this.listPos[e.capturedSquare],this.pieceCount[s]--,this.listPos[this.list[s][this.pieceCount[s]]]=e.capturedNum,this.list[s][e.capturedNum]=this.list[s][this.pieceCount[s]],this.material[e.capturedPiece]--,this.HalfMoveCount=0,this.removeFromBoard(e.capturedPiece,e.capturedSquare),this.capt[this.plyCnt]=e.capturedPiece),e.promote!==m&&(this.material[i]--,this.removeFromBoard(i,t),i=c.Piece.create(this.wm,e.promote),this.material[i]++,this.addToBoard(i,t)),this.list[this.wm][e.pieceNum]=n,this.listPos[n]=e.pieceNum,this.removeFromBoard(i,t),this.addToBoard(i,n),a===c.Piece.King&&4===p.Square.fyle(t)&&(2===p.Square.fyle(n)||6===p.Square.fyle(n))){let e,t,i=c.Piece.create(this.wm,c.Piece.Rook);2===p.Square.fyle(n)?(e=n-2,t=n+1):(e=n+1,t=n-1),this.listPos[t]=this.listPos[e],this.list[this.wm][this.listPos[t]]=t,this.removeFromBoard(i,e),this.addToBoard(i,t)}if(this.castling&&(a===c.Piece.King&&(this.castling.set(this.wm,o.CastlingSide.Queen,!1),this.castling.set(this.wm,o.CastlingSide.King,!1)),this.wm===r.Color.White?(0===t&&this.castling.set(r.Color.White,o.CastlingSide.Queen,!1),7===t&&this.castling.set(r.Color.White,o.CastlingSide.King,!1),56===n&&this.castling.set(r.Color.Black,o.CastlingSide.Queen,!1),63===n&&this.castling.set(r.Color.Black,o.CastlingSide.King,!1)):(56===t&&this.castling.set(r.Color.Black,o.CastlingSide.Queen,!1),63===t&&this.castling.set(r.Color.Black,o.CastlingSide.King,!1),0===n&&this.castling.set(r.Color.White,o.CastlingSide.Queen,!1),7===n&&this.castling.set(r.Color.White,o.CastlingSide.King,!1))),this.EpTarget=h,a===c.Piece.Pawn){const e=p.Square.rank(t),i=p.Square.rank(n),a=p.Square.move(n,b),s=p.Square.move(n,b);1===e&&3===i&&(p.Square.isSquare(a)&&this.brd[a]===c.Piece.BPawn||p.Square.isSquare(s)&&this.brd[s]===c.Piece.BPawn)&&(this.EpTarget=p.Square.move(t,f)),6===e&&4===i&&(p.Square.isSquare(a)&&this.brd[a]===c.Piece.WPawn||p.Square.isSquare(s)&&this.brd[s]===c.Piece.WPawn)&&(this.EpTarget=p.Square.move(t,g)),this.HalfMoveCount=0}this.wm=s}undoSimpleMove(e){const t=p.Square.notEmpty(e.from),n=p.Square.notEmpty(e.to);let i=c.Piece.notEmpty(this.brd[n]);if(this.EpTarget=e.epSquare,this.castling.Flag=e.castleFlags,this.HalfMoveCount=e.oldHalfMoveClock,this.plyCnt--,this.wm=r.Color.flip(this.wm),e.pieceNum=this.listPos[n],c.Piece.isPiece(e.capturedPiece)&&p.Square.isSquare(e.capturedSquare)){const t=r.Color.flip(this.wm);this.listPos[this.list[t][e.capturedNum]]=this.pieceCount[t],this.listPos[e.capturedSquare]=e.capturedNum,this.list[t][this.pieceCount[t]]=this.list[t][e.capturedNum],this.list[t][e.capturedNum]=e.capturedSquare,this.material[e.capturedPiece]++,this.pieceCount[t]++}if(e.promote!==m&&(this.material[i]--,this.removeFromBoard(i,n),i=c.Piece.create(this.wm,c.Piece.Pawn),this.material[i]++,this.addToBoard(i,n)),this.list[this.wm][e.pieceNum]=t,this.listPos[t]=e.pieceNum,this.removeFromBoard(i,n),this.addToBoard(i,t),c.Piece.isPiece(e.capturedPiece)&&p.Square.isSquare(e.capturedSquare)&&(this.addToBoard(e.capturedPiece,e.capturedSquare),delete this.capt[this.plyCnt+1]),c.Piece.type(i)===c.Piece.King&&4===p.Square.fyle(t)&&(2===p.Square.fyle(n)||6===p.Square.fyle(n))){const e=this.wm===r.Color.White?c.Piece.WRook:c.Piece.BRook;let t,i;2===p.Square.fyle(n)?(t=n-2,i=n+1):(t=n+1,i=n-1),this.listPos[t]=this.listPos[i],this.list[this.wm][this.listPos[i]]=t,this.removeFromBoard(e,i),this.addToBoard(e,t)}}makeSanString(e,t=w.MateTest){let n="";const i=p.Square.notEmpty(e.from);e.pieceNum=this.listPos[i];const a=this.list[this.wm][e.pieceNum],s=c.Piece.notEmpty(this.brd[a]),r=c.Piece.type(s),l=p.Square.notEmpty(e.to);let u;if(r===c.Piece.Pawn)p.Square.fyle(a)!==p.Square.fyle(l)&&(n+=p.Square.fyleChar(a),n+="x"),n+=p.Square.fyleChar(l),n+=p.Square.rankChar(l),0!==p.Square.rank(l)&&7!==p.Square.rank(l)||e.promote===m||(n+="=",n+=c.Piece.toChar(e.promote));else if(r===c.Piece.King)e.from===h?n+="--":4===p.Square.fyle(a)&&6===p.Square.fyle(l)?n+=o.Castling.K:4===p.Square.fyle(a)&&2===p.Square.fyle(l)?n+=o.Castling.Q:(n+="K",this.brd[l]!==m&&(n+="x"),n+=p.Square.fyleChar(l),n+=p.Square.rankChar(l));else if(n+=c.Piece.toChar(r),this.material[c.Piece.notEmpty(this.brd[i])]<2)this.brd[l]!==m&&(n+="x"),n+=p.Square.fyleChar(l),n+=p.Square.rankChar(l);else{let e=0;const t=p.Square.fyleChar(a),i=p.Square.rankChar(a);u=[],this.matchLegalMove(u,r,l);for(let n=0;n<u.length;n++){const s=u[n],o=p.Square.notEmpty(s.from),d=c.Piece.type(c.Piece.notEmpty(this.brd[o]));if(l===s.to&&a!==o&&d===r){const n=p.Square.fyleChar(o),a=p.Square.rankChar(o);e|=1,i===a?e|=2:t===n&&(e|=4)}}e&&(5!=e&&(n+=t),e>=5&&(n+=i)),this.brd[l]!==m&&(n+="x"),n+=p.Square.fyleChar(l),n+=p.Square.rankChar(l)}if(t>0){if(this.doSimpleMove(e),this.isKingInCheck()){let e="+";t>1&&(u=this.generateMoves(),0===u.length&&(e="#")),n+=e}this.undoSimpleMove(e)}return n}generateMoves(e,t=S.All,n=!0){const i=!(0!=(t&S.NonCaptures));let a=0;a=e!==m?1<<e:1<<c.Piece.King|1<<c.Piece.Queen|1<<c.Piece.Rook|1<<c.Piece.Bishop|1<<c.Piece.Knight|1<<c.Piece.Pawn;const s=[];this.calcPins();let r=0;if(n){const n=[];if(r=this.calcNumChecks(this.getKingSquare(this.wm),n),r>0)return this.genCheckEvasions(s,e,t,n),s}const o=this.pieceCount[this.wm];for(let e=1;e<o;e++){const n=this.list[this.wm][e],r=c.Piece.notEmpty(this.brd[n]),o=c.Piece.type(r);if(!(a&1<<o))continue;const p=this.pinned[e];p!==P?o===c.Piece.Pawn?this.genPawnMoves(s,n,p,t):o===c.Piece.Knight||(o===c.Piece.Queen||o===c.Piece.Rook&&!l.Direction.isDiagonal(p)||o===c.Piece.Bishop&&l.Direction.isDiagonal(p))&&(this.genSliderMoves(s,this.wm,n,p,i),this.genSliderMoves(s,this.wm,n,l.Direction.opposite(p),i)):o===c.Piece.Pawn?this.genPawnMoves(s,n,P,t):this.genPieceMoves(s,n,i)}if(a&1<<c.Piece.King){const e=!r;this.genKingMoves(s,t,e)}return s}isLegalMove(e){const t=e.from,n=e.to;if(!p.Square.isSquare(t)||!p.Square.isSquare(n))return!1;if(t===n)return!1;let i=this.brd[t];const a=this.brd[n];if(!c.Piece.isPiece(i))return!1;if(c.Piece.color(i)!==this.wm)return!1;if(c.Piece.isPiece(a)&&c.Piece.color(a)===this.wm)return!1;if(e.movingPiece!==i)return!1;if(i=c.Piece.type(i),e.promote!==m&&i!==c.Piece.Pawn)return!1;const s=r.Color.flip(this.wm);if(i===c.Piece.Pawn){let i=p.Square.rank(t),s=p.Square.rank(n);this.wm===r.Color.Black&&(i=7-i,s=7-s);const o=s-i,l=p.Square.fyle(n)-p.Square.fyle(t);if(o<1||o>2)return!1;if(l<-1||l>1)return!1;if(0===l){if(a!==m)return!1;if(2===o){if(1!==i)return!1;const e=t+(n-t)/2;if(this.brd[e]!==m)return!1}}else{if(1!==o)return!1;if(a===m&&n!==this.EpTarget)return!1}if(7===s){const t=e.promote;if(t!==c.Piece.Queen&&t!==c.Piece.Rook&&t!==c.Piece.Bishop&&t!==c.Piece.Knight)return!1}else if(e.promote!==m)return!1}else if(c.Piece.isSlider(i)){const e=p.Square.direction(t,n);if(e===P)return!1;if(i===c.Piece.Rook&&l.Direction.isDiagonal(e))return!1;if(i===c.Piece.Bishop&&!l.Direction.isDiagonal(e))return!1;const a=l.Direction.delta(e);let s=t+a;for(;s!==n;){if(this.brd[s]!==m)return!1;s+=a}}else if(i===c.Piece.Knight){if(!p.Square.isKnightHop(t,n))return!1}else{if(p.Square.adjacent(n,this.getKingSquare(s)))return!1;if(!p.Square.adjacent(t,n)){if(this.isKingInCheck())return!1;const e=[];this.genCastling(e);for(let i=0;i<e.length;i++)if(e[i].from===t&&e[i].to===n)return!1;return!1}}const o=i===c.Piece.King?n:this.getKingSquare(this.wm);this.doSimpleMove(e);const u=this.calcAttacks(s,o);return this.undoSimpleMove(e),0===u}addToBoard(e,t){this.brd[t]=e,this.numOnRank[e][p.Square.rank(t)]++,this.numOnFyle[e][p.Square.fyle(t)]++,this.numOnLeftDiag[e][p.Square.leftDiag(t)]++,this.numOnRightDiag[e][p.Square.rightDiag(t)]++,this.numOnSquareColor[e][p.Square.color(t)]++}removeFromBoard(e,t){this.brd[t]=m,this.numOnRank[e][p.Square.rank(t)]--,this.numOnFyle[e][p.Square.fyle(t)]--,this.numOnLeftDiag[e][p.Square.leftDiag(t)]--,this.numOnRightDiag[e][p.Square.rightDiag(t)]--,this.numOnSquareColor[e][p.Square.color(t)]--}fyleCount(e,t){return this.numOnFyle[e][t]}rankCount(e,t){return this.numOnRank[e][t]}leftDiagCount(e,t){return this.numOnLeftDiag[e][t]}rightDiagCount(e,t){return this.numOnRightDiag[e][t]}squareColorCount(e,t){return this.numOnSquareColor[e][t]}getKingSquare(e=this.wm){return this.list[e][0]}getEnemyKingSquare(e=this.wm){return this.list[1-e][0]}calcNumChecks(e,t){return e=e||this.getKingSquare(),this.calcAttacks(r.Color.flip(this.wm),e,t)}isKingInCheck(){return this.calcNumChecks(this.getKingSquare())>0}calcAttacks(e,t,n){const i=void 0!==n?n:[];let a,s,o,u,d,P,N,w,S,E,_,K=[];e===r.Color.White?(a=c.Piece.WQueen,s=c.Piece.WRook,o=c.Piece.WBishop,u=c.Piece.WKnight):(a=c.Piece.BQueen,s=c.Piece.BRook,o=c.Piece.BBishop,u=c.Piece.BKnight);const B=this.material[a]+this.material[s],M=this.material[a]+this.material[o];if(B>0){const e=p.Square.fyle(t),n=p.Square.rank(t);for(K=[],this.fyleCount(a,e)+this.fyleCount(s,e)>0&&(K.push(f),K.push(g)),this.rankCount(a,n)+this.rankCount(s,n)>0&&(K.push(b),K.push(v)),_=0;_<K.length;_++)for(N=K[_],d=l.Direction.delta(N),P=t,w=p.Square.last(t,N);P!==w;)if(P+=d,S=this.brd[P],S!==m){if(S===a||S===s){i.push(P);break}break}}if(M>0){const e=p.Square.leftDiag(t),n=p.Square.rightDiag(t);for(K=[],this.leftDiagCount(a,e)+this.leftDiagCount(o,e)>0&&(K.push(y),K.push(k)),this.rightDiagCount(a,n)+this.rightDiagCount(o,n)>0&&(K.push(R),K.push(C)),_=0;_<K.length;_++)for(N=K[_],d=l.Direction.delta(N),P=t,w=p.Square.last(t,N);P!==w;)if(P+=d,S=this.brd[P],S!==m){if(S===a||S===o){i.push(P);break}break}}if(this.material[u]>0&&this.squareColorCount(u,r.Color.flip(p.Square.color(t)))>0){const e=p.Square.knightAttacks(t);for(_=0;_<20;){const t=e[_++];if(t===h)break;this.brd[t]===u&&i.push(t)}}return e===r.Color.White?0!==p.Square.rank(t)&&(E=p.Square.move(t,C),p.Square.isSquare(E)&&this.brd[E]===c.Piece.WPawn&&i.push(E),E=p.Square.move(t,k),p.Square.isSquare(E)&&this.brd[E]===c.Piece.WPawn&&i.push(E)):7!==p.Square.rank(t)&&(E=p.Square.move(t,y),p.Square.isSquare(E)&&this.brd[E]===c.Piece.BPawn&&i.push(E),E=p.Square.move(t,R),p.Square.isSquare(E)&&this.brd[E]===c.Piece.BPawn&&i.push(E)),i.length}calcPins(){for(let e=0;e<16;e++)this.pinned[e]=P;const e=this.getKingSquare(this.wm),t=r.Color.flip(this.wm),n=c.Piece.create(t,c.Piece.Queen),i=c.Piece.create(t,c.Piece.Rook),a=c.Piece.create(t,c.Piece.Bishop),s=p.Square.fyle(e);this.fyleCount(n,s)+this.fyleCount(i,s)>0&&(this.calcPinsDir(f,c.Piece.Rook),this.calcPinsDir(g,c.Piece.Rook));const o=p.Square.rank(e);this.rankCount(n,o)+this.rankCount(i,o)>0&&(this.calcPinsDir(b,c.Piece.Rook),this.calcPinsDir(v,c.Piece.Rook));const l=p.Square.leftDiag(e);this.leftDiagCount(n,l)+this.leftDiagCount(a,l)>0&&(this.calcPinsDir(y,c.Piece.Bishop),this.calcPinsDir(k,c.Piece.Bishop));const u=p.Square.rightDiag(e);this.rightDiagCount(n,u)+this.rightDiagCount(a,u)>0&&(this.calcPinsDir(R,c.Piece.Bishop),this.calcPinsDir(C,c.Piece.Bishop))}calcPinsDir(e,t){const n=this.getKingSquare(this.wm);let i=h,a=n;const s=p.Square.last(n,e),r=l.Direction.delta(e);for(;a!==s;){a+=r;const n=this.brd[a];if(n!==m){if(c.Piece.color(n)!==this.wm){if(i!==h){const a=c.Piece.type(n);a!==c.Piece.Queen&&a!==t||(this.pinned[this.listPos[i]]=e)}return}if(i!==h)return;i=a}}}addLegalMove(e,t,n,i){const a=new u.SimpleMove;a.from=t,a.to=n,a.promote=i,a.movingPiece=this.brd[t],a.capturedPiece=this.brd[n],e.push(a)}genSliderMoves(e,t,n,i,a,s){a=!!a;let r=n;const o=p.Square.last(n,i),u=l.Direction.delta(i);for(;r!==o;){r+=u;const i=this.brd[r];if(i!==m){c.Piece.color(i)!==t&&N(r,s)&&this.addLegalMove(e,n,r,m);break}a||N(r,s)&&this.addLegalMove(e,n,r,m)}}genKnightMoves(e,t,n,i,a){a=!!a;const s=p.Square.knightAttacks(n);let r=0;for(;;){const o=s[r++];if(o===h)break;const l=this.brd[o];a&&l===m||(l!==m&&c.Piece.color(l)===t||N(o,i)&&this.addLegalMove(e,n,o,m))}}genCastling(e){const t=this.getKingSquare(this.wm);if(t!==(this.wm===r.Color.White?4:60))return;const n=this.getEnemyKingSquare();let i,a,s,l;this.strictCastling&&!this.castling.has(this.wm,o.CastlingSide.Queen)||(this.wm===r.Color.White?(i=2,a=3,s=0,l=c.Piece.WRook):(i=58,a=59,s=56,l=c.Piece.BRook),this.brd[i]!==m||this.brd[a]!==m||this.brd[s]!==l||this.brd[i-1]!==m||0!==this.calcNumChecks(i)||0!==this.calcNumChecks(a)||p.Square.adjacent(i,n)||this.addLegalMove(e,t,i,m)),this.strictCastling&&!this.castling.has(this.wm,o.CastlingSide.King)||(this.wm===r.Color.White?(i=6,a=5,s=7,l=c.Piece.WRook):(i=62,a=61,s=63,l=c.Piece.BRook),this.brd[i]!==m||this.brd[a]!==m||this.brd[s]!==l||0!==this.calcNumChecks(i)||0!==this.calcNumChecks(a)||p.Square.adjacent(i,n)||this.addLegalMove(e,t,i,m))}genKingMoves(e,t,n){const i=this.getKingSquare(),a=this.getEnemyKingSquare(),s=r.Color.flip(this.wm),o=c.Piece.create(this.wm,c.Piece.King),l=0!=(t&S.NonCaptures),u=p.Square.kingAttacks(i);let d,P=0;for(;(d=u[P++])!==h;){let t=!1;const n=this.brd[d];(l&&!c.Piece.isPiece(n)||c.Piece.isPiece(n)&&c.Piece.color(n)===s)&&(this.brd[d]=o,this.brd[i]=m,p.Square.adjacent(d,a)||0===this.calcNumChecks(d)&&(t=!0),this.brd[i]=o,this.brd[d]=n),t&&this.addLegalMove(e,i,d,m)}l&&n&&this.genCastling(e)}addPromotions(e,t,n){this.addLegalMove(e,t,n,c.Piece.Queen),this.addLegalMove(e,t,n,c.Piece.Rook),this.addLegalMove(e,t,n,c.Piece.Bishop),this.addLegalMove(e,t,n,c.Piece.Knight)}isValidEnPassant(e,t){const n=c.Piece.create(this.wm,c.Piece.Pawn),i=c.Piece.create(r.Color.flip(this.wm),c.Piece.Pawn),a=this.wm===r.Color.White?t-8:t+8,s=this.brd[t];if(this.brd[e]!==n||this.brd[a]!==i)return!1;this.brd[e]=m,this.brd[t]=n,this.brd[a]=m;const o=!this.isKingInCheck();return this.brd[e]=n,this.brd[t]=s,this.brd[a]=i,o}isPossibleCapture(e,t){const n=this.brd[e];return c.Piece.isPiece(n)&&c.Piece.color(n)===r.Color.flip(this.wm)||e===this.EpTarget&&this.isValidEnPassant(t,e)}genPawnMoves(e,t,n,i=S.All,a){const s=0!=(i&S.NonCaptures),o=l.Direction.opposite(n);let c,u,d,h;this.wm===r.Color.White?(c=l.Direction.Up,u=7,d=1):(c=g,u=0,d=6),!s||n!==P&&n!==c&&o!==c||(h=p.Square.move(t,c),p.Square.isSquare(h)&&this.brd[h]===m&&N(h,a)&&(p.Square.rank(h)===u?this.addPromotions(e,t,h):this.addLegalMove(e,t,h,m)),p.Square.rank(t)===d&&p.Square.isSquare(h)&&this.brd[h]===m&&(h=p.Square.move(h,c),p.Square.isSquare(h)&&this.brd[h]===m&&N(h,a)&&this.addLegalMove(e,t,h,m)));let f=c|b;n!==P&&n!==f&&o!==f||(h=p.Square.move(t,f),p.Square.isSquare(h)&&this.isPossibleCapture(h,t)&&N(h,a)&&(p.Square.rank(h)===u?this.addPromotions(e,t,h):this.addLegalMove(e,t,h,m))),f=c|v,n!==P&&n!==f&&o!==f||(h=p.Square.move(t,f),p.Square.isSquare(h)&&this.isPossibleCapture(h,t)&&N(h,a)&&(p.Square.rank(h)===u?this.addPromotions(e,t,h):this.addLegalMove(e,t,h,m)))}genCheckEvasions(e,t,n=S.All,i=[]){const a=i.length,s=!(0!=(n&S.NonCaptures)),o=this.getKingSquare(this.wm);if(1===a){const a=i[0],l=p.Square.direction(o,a),u=[];if(u.push(a),l!==P){let e=p.Square.move(o,l);for(;p.Square.isSquare(e)&&e!==a;)this.brd[e]===m&&u.push(e),e=p.Square.move(e,l)}const d=this.pieceCount[this.wm];for(let i=1;i<d;i++){const o=this.list[this.wm][i],l=this.brd[o],d=c.Piece.isPiece(l)?c.Piece.type(l):m;if(this.pinned[i]===P&&(t===m||t===d))if(d===c.Piece.Pawn){if(this.genPawnMoves(e,o,P,n,u),p.Square.isSquare(this.EpTarget)){if((this.wm===r.Color.White?this.EpTarget-8:this.EpTarget+8)===a){const t=[];t.push(this.EpTarget),this.genPawnMoves(e,o,P,n,t)}}}else this.genPieceMoves(e,o,s,u)}}t!==m&&t!==c.Piece.King||this.genKingMoves(e,n,!1)}genPieceMoves(e,t,n,i){const a=this.wm,s=this.brd[t];if(c.Piece.isPiece(s)){const r=c.Piece.type(s);if(r===c.Piece.Knight)return void this.genKnightMoves(e,a,t,i,n);r!==c.Piece.Bishop&&(this.genSliderMoves(e,a,t,f,n,i),this.genSliderMoves(e,a,t,g,n,i),this.genSliderMoves(e,a,t,b,n,i),this.genSliderMoves(e,a,t,v,n,i)),r!==c.Piece.Rook&&(this.genSliderMoves(e,a,t,y,n,i),this.genSliderMoves(e,a,t,C,n,i),this.genSliderMoves(e,a,t,R,n,i),this.genSliderMoves(e,a,t,k,n,i))}}matchLegalMove(e,t,n){const i=this.material[c.Piece.create(this.wm,t)];let a,s,r=0;const o=this.getKingSquare(this.wm);let u,d=this.brd[n];if(d===m||c.Piece.color(d)!==this.wm)for(let h=1;h<this.pieceCount[this.wm]&&r<i;h++){const i=this.list[this.wm][h];d=this.brd[i];const f=c.Piece.isPiece(d)?c.Piece.type(d):m;if(f===t){switch(u=!1,r++,f){case c.Piece.Knight:p.Square.isKnightHop(i,n)&&(u=!0);break;case c.Piece.Rook:if(a=p.Square.direction(i,n),a!==P&&!l.Direction.isDiagonal(a))for(s=p.Square.move(i,a),u=!0;p.Square.isSquare(s)&&s!==n;){if(this.brd[s]!==m){u=!1;break}s=p.Square.move(s,a)}break;case c.Piece.Bishop:if(a=p.Square.direction(i,n),l.Direction.isDiagonal(a))for(s=p.Square.move(i,a),u=!0;p.Square.isSquare(s)&&s!==n;){if(this.brd[s]!==m){u=!1;break}s=p.Square.move(s,a)}break;case c.Piece.Queen:if(a=p.Square.direction(i,n),a!==P)for(s=p.Square.move(i,a),u=!0;p.Square.isSquare(s)&&s!==n;){if(this.brd[s]!==m){u=!1;break}s=p.Square.move(s,a)}}if(u){const t=this.brd[n];this.brd[n]=d,this.brd[i]=m,this.calcNumChecks(o)>0&&(u=!1),this.brd[i]=d,this.brd[n]=t,u&&this.addLegalMove(e,i,n,m)}}}}matchKingMove(e,t){e=[];const n=this.getKingSquare(this.wm),i=t-n;if(i<-9||i>9)return!1;if(i>-7&&i<-2)return!1;if(i>2&&i<7)return!1;if(0===i)return!1;if(2===i)return n===(this.wm===r.Color.White?4:60)&&(!(this.strictCastling&&!this.castling.has(this.wm,o.CastlingSide.King))&&(!(this.brd[n+1]!==m||this.brd[n+2]!==m||this.calcNumChecks(n)>0||this.calcNumChecks(n+1)>0||this.calcNumChecks(n+2)>0)&&(this.addLegalMove(e,n,t,m),!0)));if(-2===i)return n===(this.wm===r.Color.White?4:60)&&(!(this.strictCastling&&!this.castling.has(this.wm,o.CastlingSide.Queen))&&(!(this.brd[n-1]!==m||this.brd[n-2]!==m||this.brd[n-3]!==m||this.calcNumChecks(n)>0||this.calcNumChecks(n-1)>0||this.calcNumChecks(n-2)>0)&&(this.addLegalMove(e,n,t,m),!0)));const a=this.brd[t];if(c.Piece.colorOrEmpty(a)===this.wm)return!1;this.brd[t]=c.Piece.create(this.wm,c.Piece.King),this.brd[n]=m,a!==m&&this.material[a]--;let s=0;return 0===this.calcNumChecks(t)&&(s=1),a!==m&&this.material[a]++,this.brd[t]=a,this.brd[n]=c.Piece.create(this.wm,c.Piece.King),1===s&&(this.addLegalMove(e,n,t,m),!0)}readCoord(e){let t=m;if(5===(e=e.toLowerCase()).length)t=c.Piece.typeFromChar(e.charAt(4).toLowerCase());else if(4!==e.length)return!1;const n=p.Square.fyleFromChar(e.charAt(0)),i=p.Square.rankFromChar(e.charAt(1));if(p.Square.isFyle(n)&&p.Square.isRank(i)){const a=p.Square.create(n,i),s=p.Square.fyleFromChar(e.charAt(2)),r=p.Square.rankFromChar(e.charAt(3));if(p.Square.isFyle(s)&&p.Square.isRank(r)){return{from:a,to:p.Square.create(s,r),promo:t}}}return!1}readCoordMove(e,t=!1){const n=this.readCoord(e);if(!1!==n){const{from:e,to:i,promo:a}=n,s=this.generateMoves();for(let n=0;n<s.length;n++){const r=s[n];if(r.promote===a){if(r.from===e&&r.to===i)return r;if(t&&r.to==e&&r.from==i)return r}}}return null}}t.Position=E,t.ChessPositionStd=new E(d.FenString.standartStart)},1113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleMove=void 0;const i=n(5146),a=n(7042),s=n(7040).Square.NullSquare,r=a.Piece.None;t.SimpleMove=class{constructor(){this.pieceNum=0,this.movingPiece=r,this.from=s,this.to=s,this.color=i.Color.None,this.capturedNum=0,this.capturedPiece=r,this.promote=r,this.capturedSquare=s,this.castleFlags=0,this.epSquare=s,this.oldHalfMoveClock=0,this.ply=0,this.time=0,this.permanent=!0}toString(){return this.san||""}}},7040:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Square=void 0;const i=n(5146),a=n(1686);!function(e){const t=void 0,n=["a","b","c","d","e","f","g","h"];const s=[[t,56,0,t,0,0,0,t,7,63,0],[t,57,1,t,0,8,1,t,7,55,1],[t,58,2,t,0,16,2,t,7,47,2],[t,59,3,t,0,24,3,t,7,39,3],[t,60,4,t,0,32,4,t,7,31,4],[t,61,5,t,0,40,5,t,7,23,5],[t,62,6,t,0,48,6,t,7,15,6],[t,63,7,t,0,56,7,t,7,7,7],[t,56,0,t,8,8,8,t,15,62,1],[t,57,1,t,8,16,0,t,15,63,2],[t,58,2,t,8,24,1,t,15,55,3],[t,59,3,t,8,32,2,t,15,47,4],[t,60,4,t,8,40,3,t,15,39,5],[t,61,5,t,8,48,4,t,15,31,6],[t,62,6,t,8,56,5,t,15,23,7],[t,63,7,t,8,57,6,t,15,15,15],[t,56,0,t,16,16,16,t,23,61,2],[t,57,1,t,16,24,8,t,23,62,3],[t,58,2,t,16,32,0,t,23,63,4],[t,59,3,t,16,40,1,t,23,55,5],[t,60,4,t,16,48,2,t,23,47,6],[t,61,5,t,16,56,3,t,23,39,7],[t,62,6,t,16,57,4,t,23,31,15],[t,63,7,t,16,58,5,t,23,23,23],[t,56,0,t,24,24,24,t,31,60,3],[t,57,1,t,24,32,16,t,31,61,4],[t,58,2,t,24,40,8,t,31,62,5],[t,59,3,t,24,48,0,t,31,63,6],[t,60,4,t,24,56,1,t,31,55,7],[t,61,5,t,24,57,2,t,31,47,15],[t,62,6,t,24,58,3,t,31,39,23],[t,63,7,t,24,59,4,t,31,31,31],[t,56,0,t,32,32,32,t,39,59,4],[t,57,1,t,32,40,24,t,39,60,5],[t,58,2,t,32,48,16,t,39,61,6],[t,59,3,t,32,56,8,t,39,62,7],[t,60,4,t,32,57,0,t,39,63,15],[t,61,5,t,32,58,1,t,39,55,23],[t,62,6,t,32,59,2,t,39,47,31],[t,63,7,t,32,60,3,t,39,39,39],[t,56,0,t,40,40,40,t,47,58,5],[t,57,1,t,40,48,32,t,47,59,6],[t,58,2,t,40,56,24,t,47,60,7],[t,59,3,t,40,57,16,t,47,61,15],[t,60,4,t,40,58,8,t,47,62,23],[t,61,5,t,40,59,0,t,47,63,31],[t,62,6,t,40,60,1,t,47,55,39],[t,63,7,t,40,61,2,t,47,47,47],[t,56,0,t,48,48,48,t,55,57,6],[t,57,1,t,48,56,40,t,55,58,7],[t,58,2,t,48,57,32,t,55,59,15],[t,59,3,t,48,58,24,t,55,60,23],[t,60,4,t,48,59,16,t,55,61,31],[t,61,5,t,48,60,8,t,55,62,39],[t,62,6,t,48,61,0,t,55,63,47],[t,63,7,t,48,62,1,t,55,55,55],[t,56,0,t,56,56,56,t,63,56,7],[t,57,1,t,56,57,48,t,63,57,15],[t,58,2,t,56,58,40,t,63,58,23],[t,59,3,t,56,59,32,t,63,59,31],[t,60,4,t,56,60,24,t,63,60,39],[t,61,5,t,56,61,16,t,63,61,47],[t,62,6,t,56,62,8,t,63,62,55],[t,63,7,t,56,63,0,t,63,63,63],[t,t,t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t,t,t]],r=[[10,17,t,t,t,t,t,t,t],[11,16,18,t,t,t,t,t,t],[8,12,17,19,t,t,t,t,t],[9,13,18,20,t,t,t,t,t],[10,14,19,21,t,t,t,t,t],[11,15,20,22,t,t,t,t,t],[12,21,23,t,t,t,t,t,t],[13,22,t,t,t,t,t,t,t],[2,18,25,t,t,t,t,t,t],[3,19,24,26,t,t,t,t,t],[0,4,16,20,25,27,t,t,t],[1,5,17,21,26,28,t,t,t],[2,6,18,22,27,29,t,t,t],[3,7,19,23,28,30,t,t,t],[4,20,29,31,t,t,t,t,t],[5,21,30,t,t,t,t,t,t],[1,10,26,33,t,t,t,t,t],[0,2,11,27,32,34,t,t,t],[1,3,8,12,24,28,33,35,t],[2,4,9,13,25,29,34,36,t],[3,5,10,14,26,30,35,37,t],[4,6,11,15,27,31,36,38,t],[5,7,12,28,37,39,t,t,t],[6,13,29,38,t,t,t,t,t],[9,18,34,41,t,t,t,t,t],[8,10,19,35,40,42,t,t,t],[9,11,16,20,32,36,41,43,t],[10,12,17,21,33,37,42,44,t],[11,13,18,22,34,38,43,45,t],[12,14,19,23,35,39,44,46,t],[13,15,20,36,45,47,t,t,t],[14,21,37,46,t,t,t,t,t],[17,26,42,49,t,t,t,t,t],[16,18,27,43,48,50,t,t,t],[17,19,24,28,40,44,49,51,t],[18,20,25,29,41,45,50,52,t],[19,21,26,30,42,46,51,53,t],[20,22,27,31,43,47,52,54,t],[21,23,28,44,53,55,t,t,t],[22,29,45,54,t,t,t,t,t],[25,34,50,57,t,t,t,t,t],[24,26,35,51,56,58,t,t,t],[25,27,32,36,48,52,57,59,t],[26,28,33,37,49,53,58,60,t],[27,29,34,38,50,54,59,61,t],[28,30,35,39,51,55,60,62,t],[29,31,36,52,61,63,t,t,t],[30,37,53,62,t,t,t,t,t],[33,42,58,t,t,t,t,t,t],[32,34,43,59,t,t,t,t,t],[33,35,40,44,56,60,t,t,t],[34,36,41,45,57,61,t,t,t],[35,37,42,46,58,62,t,t,t],[36,38,43,47,59,63,t,t,t],[37,39,44,60,t,t,t,t,t],[38,45,61,t,t,t,t,t,t],[41,50,t,t,t,t,t,t,t],[40,42,51,t,t,t,t,t,t],[41,43,48,52,t,t,t,t,t],[42,44,49,53,t,t,t,t,t],[43,45,50,54,t,t,t,t,t],[44,46,51,55,t,t,t,t,t],[45,47,52,t,t,t,t,t,t],[46,53,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t]],o=[[1,8,9,t,t,t,t,t,t],[0,2,8,9,10,t,t,t,t],[1,3,9,10,11,t,t,t,t],[2,4,10,11,12,t,t,t,t],[3,5,11,12,13,t,t,t,t],[4,6,12,13,14,t,t,t,t],[5,7,13,14,15,t,t,t,t],[6,14,15,t,t,t,t,t,t],[0,1,9,16,17,t,t,t,t],[0,1,2,8,10,16,17,18,t],[1,2,3,9,11,17,18,19,t],[2,3,4,10,12,18,19,20,t],[3,4,5,11,13,19,20,21,t],[4,5,6,12,14,20,21,22,t],[5,6,7,13,15,21,22,23,t],[6,7,14,22,23,t,t,t,t],[8,9,17,24,25,t,t,t,t],[8,9,10,16,18,24,25,26,t],[9,10,11,17,19,25,26,27,t],[10,11,12,18,20,26,27,28,t],[11,12,13,19,21,27,28,29,t],[12,13,14,20,22,28,29,30,t],[13,14,15,21,23,29,30,31,t],[14,15,22,30,31,t,t,t,t],[16,17,25,32,33,t,t,t,t],[16,17,18,24,26,32,33,34,t],[17,18,19,25,27,33,34,35,t],[18,19,20,26,28,34,35,36,t],[19,20,21,27,29,35,36,37,t],[20,21,22,28,30,36,37,38,t],[21,22,23,29,31,37,38,39,t],[22,23,30,38,39,t,t,t,t],[24,25,33,40,41,t,t,t,t],[24,25,26,32,34,40,41,42,t],[25,26,27,33,35,41,42,43,t],[26,27,28,34,36,42,43,44,t],[27,28,29,35,37,43,44,45,t],[28,29,30,36,38,44,45,46,t],[29,30,31,37,39,45,46,47,t],[30,31,38,46,47,t,t,t,t],[32,33,41,48,49,t,t,t,t],[32,33,34,40,42,48,49,50,t],[33,34,35,41,43,49,50,51,t],[34,35,36,42,44,50,51,52,t],[35,36,37,43,45,51,52,53,t],[36,37,38,44,46,52,53,54,t],[37,38,39,45,47,53,54,55,t],[38,39,46,54,55,t,t,t,t],[40,41,49,56,57,t,t,t,t],[40,41,42,48,50,56,57,58,t],[41,42,43,49,51,57,58,59,t],[42,43,44,50,52,58,59,60,t],[43,44,45,51,53,59,60,61,t],[44,45,46,52,54,60,61,62,t],[45,46,47,53,55,61,62,63,t],[46,47,54,62,63,t,t,t,t],[48,49,57,t,t,t,t,t,t],[48,49,50,56,58,t,t,t,t],[49,50,51,57,59,t,t,t,t],[50,51,52,58,60,t,t,t,t],[51,52,53,59,61,t,t,t,t],[52,53,54,60,62,t,t,t,t],[53,54,55,61,63,t,t,t,t],[54,55,62,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t],[t,t,t,t,t,t,t,t,t]],l=[0,1,2,3,4,5,6,7,1,0,1,2,3,4,5,6,2,1,0,1,2,3,4,5,3,2,1,0,1,2,3,4,4,3,2,1,0,1,2,3,5,4,3,2,1,0,1,2,6,5,4,3,2,1,0,1,7,6,5,4,3,2,1,0];function c(e){return void 0!==e&&e>=0&&e<=7}function p(e){return void 0!==e&&e>=0&&e<=7}function u(e){return 7&e}function d(e){return e>>3&7}function h(e,t){return t<<3|e}function m(e){return e<"1"||e>"8"?t:e.charCodeAt(0)-"1".charCodeAt(0)}function P(e){return e<"a"||e>"h"?t:e.charCodeAt(0)-"a".charCodeAt(0)}function f(e){return d(e)+u(e)}function g(e){return 1-(1&f(e))}e.NullSquare=t,e.isFyle=c,e.isRank=p,e.isSquare=function(e){return void 0!==e&&e>=0&&e<=63},e.notEmpty=function(e){return e},e.fyle=u,e.rank=d,e.create=h,e.rankFromChar=m,e.fyleFromChar=P,e.leftDiag=f,e.rightDiag=function(e){return 7+d(e)-u(e)},e.color=g,e.colorChar=function(e){return g(e)===i.Color.Black?i.Color.BlackChar:i.Color.WhiteChar},e.rankChar=function(e){return(d(e)+1).toString()},e.fyleChar=function(e){return n[u(e)]},e.parse=function(e){if(e&&2===e.length){const t=P(e[0]),n=m(e[1]);if(c(t)&&p(n))return h(t,n)}return t},e.name=function(e){return n[(t=e)%8]+Math.ceil((t+1)/8).toString();var t},e.adjacent=function(e,t){const n=d(e)-d(t);if(n<-1||n>1)return!1;const i=u(e)-u(t);return!(i<-1||i>1)},e.direction=function(e,t){return a.Direction.squareDirection(e,t)},e.move=function(e,t){return a.Direction.squareMove(e,t)},e.last=function(e,t){return((e,t)=>s[e][t])(e,t)},e.isKnightHop=function(e,t){return l[d(e)<<3|d(t)]*l[u(e)<<3|u(t)]==2},e.knightAttack=function(e,t){return r[e][t]},e.knightAttacks=function(e){return r[e]},e.kingAttack=function(e,t){return o[e][t]},e.kingAttacks=function(e){return o[e]}}(t.Square||(t.Square={}))},8641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSettings=void 0;const i=n(6105);t.defaultSettings={is3d:!1,size:i.BoardSize.Largest,piece:"alpha",square:"cedar",orientation:"white",coordinates:!0}},6473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProps=void 0;const i=n(6105);t.defaultProps={locale:"ru-ru",board:{is3d:!1,orientation:"white",size:i.BoardSize.Largest,piece:"alpha",square:"cedar"},game:{orientation:"white"}}},5645:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAdvanceClock=t.isCorrespondenceClock=t.isBlitzClock=void 0,t.isBlitzClock=function(e){return!!e&&"initial"in e},t.isCorrespondenceClock=function(e){return!!e&&"daysPerTurn"in e},t.isAdvanceClock=function(e){return!!e&&"totalTime"in e}},3518:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LoggerClass=void 0;const n=window,i=Array.prototype.slice,a=n.console;let s=null,r=false,o=9;const l=["error","warn","info","debug","log"],c="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" ");let p=[];function u(e){return o>0?o>e:l.length+o<=e}function d(e){!s||!r&&a&&a.log||s.apply(n,e)}class h{constructor(){this.error=(e,...t)=>{},this.warn=(e,...t)=>{},this.info=(e,...t)=>{},this.debug=(e,...t)=>{},this.log=(e,...t)=>{};let e=c.length;for(;--e>=0;)this.callPassThroughMethod(c[e]);for(e=l.length;--e>=0;)this.setLevelFunctions(e,l[e])}callPassThroughMethod(e){this[e]=function(){0!==o&&a&&a[e]&&a[e].apply(a,arguments)}}setLevelFunctions(e,t){this[t]=function(){const s=i.call(arguments),r=[t].concat(s);if(p.push(r),d(r),!a||!u(e))return;const o=1===s.length?s[0]:s;a.firebug?a[t].apply(n,o):a[t]?a[t](o):a.log(o)}}setCallback(){var e=i.call(arguments),t=p.length,n=t;for(s=e.shift()||null,r="boolean"==typeof e[0]&&e.shift(),n-="number"==typeof e[0]?e.shift():t;n<t;)d(p[n++])}setLevel(e){o=e}}t.LoggerClass=h,t.Logger=new h,t.Logger.setLevel(1)},2038:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTimer=void 0;const i=n(655).__importDefault(n(2475)),a=n(2742),s=n(9e3);t.formatTimer=(e,t=!0,n)=>{if(isNaN(e))return a._("timer","empty");const r=t?"timer":"datetime",o=s.timestampToInterval(e),l=[];if(o.invert||0===o.d&&0===o.h&&0===o.i&&0===o.s&&0===o.f)l.push(null!=n?n:a._("timer","isend"));else if(o.d>0)l.push(a._(r,"days",{d:o.d})),o.h>0&&l.push(a._(r,"hours",{h:o.h}));else{const e=0===o.h&&0===o.i&&o.s<10&&o.f>0?"."+i.default(o.f.toString(),3,"0"):"";o.h>0?l.push(i.default(o.h.toString(),2,"0")+":"+i.default(o.i.toString(),2,"0")+":"+i.default(o.s.toString(),2,"0")+e):o.i>0?l.push(i.default(o.i.toString(),2,"0")+":"+i.default(o.s.toString(),2,"0")+e):e.length>0?l.push(i.default(o.s.toString(),2,"0")+e):l.push(i.default(o.i.toString(),2,"0")+":"+i.default(o.s.toString(),2,"0")+e)}return l.join(" ")}},9e3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestampToInterval=void 0;t.timestampToInterval=e=>{const t=e<0;e=Math.abs(e);let n=Math.floor(e/1e3);const i=e-1e3*n,a=Math.floor(n/86400);n-=86400*a;const s=Math.floor(n/3600);n-=3600*s;const r=Math.floor(n/60);n-=60*r;return{y:0,m:0,d:a,h:s,i:r,s:n,f:i,invert:t,days:!1}}},7690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.justify=void 0;const i=n(655),a=i.__importDefault(n(1726)),s=i.__importDefault(n(2475));t.justify=(e,t,n,i,r)=>{var o=i-e.length;return o>0&&(e=n||!r?n?s.default(e,i):a.default(e,i):e.slice(0,t.length)+s.default("",o,"0")+e.slice(t.length)),e}},9895:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sprintf=void 0;const i=n(655),a=i.__importDefault(n(1987)),s=i.__importDefault(n(2475)),r=i.__importDefault(n(1726)),o=n(7690),l=(e,t,n,i,a,r,l)=>{const c=e>>>0,p=n&&c&&{2:"0b",8:"0",10:"",16:"0x"}[t]||"",u=p+s.default(c.toString(t),r||0,"0");return o.justify(u,p,i,a,!!l)},c=(e,t,n,i,a)=>(i&&(e=e.slice(0,i)),o.justify(e,"",t,n,!!a));t.sprintf=(e,...t)=>{let n=0;return e.replace(/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,(function(e,i,s,p,u,d,h){if("%%"==e)return"%";for(var m=!1,P="",f=!1,g=!1,b=0;s&&b<s.length;b++)switch(s.charAt(b)){case" ":P=" ";break;case"+":P="+";break;case"-":m=!0;break;case"0":f=!0;break;case"#":g=!0}if(p?"string"==typeof p?"*"===p?p=+t[n++]:"*"==p.charAt(0)&&(p=+t[a.default(p.slice(1,-1))]):p=+p:p=0,p<0&&(p=-p,m=!0),p=a.default(p),!isFinite(p))throw new Error("sprintf: (minimum-)width must be finite");d?"string"==typeof d?("*"==d?d=+t[n++]:"*"==d.charAt(0)&&(d=+t[a.default(d.slice(1,-1))]),d=a.default(d)):d=a.default(+d):d="fFeE".indexOf(h)>-1?6:"d"==h?0:void 0;var v=i?t[a.default(i.toString().slice(0,-1))-1]:t[n++];switch(h){case"s":return c(String(v),m,p,d,f);case"c":return c(String.fromCharCode(+v),m,p,d,f);case"b":return l(v,2,g,m,p,d,f);case"o":return l(v,8,g,m,p,d,f);case"x":return l(v,16,g,m,p,d,f);case"X":return l(v,16,g,m,p,d,f).toUpperCase();case"u":return l(v,10,g,m,p,d,f);case"i":case"d":var y=a.default(+v),R=y<0?"-":P;return v=R+r.default(String(Math.abs(y)),d,"0"),o.justify(v,R,m,p,f);case"e":case"E":case"f":case"F":case"g":case"G":{const e=+v,t=e<0?"-":P,n=["toExponential","toFixed","toPrecision"]["efg".indexOf(h.toLowerCase())],i=["toString","toUpperCase"]["eEfFgG".indexOf(h)%2];v=t+Math.abs(e)[n](d);return o.justify(v,t,m,p,f)[i]()}default:return e}}))}},2853:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intlReducer=void 0;const i=n(2742);t.intlReducer=(e={locale:"en-us"},t)=>{switch(t.type){case"SET_LOCALE":return{locale:i.i18n.setLocale(t.locale)};default:return e}}},2742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.i18n=t._=void 0;const i=n(655),a=n(9840),s=i.__importDefault(n(2473)),r=i.__importStar(n(4679)),o=i.__importStar(n(4652)),l=i.__importStar(n(8364)),c="en-us";let p=!1;const u=new class{constructor(){this.currentLocale=c,this.strings={},this.setLocale=e=>{if(e){2===e.length&&(e=e+"-"+e);const t=new a.IntlMessageFormat("",e).resolvedOptions().locale;this.currentLocale=t?t.toLowerCase():c}return this.currentLocale},this.safeT=(e,t,n)=>{let i=n;return this.strings[t]&&this.strings[t][e]&&this.strings[t][e][n]&&(i=this.strings[t][e][n]),i},this.t=(e,t,n)=>{let i=this.safeT(e,this.currentLocale,t);i===t&&(i=this.safeT(e,c,t)),s.default(i!==t,`Empty string for category ${e} and key ${t}.`);const r=new a.IntlMessageFormat(i,this.currentLocale).format(n);return r?"string"==typeof r?r:r.join(" "):i},this.registerStrings=(e,t,n)=>{void 0===this.strings[e]&&(this.strings[e]={}),void 0===this.strings[e][t]&&(this.strings[e][t]={});for(const i in n)this.strings[e][t][i]=n[i]},this.registerCategories=(e,t)=>{for(const n in t)this.registerStrings(e,n,t[n])},this.register=e=>{p||(this.registerCategories("en-us",r),this.registerCategories("es-es",o),this.registerCategories("ru-ru",l),p=!0),void 0!==e&&this.registerCategories(this.currentLocale,e)},void 0!==window&&window.navigator&&this.setLocale(window.navigator.language),this.register()}};t._=u.t,function(e){e.setLocale=u.setLocale,e.register=u.register,e.registerCategories=u.registerCategories}(t.i18n||(t.i18n={}))},2112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.copy=void 0;const i=n(5672);t.copy=function(e,t){if(!e)return!1;let n,a,s,r,o=!1;t||(t={});const l=i.Selection.toggle();try{if(a=document.createRange(),s=document.getSelection(),null===s)throw new Error("copy command was unsuccessful");if(r=document.createElement("span"),r.textContent=e,r.setAttribute("style",["all: unset","position: fixed","top: 0","clip: rect(0, 0, 0, 0)","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),document.body.appendChild(r),a.selectNode(r),s.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");o=!0}catch(i){try{const t=window.clipboardData;t&&(t.setData("text",e),o=!0)}catch(i){n=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(n,e)}}finally{s&&("function"==typeof s.removeRange?a&&s.removeRange(a):s.removeAllRanges()),r&&document.body.removeChild(r),l()}return o}},5672:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;t.Selection=class{static toggle(){const e=document.activeElement,t=document.getSelection();if(!e||!t||!t.rangeCount)return function(){};const n=[];for(var i=0;i<t.rangeCount;i++)n.push(t.getRangeAt(i));let a;switch(e.tagName.toUpperCase()){case"INPUT":a=e.focus,e.blur();case"TEXTAREA":a=e.focus,e.blur()}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),a&&a()}}}},8949:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyseGraphAsync=void 0;const i=n(655),a=i.__importStar(n(7294));class s extends a.default.Component{render(){const e=a.default.lazy((()=>Promise.resolve().then((()=>i.__importStar(n(5411))))));return a.default.createElement(a.Suspense,{fallback:a.default.createElement("div",{className:"progress-circle-indeterminate text-hide"},"Loading...")},a.default.createElement(e,Object.assign({},this.props)))}}t.AnalyseGraphAsync=s},5411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(655).__importStar(n(7294)),a=n(4179),s=n(3927),r=n(1811),o=n(2742),l=n(3518),c=n(5275),p=n(5146),u=n(9895);class d extends i.Component{constructor(e){var t;super(e),this.timer=null,this.storeUnsubscribe=null,this.updateAnalysis=()=>{var e;const{store:t,state:n}=this,{game:i}=t.getState(),{status:a}=n;this.setState({status:null!==(e=null==i?void 0:i.engine.Analysis.state)&&void 0!==e?e:a})},this.requestAnalysis=()=>{const e=this,{store:t,state:n,id:i}=e;i&&fetch("https://www.chess-online.com/fishnet/create/"+i.toString(),{mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(){e.setState({status:"inprogress"})})).catch((function(e){l.Logger.error("Looks like there was a problem when request analysis: \n",e)}))},this.loadAnalysis=()=>{const e=this,{store:t,state:n,id:i}=e;i&&fetch("https://www.chess-online.com/api/analyse/game/"+i.toString()+"?v=2",{mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(i){var a,s,r,o;if(i){const l=i;if("ready"==(null===(a=l.analysis)||void 0===a?void 0:a.state))t.dispatch({type:c.GameActions.GAME_LOAD_PARTIAL,game:i});else{const{status:t}=n;e.setState({status:null!==(r=null===(s=l.analysis)||void 0===s?void 0:s.state)&&void 0!==r?r:t,completed:null===(o=l.analysis)||void 0===o?void 0:o.completed})}}})).catch((function(e){l.Logger.error("Looks like there was a problem when load analysis: \n",e)}))},this.anTooltipValFmt=(...e)=>{let t=e[2];return i.createElement("span",null,i.createElement("strong",null,t.payload.desc),i.createElement("br",null),i.createElement("span",null,t.payload.name))},this.anTooltipLblFmt=(...e)=>"",this.moveToPly=e=>{void 0!==e&&this.store.dispatch({type:c.GameActions.NAVIGATE_TO_PLY,ply:e})},this.handleClick=e=>{const t=e.activePayload;if(t&&t[0]){const e=t[0];e&&e.payload&&this.moveToPly(e.payload.ply)}},this.renderRequestBtn=()=>{const{requestAnalysis:e}=this;return i.createElement("span",{className:"analysis-request"},i.createElement(a.SafeAnchor,{className:"btn btn-info",tabIndex:-1,href:"#",onClick:e},o._("analyse","request")))},this.getCurrentPly=()=>{var e;const{game:t}=this.store.getState();return null!==(e=null==t?void 0:t.engine.CurrentPlyCount)&&void 0!==e?e:0},this.renderTotalItem=(e,t,n)=>{const s=t=>()=>{this.moveToPly(null==n?void 0:n.findNextMistake(e,this.getCurrentPly(),t))};return i.createElement("ul",{className:"list-unstyled h-100 d-flex flex-column justify-content-center text-right"},i.createElement("li",null,i.createElement(a.SafeAnchor,{onClick:s("inaccuracy")},o._("analyse","inaccuracies"),":",i.createElement("label",null,t.inaccuracy))),i.createElement("li",null,i.createElement(a.SafeAnchor,{onClick:s("mistake")},o._("analyse","mistakes"),":",i.createElement("label",null,t.mistake))),i.createElement("li",null,i.createElement(a.SafeAnchor,{onClick:s("blunder")},o._("analyse","blunders"),":",i.createElement("label",null,t.blunder))),i.createElement("li",null,o._("analyse","averageCentipawnLoss"),":",i.createElement("label",{title:o._("analyse","averageCentipawnLossTitle")},t.acpl)))},o.i18n.register();const{store:n}=this.props;this.store=n;const{game:s}=n.getState();this.id=null==s?void 0:s.engine.GameId,this.state={status:null!==(t=null==s?void 0:s.engine.Analysis.state)&&void 0!==t?t:"empty",completed:0}}componentDidMount(){const{store:e}=this;this.storeUnsubscribe=e.subscribe((()=>{this.updateAnalysis()}));const{game:t}=e.getState();t&&"empty"===t.engine.Analysis.state&&this.loadAnalysis()}componentWillUnmount(){this.storeUnsubscribe&&this.storeUnsubscribe()}renderProgress(e){const t=o._("analyse","completed"),n=u.sprintf(t,null!=e?e:0);return i.createElement("span",{className:"analysis-inprogress"},o._("analyse","inprogress"),e?i.createElement("span",{className:"progress"},n):null)}render(){const e=this,{renderRequestBtn:t,renderProgress:n,handleClick:l,anTooltipValFmt:c,anTooltipLblFmt:u,renderTotalItem:d,props:h,state:m,store:P}=e,{height:f}=h,{game:g}=P.getState(),{engine:b}=g,{StartPlyCount:v,CurrentPlyCount:y,GameId:R,Analysis:C}=b,{white:k,black:N}=C,{status:w,completed:S}=m;if(R&&"empty"!=w){if("unanalysed"==w)return t();if("inprogress"==w)return e.timer||(e.timer=setTimeout((()=>{e.timer=null,e.loadAnalysis()}),5500)),n(S);if("ready"==w){const e=[];let t=b.CurrentMove.Begin;for(;!t.END_MARKER;){const n=t.PlyCount?r.Chess.plyToTurn(t.PlyCount):null,i=n?n+(t.sm.color===p.Color.White?". ":"... ")+t.sm.san:o._("chess","startPos");e.push(Object.assign(Object.assign({},t.sm.eval),{color:t.sm.color,ply:t.PlyCount,name:i})),t=t.Next}return i.createElement("div",{className:"analyse d-block d-lg-flex"},i.createElement("div",{className:"graph-container flex-grow-1"},i.createElement(s.ResponsiveContainer,{width:"100%",height:f},i.createElement(s.AreaChart,{data:e,margin:{top:20,right:20,left:0,bottom:0},onClick:l},i.createElement(s.XAxis,{dataKey:"ply",hide:!0}),i.createElement(s.YAxis,null),i.createElement(s.CartesianGrid,{strokeDasharray:"3 3"}),i.createElement(s.Tooltip,{contentStyle:{fontSize:".75rem"},formatter:c,labelFormatter:u}),i.createElement(s.Area,{type:"monotone",dataKey:"advantage",name:o._("analyse","advantage"),stroke:"#8884d8",fill:"#8884d8"}),y?i.createElement(s.ReferenceLine,{x:y,stroke:"green"}):null))),i.createElement("div",{className:"graph-totals align-self-stretch"},i.createElement(a.Container,{className:"h-100"},i.createElement(a.Row,{className:"h-100"},i.createElement(a.Col,{xs:6,lg:12,className:"white"},d(p.Color.White,k,b)),i.createElement(a.Col,{xs:6,lg:12,className:"black"},d(p.Color.Black,N,b))))))}}return i.createElement("span",{className:"analysis-loading"},o._("analyse","loading"))}}t.default=d},8560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Captures=void 0;const i=n(655),a=i.__importDefault(n(4184)),s=i.__importDefault(n(1987)),r=i.__importStar(n(7294)),o=n(5275),l=n(5146),c=n(7042);class p extends r.Component{constructor(e){super(e),this.moveToPly=e=>{const{store:t}=this.props;t.dispatch({type:o.GameActions.NAVIGATE_TO_PLY,ply:e})},this.pieceClick=e=>{this.moveToPly(s.default(e.currentTarget.dataset.ply))}}render(){const{props:e,pieceClick:t}=this,{store:n}=e,i=n.getState(),{engine:s}=i.game;if(s){let e=[],n=0,i=[],u=0;if(s){const d=s.CurrentPos.Captured;for(var o=0;o<d.length;o++){var p=d[o];if(p&&p!==c.Piece.None){const s=c.Piece.color(p),d=c.Piece.type(p),h=["x","king","queen","rook","bishop","knight","pawn"],m=[l.Color.toName(s),h[d],"cursor"],P=r.createElement("div",{key:o,"data-kind":"square",className:"no-square"},r.createElement("div",null,r.createElement("div",{"data-kind":"piece",className:a.default(m),onClick:t,"data-ply":o})));s===l.Color.White?(n+=c.Piece.Score[d],e.push(P)):(u+=c.Piece.Score[d],i.push(P))}}}return r.createElement("div",{className:a.default("size2 captures",this.props.piece)},r.createElement("div",{className:"captures-white d-flex flex-row flex-wrap"},e),r.createElement("div",{className:"captures-black d-flex flex-row flex-wrap"},i))}return null}}t.Captures=p},1326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChessMoves=void 0;const i=n(655).__importStar(n(7294)),a=n(241),s=n(7181),r=n(5210),o=n(5275);class l extends i.Component{constructor(e){super(e),this.onChangeKey=e=>{const{store:t}=this.props;t.dispatch({type:o.GameActions.NAVIGATE_TO_KEY,move:e})},this.onChangePos=e=>{const{store:t}=this.props;t.dispatch({type:o.GameActions.NAVIGATE_TO_MOVE,move:e})}}render(){const{store:e,mode:t,nav:n}=this.props,o=e.getState(),{engine:l}=o.game,c=l.CurrentMove;return t===a.MovesMode.Table?i.createElement(r.DumbMoveTable,{startPly:l.StartPlyCount,game:l,opeinig:l.Eco,currentMove:c,nav:n,onChangePos:this.onChangePos,onChangeKey:this.onChangeKey}):t===a.MovesMode.List?i.createElement(s.DumbMoveList,{startPly:l.StartPlyCount,game:l,opeinig:l.Eco,currentMove:c,nav:n,onChangePos:this.onChangePos,onChangeKey:this.onChangeKey}):null}}t.ChessMoves=l},241:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigatorMode=t.MovesMode=void 0,function(e){e[e.None=0]="None",e[e.Table=1]="Table",e[e.List=2]="List"}(t.MovesMode||(t.MovesMode={})),function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Bottom=2]="Bottom"}(t.NavigatorMode||(t.NavigatorMode={}))},7181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DumbMoveList=void 0;const i=n(655),a=i.__importStar(n(7294)),s=i.__importDefault(n(6370)),r=i.__importDefault(n(4184)),o=n(241),l=n(2934),c=n(5146);class p extends a.Component{constructor(e){super(e),this.scrollerRef=null,this.renderNav=e=>{const{nav:t,currentMove:n,onChangePos:i}=this.props;return t===e?a.createElement(l.MoveNavigator,{currentMove:n,onChange:i,key:n.moveKey}):null},this.onMoveClick=e=>{const t=e.currentTarget.getAttribute("data-key");if(t){const{onChangeKey:e}=this.props;e&&e(t)}},this.renderMoveNo=(e,t)=>{if(e===c.Color.White){var n=t+1>>1;return a.createElement("span",{className:"moveno","data-moveno":n,key:"mn"+n.toString()},n,".")}return a.createElement(a.Fragment,null)},this.renderMove=(e,t,n,i,s,o,l,p,u)=>{let d=[];s===c.Color.White&&d.push(this.renderMoveNo(s,n));const h={white:s===c.Color.White,black:s===c.Color.Black,active:e.moveKey===i},m=r.default("move",h,u);if(e.moveKey===i&&(this.activeMove=t),d.push(a.createElement("span",{id:t,className:m,"data-ply":n,"data-key":i,key:i,onClick:this.onMoveClick},o)),l&&l.length)for(let e=0;e<l.length;e++){const t=`ng_${e}_${i}`;d.push(a.createElement("span",{key:t,className:"nag"},l[e]))}if(p){const e=`cm_${i}`;d.push(a.createElement("span",{key:e,className:"comment"},p))}return d},this.renderMoves=()=>{var e;const{currentMove:t,game:n,opeinig:i}=this.props;let s=[],r=t.Begin.Next;if(t.isBegin()&&(this.activeMove=t.uid),i&&i.name?s.push(a.createElement("span",{id:t.Begin.uid,key:"opening",className:"text-muted opening"},i.code," ",i.name)):s.push(a.createElement("a",{id:t.Begin.uid})),r&&!r.isEnd()){(null===(e=r.sm)||void 0===e?void 0:e.color)===c.Color.Black&&(s=s.concat(this.renderMove(t,void 0,n.StartPlyCount,"mn0_"+n.StartPlyCount.toString(),c.Color.White,"...")));let i=1;do{const{sm:e,moveKey:n}=r;let a=[];e.glyphs&&(a=e.glyphs.map((e=>e.symbol)));const o=[];r.comments&&o.push(r.comments);const l={best:!1,blunder:!1,mistake:!1,inaccuracy:!1};if(e.eval){const t=e.eval;o.push(t.desc);if(!t.best)l.best=!0;else{if(e.judgments)for(let t=0;t<e.judgments.length;t++){const n=e.judgments[t];switch(n.name){case"Blunder":l.blunder=!0;break;case"Mistake":l.mistake=!0;break;case"Inaccuracy":l.inaccuracy=!0}o.push(n.comment)}if(t.variation){const e=t.ceilPawn>0?"+":"";o.push(" { "+t.variation+" "+e+t.ceilPawn+" }")}}}const c=o.length>0?o.join(" "):void 0;s=s.concat(this.renderMove(t,r.uid,e.ply,n,e.color,e.san,a,c,l)),r=r.Next,i++}while(r&&!r.isEnd())}return s.push(a.createElement("span",{key:"game-result",className:"game_result"},n.getResultName("long"))),s}}componentDidUpdate(e){this.props.currentMove.moveKey!==e.currentMove.moveKey&&this.ensureActiveItemVisible()}ensureActiveItemVisible(){const e=this.activeMove;if(e){const t=document.getElementById(e);this.scrollElementIntoViewIfNeeded(t,this.scrollerRef)}}scrollElementIntoViewIfNeeded(e,t){if(e&&t){const p=!0;var n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),a=parseInt(n.getPropertyValue("border-left-width")),s=e.offsetTop-t.offsetTop<t.scrollTop,r=e.offsetTop-t.offsetTop+e.clientHeight-i>t.scrollTop+t.clientHeight,o=e.offsetLeft-t.offsetLeft<t.scrollLeft,l=e.offsetLeft-t.offsetLeft+e.clientWidth-a>t.scrollLeft+t.clientWidth,c=s&&!r;(s||r)&&p&&(t.scrollTop=e.offsetTop-t.offsetTop-t.clientHeight/2-i+e.clientHeight/2),(o||l)&&p&&(t.scrollLeft=e.offsetLeft-t.offsetLeft-t.clientWidth/2-a+e.clientWidth/2),(s||r||o||l)&&!p&&e.scrollIntoView(c)}}render(){const{renderNav:e}=this;return a.createElement("div",{className:"movelist moves d-flex flex-column h-100"},e(o.NavigatorMode.Top),a.createElement("div",{className:"flex-grow-1"},a.createElement(s.default,{trackYProps:{style:{width:5}},scrollerProps:{elementRef:e=>this.scrollerRef=e}},a.createElement("div",{className:"movelist-wrap"},this.renderMoves()))),e(o.NavigatorMode.Bottom))}}t.DumbMoveList=p},5210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DumbMoveTable=void 0;const i=n(655).__importStar(n(7294));class a extends i.Component{constructor(e){super(e)}}t.DumbMoveTable=a},2934:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoveNavigator=void 0;const i=n(655).__importStar(n(7294));class a extends i.Component{constructor(e){super(e),this.setCurrentMove=e=>{const{onChange:t}=this.props;t&&t(e)},this.moveFirst=e=>{if(null===e.currentTarget.getAttribute("disabled")){const{currentMove:e}=this.props;e.isBegin()||this.setCurrentMove(e.Begin)}},this.movePrev=e=>{if(null===e.currentTarget.getAttribute("disabled")){const{currentMove:e}=this.props;e.isBegin()||this.setCurrentMove(e.Prev)}},this.moveNext=e=>{if(null===e.currentTarget.getAttribute("disabled")){const{currentMove:e}=this.props;e.isLast()||this.setCurrentMove(e.Next)}},this.moveLast=e=>{if(null===e.currentTarget.getAttribute("disabled")){const{currentMove:e}=this.props;e.isLast()||this.setCurrentMove(e.Last)}}}render(){const{currentMove:e}=this.props,{moveFirst:t,movePrev:n,moveNext:a,moveLast:s}=this,r="btn btn-default";return i.createElement("div",{className:"btn-toolbar",role:"toolbar"},i.createElement("div",{className:"btn-group move-nav my-2"},i.createElement("button",{className:r,disabled:e.isBegin(),onClick:t},i.createElement("i",{className:"xi-page-first xi-lg"})),i.createElement("button",{className:r,disabled:e.isBegin(),onClick:n},i.createElement("i",{className:"xi-page-prev xi-lg"})),i.createElement("button",{className:r,disabled:e.isLast(),onClick:a},i.createElement("i",{className:"xi-page-next xi-lg"})),i.createElement("button",{className:r,disabled:e.isLast(),onClick:s},i.createElement("i",{className:"xi-page-last xi-lg"}))))}}t.MoveNavigator=a},4815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MovesGraphAsync=void 0;const i=n(655),a=i.__importStar(n(7294));class s extends a.default.Component{render(){const e=a.default.lazy((()=>Promise.resolve().then((()=>i.__importStar(n(396))))));return a.default.createElement(a.Suspense,{fallback:a.default.createElement("div",{className:"progress-circle-indeterminate text-hide"},"Loading...")},a.default.createElement(e,Object.assign({},this.props)))}}t.MovesGraphAsync=s},396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(655),a=i.__importDefault(n(1987)),s=i.__importStar(n(7294)),r=n(4179),o=n(3927),l=n(1811),c=n(2742),p=n(2038),u=n(5275);class d extends s.Component{constructor(e){super(e),this.storeUnsubscribe=void 0,this.updateMovetimes=()=>{this.forceUpdate()},this.formatTooltipValue=(...e)=>s.createElement("span",null,p.formatTimer(Math.abs(e[0]),!0,"0")),this.formatTooltipLabel=e=>{const t=0===e?c._("chess","startPos"):"#"+e.toString();return s.createElement("strong",null,t)},this.formatYTick=e=>p.formatTimer(Math.abs(e),!0,"0"),this.handleClick=e=>{const t=e.activePayload;if(t&&t[0]){const e=t[0];e&&e.payload&&this.store.dispatch({type:u.GameActions.NAVIGATE_TO_PLY,ply:e.payload.ply})}},this.getTimes=e=>{var t,n;const i=[],{isLive:s}=this.props,r=s?10:1;s&&i.push(0);let o=e.CurrentMove.First;for(;!o.END_MARKER;)(null===(t=o.sm)||void 0===t?void 0:t.time)?i.push(a.default((null===(n=o.sm)||void 0===n?void 0:n.time)*r)):i.push(0),o=o.Next;return i.length%2!=0&&i.push(0),i},c.i18n.register(),this.store=e.store}componentDidMount(){const{store:e,updateMovetimes:t}=this;this.storeUnsubscribe=e.subscribe((()=>{t()}))}componentWillUnmount(){const{storeUnsubscribe:e}=this;e&&e()}render(){const{height:e}=this.props,{game:t}=this.store.getState(),{engine:n}=t,{StartPlyCount:i,CurrentPlyCount:a}=n,u=this.getTimes(n);let d=0,h=0;const m=[{turn:0,ply:0,white:0,black:0}];if(u.length>0)for(let e=0;e<u.length;e+=2){const t=u[e],n=u[e+1];let a=i+e;m.push({turn:l.Chess.plyToTurn(a),ply:a,white:t,black:-n}),d+=t,h+=n}return s.createElement("div",{className:"movetimes d-block d-lg-flex"},s.createElement("div",{className:"graph-container flex-grow-1"},s.createElement(o.ResponsiveContainer,{width:"100%",height:e},s.createElement(o.BarChart,{data:m,stackOffset:"sign",margin:{top:5,right:30,left:10,bottom:5},onClick:this.handleClick},s.createElement(o.XAxis,{dataKey:"turn",hide:!0}),s.createElement(o.YAxis,{tickFormatter:this.formatYTick}),s.createElement(o.CartesianGrid,{strokeDasharray:"3 3"}),s.createElement(o.Tooltip,{contentStyle:{fontSize:".75rem"},formatter:this.formatTooltipValue,labelFormatter:this.formatTooltipLabel}),s.createElement(o.ReferenceLine,{y:0,stroke:"#000"}),s.createElement(o.Bar,{dataKey:"white",name:c._("chess","white"),className:"white",stackId:"stack"}),s.createElement(o.Bar,{dataKey:"black",name:c._("chess","black"),className:"black",stackId:"stack"}),a?s.createElement(o.ReferenceLine,{x:l.Chess.plyToTurn(a),stroke:"green"}):null))),s.createElement("div",{className:"graph-totals align-self-stretch"},s.createElement(r.Container,{className:"h-100"},s.createElement(r.Row,{className:"h-100"},s.createElement(r.Col,{xs:6,lg:12,className:"white py-3"},s.createElement("span",{className:"h-100 d-flex justify-content-center align-items-center"},s.createElement("label",null,p.formatTimer(d)))),s.createElement(r.Col,{xs:6,lg:12,className:"black  py-3"},s.createElement("span",{className:"h-100 d-flex justify-content-center align-items-center"},s.createElement("label",null,p.formatTimer(h))))))))}}t.default=d},8855:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceSelector=void 0;const i=n(655),a=i.__importStar(n(7294)),s=n(4179),r=n(6276);class o extends a.Component{constructor(e){super(e),this.onChange=e=>{const{onChangePiece:t}=this.props,n=e.target.value;t&&t(n)},this.getPieces=()=>{const e=[];return r.pieceFaces.forEach((t=>{e.push(a.createElement("option",{key:t.code,value:t.code},t.name))})),e}}render(){const e=this.props,{defaultValue:t,onChangePiece:n,size:r}=e,o=i.__rest(e,["defaultValue","onChangePiece","size"]);return a.createElement(s.FormControl,Object.assign({as:"select",size:r,onChange:this.onChange,defaultValue:t},o),this.getPieces())}}t.PieceSelector=o,o.defaultProps={defaultValue:"merida",size:"sm"}},8141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeSelector=void 0;const i=n(655),a=i.__importStar(n(7294)),s=i.__importDefault(n(1987)),r=n(4179),o=n(6105),l=n(3141);class c extends a.Component{constructor(e){super(e),this.onChange=e=>{const{onChangeSize:t}=this.props,n=s.default(e.target.value);t&&t(n)},this.getSizes=()=>{const e=[];return l.boardSizes.forEach((t=>{e.push(a.createElement("option",{key:t.code,value:t.idx},t.name))})),e}}render(){const e=this.props,{defaultValue:t,onChangeSize:n,size:s}=e,o=i.__rest(e,["defaultValue","onChangeSize","size"]);return a.createElement(r.FormControl,Object.assign({as:"select",size:s,onChange:this.onChange,defaultValue:t.toString()},o),this.getSizes())}}t.SizeSelector=c,c.defaultProps={defaultValue:o.BoardSize.Normal,size:"sm"}},5589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SquareSelector=void 0;const i=n(655),a=i.__importStar(n(7294)),s=n(4179),r=n(3141);class o extends a.Component{constructor(e){super(e),this.onChange=e=>{const{onChangeSquare:t}=this.props,n=e.target.value;t&&t(n)},this.getSquares=()=>{const e=[];return r.boardFiles.forEach((t=>{e.push(a.createElement("option",{key:t.code,value:t.code},t.name))})),e}}render(){const e=this.props,{defaultValue:t,onChangeSquare:n,size:r}=e;i.__rest(e,["defaultValue","onChangeSquare","size"]);return a.createElement(s.FormControl,{as:"select",size:r,onChange:this.onChange,defaultValue:t},this.getSquares())}}t.SquareSelector=o,o.defaultProps={defaultValue:"color-blue",size:"sm"}},4748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextWithCopy=void 0;const i=n(655),a=i.__importStar(n(7294)),s=n(4179),r=n(2112),o=n(2742);class l extends a.Component{constructor(e){super(e),this.onCopy=()=>{r.copy(this.props.value)&&this.setSuccess()},this.setSuccess=()=>{const e=this;this.setState({className:"text-success"},(function(){setTimeout(e.setPrimary,2e3)}))},this.setPrimary=()=>{this.setState({className:""})},o.i18n.register(),this.state={className:""}}render(){let e=this.props,{id:t,size:n,placeholder:r,readOnly:l,icon:c}=e,p=i.__rest(e,["id","size","placeholder","readOnly","icon"]);return a.createElement(s.InputGroup,{size:n},a.createElement(s.FormControl,Object.assign({size:n,className:this.state.className},p,{readOnly:!0,placeholder:r})),a.createElement(s.InputGroup.Append,null,a.createElement(s.Button,{variant:"primary",tabIndex:-1,onClick:this.onCopy,title:o._("chess-ctrls","copy_to_clipboard")},a.createElement("i",{className:c}))))}}t.TextWithCopy=l,l.defaultProps={icon:"fa fa-copy"}},4630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameInfo=void 0;const i=n(655),a=i.__importStar(n(7294)),s=i.__importDefault(n(4184)),r=n(4179),o=n(9895),l=n(2742),c=n(5645),p=n(2353);class u extends a.default.Component{constructor(e){super(e),this.renderDates=e=>{var t,n;let i=null;const{game:s,correspondence:p}=e.RawData;if(e.Result>0&&s){const e=new Date(null!==(t=s.createdAt)&&void 0!==t?t:"now");if(c.isAdvanceClock(p)&&p.lastMoveAt){const t=new Date(p.lastMoveAt),n=l._("game","datesFmt"),s=t.getTime()-e.getTime();console.log(s);const r=s>864e5?o.sprintf(n,e.toLocaleDateString(),t.toLocaleDateString()):o.sprintf(n,e.toLocaleString(),t.toLocaleString());i=a.default.createElement("span",null,r)}else i=a.default.createElement("span",null,l._("game","completeState"))}return i||(i=a.default.createElement("span",null,l._("game","startDate"),": ",a.default.createElement("span",null,new Date(null!==(n=null==s?void 0:s.createdAt)&&void 0!==n?n:"now").toLocaleString()))),a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},i))},this.playerDisplay=e=>{if(e){const{display:t,name:n}=e.user;return a.default.createElement("span",{className:"username"},null!=t?t:n)}return null},this.winnerName=e=>e.Result==p.GameResult.Color.White?this.playerDisplay(e.White):e.Result==p.GameResult.Color.Black?this.playerDisplay(e.Black):null,this.looserName=e=>e.Result==p.GameResult.Color.White?this.playerDisplay(e.Black):e.Result==p.GameResult.Color.Black?this.playerDisplay(e.White):null,this.resultColor=e=>e.Result==p.GameResult.Color.White?a.default.createElement("h4",{className:"result-color white"},l._("game","whiteWin")," (1 – 0)"):e.Result==p.GameResult.Color.Black?a.default.createElement("h4",{className:"result-color black"},l._("game","blackWin")," (0 – 1)"):a.default.createElement("h4",{className:"result-color draw"},l._("game","drawWin")," (½ – ½)"),this.renderResult=e=>e.Result?a.default.createElement(a.default.Fragment,null,this.resultColor(e)):null,this.renderState=e=>{let t=null;const{game:n}=e.RawData;if(n){const{status:i}=n;t="created"==i.name?a.default.createElement("span",null,l._("game","resCreated")):"new"==i.name?a.default.createElement("span",null,l._("game","resNew")):"wait"==i.name?a.default.createElement("span",null,l._("game","resWait")):"aborted"==i.name?a.default.createElement("span",null,l._("game","resAborted")):"started"==i.name?a.default.createElement("span",null,l._("game","resStarted")):"paused"==i.name?a.default.createElement("span",null,l._("game","resPaused")):"mate"==i.name?a.default.createElement("span",null,this.winnerName(e)," ",l._("game","resCheckmate")):"resign"==i.name?a.default.createElement("span",null,this.looserName(e)," ",l._("game","resResign")):"outoftime"==i.name?a.default.createElement("span",null,this.winnerName(e)," ",l._("game","resOutOfTime")):"timeout"==i.name?a.default.createElement("span",null,this.looserName(e)," ",l._("game","resNotMoved")):"noStart"==i.name?a.default.createElement("span",null,l._("game","resNotStarted")):"cheat"==i.name?a.default.createElement("span",null,l._("game","resArbiter")):"draw"==i.name?5==i.subtype?a.default.createElement("span",null,l._("game","resRepeat")):6==i.subtype?a.default.createElement("span",null,l._("game","res50move")):7==i.subtype?a.default.createElement("span",null,l._("game","resDrawArbiter")):8==i.subtype?a.default.createElement("span",null,l._("game","resStalemate")):9==i.subtype?a.default.createElement("span",null,l._("game","resMaterial")):a.default.createElement("span",null,l._("game","resDraw")):"stalemate"==i.name?a.default.createElement("span",null,l._("game","resStalemate")):a.default.createElement("span",null,l._("game","resEnd"))}return t?a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},t)):null},this.renderTC=e=>{let t=null;const{correspondence:n,clock:i}=e.RawData;if(c.isAdvanceClock(n)){const e=n.can_pause?"canPostpone":"noPostpone",i=["label","ml-2",{"label-default":n.can_pause,"label-warning":!n.can_pause}];t=a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},a.default.createElement("span",null,a.default.createElement("span",null,l._("game","timeControl")),": ",a.default.createElement("span",{className:"label"},n.limit),a.default.createElement("span",{className:s.default(i)},l._("game",e)))))}return t?a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},t)):null},this.renderRZ=e=>{let t=null;const{game:n}=e.RawData;if(n){const e=n.rated?"ratedGame":"unratedGame";if("correspondence"==n.speed){const i=n.advance?"varAdvance":"varCorrs",o=n.advance?"allow":"denied",c=["label",{"label-default":!!n.advance,"label-warning":!n.advance}];t=a.default.createElement(a.Fragment,null,a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},a.default.createElement("span",null,a.default.createElement("span",null,l._("game","variantVsSpeed")),": ",a.default.createElement("span",{className:"label"},l._("game",i)),a.default.createElement("span",{className:"label ml-2"},l._("game",e))))),a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},a.default.createElement("span",null,a.default.createElement("span",null,l._("game","useCompHints")),": ",a.default.createElement("span",{className:s.default(c)},l._("game",o))))))}}return t},this.renderName=e=>{let t=null;const{game:n,tournament:i}=e.RawData;if(i){const e=i.round?`https://www.chess-online.com/tournaments/round/${i.round}`:`https://www.chess-online.com/tournaments/${i.id}`;t=a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},a.default.createElement("span",{className:"lead bold"},a.default.createElement("a",{href:e},a.default.createElement("span",{className:"p-r-5"},a.default.createElement(r.OverlayTrigger,{key:i.id,overlay:a.default.createElement(r.Tooltip,{id:`tooltip-${i.id}`},l._("game","viewTournTable"))},a.default.createElement("i",{className:"xi-grid1"}))),i.name))))}else n&&(t=a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},a.default.createElement("span",{className:"lead bold"},n.event))));return t}}render(){const{props:e,renderResult:t,renderDates:n,renderState:i,renderRZ:s,renderTC:o,renderName:l}=this,{store:c}=e,{game:p}=c.getState(),{engine:u}=p;return a.default.createElement(r.Card,{className:"card-transparent"},t(u),i(u),a.default.createElement(r.Row,null,a.default.createElement(r.Col,{className:"mb-1",md:12},n(u))),s(u),o(u),l(u))}}t.GameInfo=u},5065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderResult=t.renderTimer=t.renderPlayer=void 0;const i=n(655),a=i.__importDefault(n(7294)),s=i.__importDefault(n(4184)),r=n(2038),o=n(5645),l=n(2353),c=n(1529);t.renderPlayer=(e,t,n)=>{const{White:i,Black:s}=e;let r;return r="white"==t?"bottom"==n?i:s:"bottom"==n?s:i,r?a.default.createElement(c.UserName,{user:r.user,size:"Small"}):null};t.renderTimer=(e,t,n)=>{const i=e.RawData,l=i.correspondence?i.correspondence:i.clock;if(l){let e,c;if(o.isBlitzClock(l)||o.isCorrespondenceClock(l))"white"==t?(e="bottom"==n?l.white:l.black,c="bottom"==n?"white":"black"):(e="bottom"==n?l.black:l.white,c="bottom"==n?"black":"white");else if(o.isAdvanceClock(l)){let i;"white"==t?(i="bottom"==n?l.white:l.black,c="bottom"==n?"white":"black"):(i="bottom"==n?l.black:l.white,c="bottom"==n?"black":"white"),l.lastMoveAt&&l.serverNow&&(e=i-(l.serverNow-l.lastMoveAt))}if(e){const t=i.game.player==c,n=["timer",{active:t}],o=e=>e?a.default.createElement("i",{className:"xi-time pr-2"}):null;return a.default.createElement("div",{className:s.default(n)},o(t),a.default.createElement("span",null,r.formatTimer(e)))}}return null};t.renderResult=(e,t,n)=>{if(e.Result){const i=e.Result,s=l.GameResult.OppositeColor[i];let r;return r="white"==t?"bottom"==n?l.GameResult.score[i]:l.GameResult.score[s]:"bottom"==n?l.GameResult.score[s]:l.GameResult.score[i],a.default.createElement("div",{className:"game-result"},r)}return null}},5323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyseGame=void 0;const i=n(655),a=i.__importDefault(n(4184)),s=i.__importStar(n(7294)),r=i.__importStar(n(3935)),o=i.__importDefault(n(6370)),l=n(4179),c=n(3788),p=n(6105),u=n(6473),d=n(2808),h=n(5031),m=n(5065),P=n(4630),f=i.__importStar(n(5125)),g=n(2742),b=n(5146),v=n(8797),y=n(4748),R=n(1326),C=n(241),k=n(8560),N=n(8949),w=n(4815);class S extends s.Component{constructor(e){super(e),this.storeUnsubscribe=void 0,this.cg=void 0,this.boardElement=null,this.redrawBoard=()=>{const{cg:e}=this;void 0!==e&&e.redrawAll()},this.flipBoard=()=>{this.store.dispatch({type:f.FLIP_BOARD})},this.updateState=()=>{this.forceUpdate()},this.gameConnect=()=>{},this.gameDisconnect=()=>{},this.gameMsgHandler=e=>{console.log(e)},this.pvtChatHandler=e=>{console.log(e)},this.pubChatHandler=e=>{console.log(e)},this.loadGame=(e,t)=>{},this.renderTimer=()=>{},this.renderControls=()=>s.createElement("div",{className:"controls flex-grow-1 d-flex flex-column"},s.createElement(l.Tab.Container,{defaultActiveKey:"info"},s.createElement(l.Nav,{variant:"tabs",className:"nav-tabs-simple"},s.createElement(l.Nav.Item,null,s.createElement(l.Nav.Link,{eventKey:"moves"},g._("game","movesTab"))),s.createElement(l.Nav.Item,null,s.createElement(l.Nav.Link,{eventKey:"info"},g._("game","infoTab")))),s.createElement(l.Tab.Content,{className:"p-0"},s.createElement(l.Tab.Pane,{eventKey:"moves"},s.createElement("div",{className:"d-flex flex-column h-100"},s.createElement("div",{className:"mb-auto board-height auto-overflow"},s.createElement(R.ChessMoves,{mode:C.MovesMode.List,nav:C.NavigatorMode.Top,store:this.store})),s.createElement("div",{className:"mt-2 pt-2 border-top"},s.createElement(k.Captures,{store:this.store,piece:this.props.board.piece})))),s.createElement(l.Tab.Pane,{eventKey:"info"},s.createElement(P.GameInfo,{store:this.store}))))),this.onPlyClick=e=>{const{store:t}=this},this.renderAnalysisTab=e=>{var t;return(null===(t=e.RawData.game)||void 0===t?void 0:t.insite)?s.createElement(l.Nav.Item,null,s.createElement(l.Nav.Link,{eventKey:"analysis"},g._("analyse","title"))):null},this.renderAnalysis=(e,t)=>{var n;return(null===(n=t.RawData.game)||void 0===n?void 0:n.insite)?s.createElement(l.Tab.Pane,{eventKey:"analysis"},s.createElement(N.AnalyseGraphAsync,{store:e,height:400})):null},this.renderMovetimeTab=e=>{var t;return(null===(t=e.RawData.game)||void 0===t?void 0:t.moveCentis)?s.createElement(l.Nav.Item,null,s.createElement(l.Nav.Link,{eventKey:"movetime"},"Затраченное время")):null},this.renderMovetime=(e,t)=>{var n;return(null===(n=t.RawData.game)||void 0===n?void 0:n.moveCentis)?s.createElement(l.Tab.Pane,{eventKey:"movetime"},s.createElement("div",{style:{width:"100%",height:400}},s.createElement(w.MovesGraphAsync,{height:400,store:this.store}))):null},this.renderFenPgnTab=e=>s.createElement(l.Nav.Item,null,s.createElement(l.Nav.Link,{eventKey:"fenpgn"},"FEN & PGN")),this.renderFenPgn=e=>{const t=v.FenString.fromPosition(e.CurrentPos),n=e.RawData.pgn;return s.createElement(l.Tab.Pane,{eventKey:"fenpgn"},s.createElement(l.Row,null,s.createElement(l.Col,{md:12},s.createElement(l.FormGroup,null,s.createElement(l.FormLabel,null,g._("chess","fen")),s.createElement(y.TextWithCopy,{value:t,placeholder:g._("chess","fen")})))),s.createElement(l.Row,null,s.createElement(l.Col,{md:12},s.createElement("div",{className:"pgn-text"},s.createElement(o.default,{trackYProps:{style:{width:5}}},s.createElement("pre",null,n))))))},this.renderCountersTab=e=>null,this.renderCounters=(e,t)=>null,this.renderUnderboard=(e,t)=>{const{renderAnalysis:n,renderAnalysisTab:i,renderMovetime:a,renderMovetimeTab:r,renderFenPgn:o,renderFenPgnTab:c,renderCounters:p,renderCountersTab:u}=this;return s.createElement(l.Row,null,s.createElement(l.Col,{lg:12},s.createElement("div",{className:"underboard"},s.createElement(l.Tab.Container,{defaultActiveKey:"fenpgn"},s.createElement(l.Nav,{variant:"tabs",className:"nav-tabs-simple"},i(t),r(t),c(t),u(t)),s.createElement(l.Tab.Content,null,n(e,t),a(e,t),o(t),p(e,t))))))},g.i18n.register();const t=h.createAnalyseGameState(this.props);this.store=d.createAnalyseGameStore(t)}componentDidMount(){const{store:e}=this,{board:t,game:n}=e.getState();this.storeUnsubscribe=this.store.subscribe((()=>this.updateState())),this.cg=c.Chessground(this.boardElement,{fen:n.fen,orientation:t.orientation,coordinates:t.coordinates,turnColor:b.Color.toName(n.engine.ToMove),viewOnly:!0,resizable:!0,lastMove:n.lastMove,check:n.isCheck,highlight:{lastMove:!0,check:!0},events:{}}),window.addEventListener("resize",this.redrawBoard)}componentWillUnmount(){window.removeEventListener("resize",this.redrawBoard);const{cg:e}=this;void 0!==e&&e.destroy(),this.storeUnsubscribe&&this.storeUnsubscribe()}render(){const{props:e,store:t,flipBoard:n}=this,{board:i}=e,{board:r,game:o}=t.getState(),{engine:c}=o,{square:u,piece:d,size:h,coordinates:P,is3d:f}=r;this.cg&&this.cg.set({fen:o.fen,lastMove:o.lastMove,check:o.isCheck,orientation:r.orientation,coordinates:r.coordinates});const b=[u,p.BoardSizeClass[h],{"coords-no":!P,is2d:!f,is3d:f}];return s.createElement(l.Container,{fluid:!0,className:a.default(b)},s.createElement(l.Row,null,s.createElement(l.Col,{md:12},s.createElement("div",{className:"d-block d-md-flex flex-wrap mb-2"},s.createElement("div",null,s.createElement("div",{className:a.default("board-container",d)},s.createElement(l.Row,null,s.createElement(l.Col,{md:6},m.renderPlayer(o.engine,r.orientation,"top")),s.createElement(l.Col,{className:"text-right",md:6},m.renderResult(o.engine,r.orientation,"top"))),s.createElement(l.Row,{className:"py-2"},s.createElement(l.Col,null,s.createElement("div",{className:"main-board",ref:e=>this.boardElement=e}))),s.createElement(l.Row,null,s.createElement(l.Col,{md:6},m.renderPlayer(o.engine,r.orientation,"bottom")),s.createElement(l.Col,{className:"text-right",md:6},m.renderResult(o.engine,r.orientation,"bottom"))))),s.createElement("div",{className:"mini-controls mx-md-3 mt-3 mt-md-5 mb-4"},s.createElement("div",{className:"btn-toolbar flex-wrap",role:"toolbar"},s.createElement("div",{className:"btn-group"},i.configUrl?s.createElement("a",{"aria-label":g._("game","config"),className:"btn btn-link",title:g._("game","config"),href:i.configUrl+"?returnUrl="+window.location.href},s.createElement("i",{className:"xi-config"})):"",s.createElement("button",{"aria-label":g._("game","flip"),className:"btn btn-link",title:g._("game","flip"),onClick:n},s.createElement("i",{className:"xi-refresh"}))))),this.renderControls()))),this.renderUnderboard(t,c))}}S.defaultProps=u.defaultProps;t.AnalyseGame=(e,t)=>{r.render(s.createElement(S,e),t,(()=>{}))}},5031:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnalyseGameState=void 0;const i=n(4200);t.createAnalyseGameState=e=>{var t;const{locale:n,board:a,game:s}=e;return{intl:{locale:null!=n?n:"en-us"},board:{is3d:!!a.is3d,size:a.size,piece:a.piece||"alpha",square:a.square||"color-brown",orientation:null!==(t=a.orientation)&&void 0!==t?t:"white",coordinates:!!a.coordinates},game:i.createGameState(e.game)}}},2808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnalyseGameStore=void 0;const i=n(4890),a=n(2853),s=n(888),r=n(4078);t.createAnalyseGameStore=e=>i.createStore(i.combineReducers({intl:a.intlReducer,board:r.boardReducer,game:s.gameReducer}),e)},6769:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureGame=void 0;const i=n(655),a=i.__importDefault(n(4184)),s=i.__importStar(n(7294)),r=i.__importStar(n(3935)),o=n(4179),l=n(3788),c=n(6105),p=n(2742),u=n(8797),d=i.__importStar(n(5125)),h=n(8641),m=n(4078),P=n(8141),f=n(8855),g=n(5589);class b extends s.Component{constructor(e){super(e),this.storeUnsubscribe=void 0,this.cg=void 0,this.boardElement=null,this.redrawBoard=()=>{const{cg:e}=this;void 0!==e&&e.redrawAll()},this.updateState=()=>{this.forceUpdate()},this.onCoordsChange=e=>{this.store.dispatch({type:d.SET_COORDS})},this.onSizeChange=e=>{this.store.dispatch({type:d.CHANGE_SIZE,size:e})},this.onPieceChange=e=>{this.store.dispatch({type:d.SET_PIECE,piece:e})},this.onSquareChange=e=>{this.store.dispatch({type:d.SET_SQUARE,square:e})},this.renderControls=()=>{const{props:e}=this,{size:t,piece:n,square:i,coordinates:a}=this.store.getState();return s.createElement("div",{className:"controls flex-grow-1"},s.createElement(o.Form,{method:"post"},e.csrfTokenName&&e.csrfTokenValue?s.createElement("input",{type:"hidden",name:e.csrfTokenName,value:e.csrfTokenValue}):"",e.returnUrl?s.createElement("input",{type:"hidden",name:"returnUrl",value:e.returnUrl}):"",s.createElement(o.Row,null,s.createElement(o.Col,{md:12},s.createElement(o.FormGroup,{controlId:"size"},s.createElement(o.FormLabel,null,p._("game","board_size")),s.createElement(P.SizeSelector,{name:"size",defaultValue:t,onChangeSize:this.onSizeChange})))),s.createElement(o.Row,null,s.createElement(o.Col,{md:12},s.createElement(o.FormGroup,{controlId:"piece"},s.createElement(o.FormLabel,null,p._("chess","pieces")),s.createElement(f.PieceSelector,{name:"piece",defaultValue:n,onChangePiece:this.onPieceChange})))),s.createElement(o.Row,null,s.createElement(o.Col,{md:12},s.createElement(o.FormGroup,{controlId:"square"},s.createElement(o.FormLabel,null,p._("chess","squares")),s.createElement(g.SquareSelector,{name:"square",defaultValue:i,onChangeSquare:this.onSquareChange})))),s.createElement(o.Row,null,s.createElement(o.Col,{md:12},s.createElement(o.FormCheck,{id:"coords",name:"coords",type:"checkbox",value:"1",onChange:this.onCoordsChange,defaultChecked:a,label:p._("game","display_coord")}))),s.createElement(o.Row,null,s.createElement(o.Col,{className:"text-right",md:12},s.createElement(o.Button,{type:"submit"},p._("app","save"))))))},p.i18n.register();const{is3d:t,size:n,square:i,piece:a,orientation:r,coordinates:l}=this.props;this.store=m.createBoardStore({is3d:!!t,size:n,square:i,piece:a,orientation:null!=r?r:"white",coordinates:!!l})}componentDidMount(){const{store:e}=this,{orientation:t,coordinates:n}=e.getState();this.storeUnsubscribe=this.store.subscribe((()=>this.updateState())),this.cg=l.Chessground(this.boardElement,{fen:u.FenString.standartStart,orientation:t,coordinates:n,viewOnly:!0,resizable:!0}),window.addEventListener("resize",this.redrawBoard)}componentWillUnmount(){window.removeEventListener("resize",this.redrawBoard);const{cg:e}=this;void 0!==e&&e.destroy(),this.storeUnsubscribe&&this.storeUnsubscribe()}render(){const{store:e}=this,{square:t,piece:n,size:i,coordinates:r,orientation:l,is3d:p}=e.getState();this.cg&&this.cg.set({fen:u.FenString.standartStart,orientation:l,coordinates:r});const d=[t,c.BoardSizeClass[i],{"coords-no":!r,is2d:!p,is3d:p}];return s.createElement(o.Container,{fluid:!0,className:a.default(d)},s.createElement(o.Row,null,s.createElement(o.Col,{md:12},s.createElement("div",{className:"d-block d-lg-flex mb-2"},s.createElement("div",null,s.createElement("div",{className:a.default("board-container",n)},s.createElement("div",{className:"py-2"},s.createElement("div",{className:"main-board",ref:e=>this.boardElement=e})))),s.createElement("div",{className:"mini-controls mx-3 mt-5"}),this.renderControls()))))}}b.defaultProps=h.defaultSettings;t.ConfigureGame=(e,t)=>{r.render(s.createElement(b,e),t,(()=>{}))}},2517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatchGame=void 0;const i=n(655),a=i.__importDefault(n(4184)),s=i.__importStar(n(7294)),r=i.__importStar(n(3935)),o=n(4179),l=n(3788),c=n(6105),p=n(6473),u=n(8077),d=n(2383),h=n(1326),m=n(241),P=n(8560),f=n(5065),g=i.__importStar(n(5125)),b=n(4630),v=n(2742),y=n(5146);class R extends s.Component{constructor(e){super(e),this.storeUnsubscribe=void 0,this.cg=void 0,this.boardElement=null,this.redrawBoard=()=>{const{cg:e}=this;void 0!==e&&e.redrawAll()},this.updateState=()=>{this.forceUpdate()},this.gameDisconnect=()=>{},this.gameMsgHandler=e=>{console.log(e)},this.pvtChatHandler=e=>{console.log(e)},this.pubChatHandler=e=>{console.log(e)},this.loadGame=()=>{},this.flipBoard=()=>{this.store.dispatch({type:g.FLIP_BOARD})},this.renderControls=()=>s.createElement("div",{className:"controls flex-grow-1 d-flex flex-column"},s.createElement(o.Tab.Container,{defaultActiveKey:"moves"},s.createElement(o.Nav,{variant:"tabs",className:"nav-tabs-simple"},s.createElement(o.Nav.Item,null,s.createElement(o.Nav.Link,{eventKey:"moves"},v._("game","movesTab"))),s.createElement(o.Nav.Item,null,s.createElement(o.Nav.Link,{eventKey:"info"},v._("game","infoTab")))),s.createElement(o.Tab.Content,{className:"p-0"},s.createElement(o.Tab.Pane,{eventKey:"moves"},s.createElement("div",{className:"d-flex flex-column h-100"},s.createElement("div",{className:"mb-auto board-height auto-overflow"},s.createElement(h.ChessMoves,{mode:m.MovesMode.List,nav:m.NavigatorMode.Top,store:this.store})),s.createElement("div",{className:"mt-2 pt-2 border-top"},s.createElement(P.Captures,{store:this.store,piece:this.props.board.piece})))),s.createElement(o.Tab.Pane,{eventKey:"info"},s.createElement(b.GameInfo,{store:this.store}))))),v.i18n.register();const t=d.createWatchGameState(this.props);this.store=u.createWatchGameStore(t)}componentDidMount(){const{store:e}=this,{board:t,game:n}=e.getState();this.storeUnsubscribe=this.store.subscribe((()=>this.updateState())),this.cg=l.Chessground(this.boardElement,{fen:n.fen,orientation:t.orientation,coordinates:t.coordinates,turnColor:y.Color.toName(n.engine.ToMove),viewOnly:!0,resizable:!0,lastMove:n.lastMove,check:n.isCheck,highlight:{lastMove:!0,check:!0},events:{}}),window.addEventListener("resize",this.redrawBoard)}componentWillUnmount(){window.removeEventListener("resize",this.redrawBoard);const{cg:e}=this;void 0!==e&&e.destroy(),this.storeUnsubscribe&&this.storeUnsubscribe()}render(){const{props:e,store:t,flipBoard:n}=this,{board:i}=e,{board:r,game:l}=t.getState(),{square:p,piece:u,size:d,coordinates:h,is3d:m}=r;this.cg&&this.cg.set({fen:l.fen,lastMove:l.lastMove,check:l.isCheck,orientation:r.orientation,coordinates:r.coordinates});const P=[p,c.BoardSizeClass[d],{"coords-no":!h,is2d:!m,is3d:m}];return s.createElement(o.Container,{fluid:!0,className:a.default(P)},s.createElement(o.Row,null,s.createElement(o.Col,{md:12},s.createElement("div",{className:"d-block d-md-flex flex-wrap mb-2"},s.createElement("div",null,s.createElement("div",{className:a.default("board-container",u)},s.createElement(o.Row,null,s.createElement(o.Col,{xs:6},f.renderPlayer(l.engine,r.orientation,"top")),s.createElement(o.Col,{className:"text-right",xs:6},f.renderTimer(l.engine,r.orientation,"top"))),s.createElement(o.Row,{className:"py-2"},s.createElement(o.Col,null,s.createElement("div",{className:"main-board",ref:e=>this.boardElement=e}))),s.createElement(o.Row,null,s.createElement(o.Col,{xs:6},f.renderPlayer(l.engine,r.orientation,"bottom")),s.createElement(o.Col,{className:"text-right",xs:6},f.renderTimer(l.engine,r.orientation,"bottom"))))),s.createElement("div",{className:"mini-controls mx-md-3 mt-3 mt-md-5 mb-4"},s.createElement("div",{className:"btn-toolbar flex-wrap",role:"toolbar"},s.createElement("div",{className:"btn-group"},i.configUrl?s.createElement("a",{"aria-label":v._("game","config"),className:"btn btn-link",title:v._("game","config"),href:i.configUrl+"?returnUrl="+window.location.href},s.createElement("i",{className:"xi-config"})):"",s.createElement("button",{"aria-label":v._("game","flip"),className:"btn btn-link",title:v._("game","flip"),onClick:n},s.createElement("i",{className:"xi-refresh"}))))),this.renderControls()))))}}R.defaultProps=p.defaultProps;t.WatchGame=(e,t)=>{r.render(s.createElement(R,e),t,(()=>{}))}},2383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWatchGameState=void 0;const i=n(4200);t.createWatchGameState=e=>{var t;const{locale:n,board:a,game:s}=e;return{intl:{locale:null!=n?n:"en-us"},board:{is3d:!!a.is3d,size:a.size,piece:a.piece||"alpha",square:a.square||"color-brown",orientation:null!==(t=a.orientation)&&void 0!==t?t:"white",coordinates:!!a.coordinates},game:i.createGameState(e.game)}}},8077:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWatchGameStore=void 0;const i=n(4890),a=n(2853),s=n(4078),r=n(888);t.createWatchGameStore=e=>i.createStore(i.combineReducers({intl:a.intlReducer,board:s.boardReducer,game:r.gameReducer}),e)},525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;const i=n(655).__importStar(n(7294)),a=n(4069);class s extends i.Component{constructor(e){super(e),this.sizes={Tiny:25,Small:36,Medium:48,Large:80,Original:160},this.retinaSizes={Tiny:"Small",Small:"Medium",Medium:"Large",Large:"Original",Original:"Original"},this.getAvatarUrl=(e,t="Small",n=!1)=>{n&&(t=this.retinaSizes[t]);const i=a.Md5.hashStr(`UserAvatar|${e}`)+".jpeg";return`https://a0${i[0]}.chess-online.com/userpics/${i}?size=${t}`}}render(){var e,t;const{user:n,size:a}=this.props;let s,r,o;const l=null!==(e=null==n?void 0:n.id)&&void 0!==e?e:1;n?(s=this.getAvatarUrl(l,a,!1),r=this.getAvatarUrl(l,a,!0),o=null!==(t=null==n?void 0:n.display)&&void 0!==t?t:"???"):(s=this.getAvatarUrl(1,a,!1),r=this.getAvatarUrl(1,a,!0),o="???");const c=this.sizes[a];return i.createElement("img",{src:s,alt:o,title:o,width:c,height:c,"data-src":s,"data-src-retina":r})}}t.Avatar=s,s.defaultProps={user:void 0,size:"Medium"}},8758:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Icons=void 0,function(e){e[e.NONE=0]="NONE",e[e.CAPITAN=1]="CAPITAN",e[e.VICE=2]="VICE",e[e.MODERATOR=3]="MODERATOR",e[e.COMODERATOR=4]="COMODERATOR"}(t.Icons||(t.Icons={}))},1529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserName=void 0;const i=n(655),a=i.__importStar(n(7294)),s=i.__importDefault(n(4670)),r=i.__importDefault(n(4184)),o=i.__importDefault(n(7037)),l=n(4179),c=n(3518),p=n(8758),u=n(525);class d extends a.default.Component{constructor(e){super(e),this.miniCallback=e=>{this.setState({popoverContent:e})},this.getPopoverContent=()=>{const{popoverContent:e}=this.state;return e?a.default.createElement(l.Popover.Content,{dangerouslySetInnerHTML:{__html:e}}):a.default.createElement(l.Popover.Content,null,a.default.createElement("div",{className:"text-center"},a.default.createElement("div",{className:"progress-circle-indeterminate m-t-45"})))},this.onPopupToggle=e=>{var t;const{language:n}=this.props,{popoverContent:i}=this.state;if(e&&!i){const{user:e}=this.props,i=`/${n}/user/mini/${null!==(t=null==e?void 0:e.id)&&void 0!==t?t:1}`,{miniCallback:a}=this;fetch(i,{mode:"cors"}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.text()})).then((function(e){a(e)})).catch((function(e){c.Logger.error("Looks like there was a problem when reading data: \n",e)}))}},this.popoverElement=()=>{const e=a.default.forwardRef(((e,t)=>{var{popper:n,children:s,show:r}=e,o=i.__rest(e,["popper","children","show"]);return a.useEffect((()=>{n.scheduleUpdate()}),[s,n]),a.default.createElement(l.Popover,Object.assign({ref:t},o),s)}));return a.default.createElement(e,{id:s.default.generate(),className:"username-popup"},this.getPopoverContent())},this.renderUsername=e=>e.display&&e.display!=e.name?a.default.createElement("div",{className:"small"},a.default.createElement("span",null,e.name)):null,this.renderTitle=e=>e.title?o.default(e.title)?a.default.createElement("span",{className:"label label-success text-uppercase fs-10 mr-1","data-toggle":"tooltip",title:""},e.title):a.default.createElement("span",{className:"label label-success text-uppercase fs-10 mr-1","data-toggle":"tooltip",title:e.title.name},e.title.id):null,this.renderUserLink=(e,t)=>{var n;const{popover:i}=this.props,s=["username","cursor"];e.status&&s.push(e.status);const o=null!==(n=e.display)&&void 0!==n?n:e.name;return i?a.default.createElement(l.OverlayTrigger,{rootClose:!0,trigger:"click",placement:"auto",onToggle:this.onPopupToggle,overlay:this.popoverElement()},a.default.createElement("span",{className:r.default(s)},o)):a.default.createElement("a",{href:t,className:r.default(s)},o)},this.renderInfo=(e,t)=>{const{showInfo:n}=this.props;return n?a.default.createElement("div",{className:"info-wrapper"},a.default.createElement("div",{title:e.display},this.renderTitle(e),this.renderUserLink(e,t)),this.renderUsername(e)):null},this.state={popoverContent:void 0}}render(){const{user:e,size:t,language:n}=this.props;if(e){const i=`/${n}/@/${e.id}`;return a.default.createElement("div",{className:"username-block"},a.default.createElement("div",{className:"upic-wrapper"},a.default.createElement("div",{className:"tiny rounded upic","data-online-mark":"0","data-user-raw":"1","data-online-time":e.online?e.online:"none","data-user-id":e.id},a.default.createElement("a",{href:i},a.default.createElement(u.Avatar,{user:e,size:t})))),this.renderInfo(e,i))}return null}}t.UserName=d,d.defaultProps={language:"ru-ru",user:{name:"?"},size:"Medium",icon:p.Icons.NONE,showInfo:!0,withFlag:!1,compact:!1,controls:!1,popover:!0}},2870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyseGameTest=void 0;const i=n(5323);var a={board:{size:4,piece:"alpha",square:"cedar",coordinates:!0},game:{game:{id:7782247,load:!1,insite:!0,variant:{key:"standard",name:"Standard",shortName:"Std"},speed:"correspondence",perf:"maina",rated:!0,initialFen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -",fen:"8/8/p7/6Rk/8/5p1r/3B1K2/8 b - - 0 64",player:"black",turns:125,startedAtTurn:0,status:{name:"draw",subtype:4,result:3,result_name:"ничья принята"},event:"Личный чемпионат сайта по адвансу - 2018, финал",tournamentId:24184,createdAt:1554204125948,createdBy:4,private:!1,advance:!0,lastMove:"e5g5",check:"h5",moveCentis:[192602477,1068681,84011568,6250737,34051340,741769589,179926605,83242312,7672019,249791940,207407681,54075665,383499997,299070662,146885838,721837791,82122390,613324038,485553529,2704196334,948548650,699867445,283675361,636527924,102507741,415271515,295777499,309494816,711305044,359418166,321281085,183227347,130574501,131315169,234063816,377338337,154001487,320522673,509138207,130397340,48950584,15739757,82941611,28050884,149505556,267942807,61011128,386448728,129283302,193504899,240755604,47235773,99706105,296460702,342222863,196463708,365752370,123796672,88499184,92012751,80334006,180088851,513092150,100150006,160326379,295953364,347543403,129376898,348035139,33218964,259127541,329290350,276558055,263703460,79924789,57996513,299327494,214138284,37536999,134092558,41277975,987460,240755134,19641708,411164023,194467845,134869570,42677013,80332563,43720283,183653247,516756143,84481415,38431902,87132784,5229072,348996339,75557263,211417929,172030496,69149332,14926342,221989458,86148065,121985444,9648431,81295767,2305394,308448618,3199938,54737697,20575915,187687530,41231626,118617908,967884,267235126,34912072,40799081,4487264,304138622,5196465,208541430,36614027,5375631],opening:{code:"A05",name:"Reti: KIA"}},tournament:{id:24184,name:"Личный чемпионат сайта по адвансу - 2018, финал",running:!1},correspondence:{limit:"Адванс 10+2/21",can_pause:!0,parts:[{per:"game",initial:864e6,increment:1728e5,min:0,interval:1,max:18144e5}],white:0,black:0,totalTime:27122872e3,lastMoveAt:1581326997619,serverNow:1608013743540},player:{color:"white",name:"AHDPEI",user:{id:32141,name:"AHDPEI",display:"Андрей",online:"1d",perfs:{maina:{games:257,rating:1600,avg:1617}},language:"ru-RU",profile:{country:"UA"},patron:"bronze",status:"bronze",title:""},rating:1653,ratingDiff:-1.63},opponent:{color:"black",name:"Sheldon",user:{id:82031,name:"Sheldon",display:"Станислав",online:"12h",perfs:{maina:{games:410,rating:1539,avg:1557}},language:"ru-RU",profile:{country:"KZ"},patron:"bronze",status:"bronze",title:""},rating:1598,ratingDiff:1.63},orientation:"white",analysis:{state:"ready",white:{blunder:0,inaccuracy:0,mistake:0,acpl:6},black:{blunder:0,inaccuracy:2,mistake:0,acpl:9}},treeParts:[{ply:0,fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",eval:{cp:13}},{ply:1,fen:"rnbqkbnr/pppppppp/8/8/8/5N2/PPPPPPPP/RNBQKB1R b KQkq - 1 1",id:"XOkNHzDY",uci:"g1f3",san:"Nf3",eval:{cp:13,best:"c4",variation:"c4 e6 Nc3 d5 d4 Nf6 Nf3 c6 cxd5 exd5 Bf4 Be7 Qc2 Nh5",depth:39,time:191840,by:"deep"}},{ply:2,fen:"rnbqkb1r/pppppppp/5n2/8/8/5N2/PPPPPPPP/RNBQKB1R w KQkq - 2 2",id:"BCyCnDJ6",uci:"g8f6",san:"Nf6",eval:{cp:19,depth:39,time:209e3,by:"deep"}},{ply:3,fen:"rnbqkb1r/pppppppp/5n2/8/8/5NP1/PPPPPP1P/RNBQKB1R b KQkq - 0 2",id:"6TvuT81o",uci:"g2g3",san:"g3",eval:{cp:22,best:"d4",variation:"d4 e6",depth:38,time:210573,by:"deep"}},{ply:4,fen:"rnbqkb1r/ppp1pppp/5n2/3p4/8/5NP1/PPPPPP1P/RNBQKB1R w KQkq - 0 3",id:"6bUo+Ws9",uci:"d7d5",san:"d5",eval:{depth:36,time:209260,by:"deep"}},{ply:5,fen:"rnbqkb1r/ppp1pppp/5n2/3p4/8/5NP1/PPPPPPBP/RNBQK2R b KQkq - 1 3",id:"NbDDVSC3",uci:"f1g2",san:"Bg2",eval:{cp:-20,depth:25,time:4003,by:"offline"}},{ply:6,fen:"rnbqkb1r/pp2pppp/5n2/2pp4/8/5NP1/PPPPPPBP/RNBQK2R w KQkq - 0 4",id:"9NDf84fe",uci:"c7c5",san:"c5",eval:{cp:-15,depth:20,time:1522,by:"deep"}},{ply:7,fen:"rnbqkb1r/pp2pppp/5n2/2pp4/8/5NP1/PPPPPPBP/RNBQ1RK1 b kq - 1 4",id:"Fkr5TpgX",uci:"e1g1",san:"O-O",eval:{cp:10,depth:24,time:4001,by:"offline"}},{ply:8,fen:"rnbqkb1r/1p2pppp/p4n2/2pp4/8/5NP1/PPPPPPBP/RNBQ1RK1 w kq - 0 5",id:"JZNQPqkD",uci:"a7a6",san:"a6",eval:{cp:17,best:"h6",variation:"h6 c3 e6 d4 Be7 c4 Nc6 cxd5 exd5 dxc5 Bxc5 a3 a5 Nc3",depth:21,time:4003,by:"offline"}},{ply:9,fen:"rnbqkb1r/1p2pppp/p4n2/2pp4/2P5/5NP1/PP1PPPBP/RNBQ1RK1 b kq - 0 5",id:"SCrGuJTi",uci:"c2c4",san:"c4",eval:{cp:28,best:"d3",variation:"d3 e6",depth:19,time:4002,by:"offline"}},{ply:10,fen:"rnbqkb1r/1p2pppp/p4n2/2p5/2p5/5NP1/PP1PPPBP/RNBQ1RK1 w kq - 0 6",id:"NJglPA7V",uci:"d5c4",san:"dxc4",eval:{cp:33,depth:22,time:4002,by:"offline"}},{ply:11,fen:"rnbqkb1r/1p2pppp/p4n2/2p1N3/2p5/6P1/PP1PPPBP/RNBQ1RK1 b kq - 1 6",id:"iIuiWQpK",uci:"f3e5",san:"Ne5",eval:{cp:42,depth:23,time:4002,by:"offline"}},{ply:12,fen:"1nbqkb1r/rp2pppp/p4n2/2p1N3/2p5/6P1/PP1PPPBP/RNBQ1RK1 w k - 2 7",id:"4hdcsypd",uci:"a8a7",san:"Ra7",eval:{best:"Qd4",variation:"Qd4 Nf3 Qd8 Ne5",depth:23,time:4001,by:"offline"},comments:[{name:"Inaccuracy",comment:"Mistake. Best mowe was Qd4"}],glyphs:[{name:"Mistake",symbol:"?"}]},{ply:13,fen:"1nbqkb1r/rp2pppp/p4n2/2p1N3/P1p5/6P1/1P1PPPBP/RNBQ1RK1 b k - 0 7",id:"Xf1uHp7v",uci:"a2a4",san:"a4",eval:{cp:63,depth:23,time:4001,by:"offline"}},{ply:14,fen:"1nb1kb1r/rp2pppp/p4n2/2p1N3/P1pq4/6P1/1P1PPPBP/RNBQ1RK1 w k - 1 8",id:"aysbu91i",uci:"d8d4",san:"Qd4",eval:{cp:60,depth:22,time:4003,by:"offline"}},{ply:15,fen:"1nb1kb1r/rp2pppp/p4n2/2p5/P1pq4/5NP1/1P1PPPBP/RNBQ1RK1 b k - 2 8",id:"61/s/+OE",uci:"e5f3",san:"Nf3",eval:{cp:72,depth:24,time:4004,by:"offline"}},{ply:16,fen:"1nbqkb1r/rp2pppp/p4n2/2p5/P1p5/5NP1/1P1PPPBP/RNBQ1RK1 w k - 3 9",id:"ZocD3UCs",uci:"d4d8",san:"Qd8",eval:{cp:66,best:"Qd5",variation:"Qd5 Nc3 Qd8 Ne5 Qd4 d3 Qxe5 Bf4 Qd4 Bxb8 Ra8 Bf4 cxd3 exd3",depth:21,time:4001,by:"offline"}},{ply:17,fen:"1nbqkb1r/rp2pppp/p4n2/2p5/P1p5/N4NP1/1P1PPPBP/R1BQ1RK1 b k - 4 9",id:"gUjPK6IS",uci:"b1a3",san:"Na3",eval:{cp:74,depth:23,time:4003,by:"offline"}},{ply:18,fen:"1n1qkb1r/rp2pppp/p3bn2/2p5/P1p5/N4NP1/1P1PPPBP/R1BQ1RK1 w k - 5 10",id:"HMlLbz+4",uci:"c8e6",san:"Be6",eval:{cp:101,depth:22,time:4002,by:"offline"}},{ply:19,fen:"1n1qkb1r/rp2pppp/p3bn2/2p1N3/P1p5/N5P1/1P1PPPBP/R1BQ1RK1 b k - 6 10",id:"kxcNMO8a",uci:"f3e5",san:"Ne5",eval:{cp:92,depth:23,time:4002,by:"offline"}},{ply:20,fen:"1n2kb1r/rp2pppp/p3bn2/2p1N3/P1pq4/N5P1/1P1PPPBP/R1BQ1RK1 w k - 7 11",id:"s5+nmn6Z",uci:"d8d4",san:"Qd4",eval:{cp:90,depth:23,time:4002,by:"offline"}},{ply:21,fen:"1n2kb1r/rp2pppp/p3bn2/2p5/P1pq4/N4NP1/1P1PPPBP/R1BQ1RK1 b k - 8 11",id:"WDtz+Edm",uci:"e5f3",san:"Nf3",eval:{cp:71,depth:24,time:4001,by:"offline"}},{ply:22,fen:"1n1qkb1r/rp2pppp/p3bn2/2p5/P1p5/N4NP1/1P1PPPBP/R1BQ1RK1 w k - 9 12",id:"4sMCeJKV",uci:"d4d8",san:"Qd8",eval:{cp:85,depth:22,time:4002,by:"offline"}},{ply:23,fen:"1n1qkb1r/rp2pppp/p3bn2/P1p5/2p5/N4NP1/1P1PPPBP/R1BQ1RK1 b k - 0 12",id:"7EyYw8QX",uci:"a4a5",san:"a5",eval:{cp:92,best:"Ne5",variation:"Ne5 Qd4 Nf3 Qd8 Qc2 b5 d3 cxd3 exd3 Rb7 axb5 axb5 Be3 Bd5",depth:23,time:4002,by:"offline"}},{ply:24,fen:"1n1qkb1r/rp2pppp/p4n2/P1pb4/2p5/N4NP1/1P1PPPBP/R1BQ1RK1 w k - 1 13",id:"Fng+uUi+",uci:"e6d5",san:"Bd5",eval:{cp:102,best:"Qxa5",variation:"Qxa5 d3 Nc6 Ng5 Bd7 Bf4 cxd3 Nc4 Qb4 exd3 h6 Bd2 Qb5 Bxc6",depth:21,time:4003,by:"offline"}},{ply:25,fen:"1n1qkb1r/rp2pppp/p4n2/P1pb4/Q1p5/N4NP1/1P1PPPBP/R1B2RK1 b k - 2 13",id:"lMKzzAjE",uci:"d1a4",san:"Qa4+",eval:{cp:76,depth:23,time:4002,by:"offline"}},{ply:26,fen:"1n1qkb1r/rp2pppp/p1b2n2/P1p5/Q1p5/N4NP1/1P1PPPBP/R1B2RK1 w k - 3 14",id:"FiqnKd1f",uci:"d5c6",san:"Bc6",eval:{cp:90,depth:24,time:4002,by:"offline"}},{ply:27,fen:"1n1qkb1r/rp2pppp/p1b2n2/P1p5/2Q5/N4NP1/1P1PPPBP/R1B2RK1 b k - 0 14",id:"RPWkLbaO",uci:"a4c4",san:"Qxc4",eval:{cp:79,depth:25,time:4002,by:"offline"}},{ply:28,fen:"1n1qkb1r/rp3ppp/p1b1pn2/P1p5/2Q5/N4NP1/1P1PPPBP/R1B2RK1 w k - 0 15",id:"TylXwpPH",uci:"e7e6",san:"e6",eval:{cp:98,depth:24,time:4012,by:"offline"}},{ply:29,fen:"1n1qkb1r/rp3ppp/p1b1pn2/P1p5/2QP4/N4NP1/1P2PPBP/R1B2RK1 b k - 0 15",id:"mxYD8/dq",uci:"d2d4",san:"d4",eval:{cp:81,depth:23,time:4001,by:"offline"}},{ply:30,fen:"3qkb1r/rp1n1ppp/p1b1pn2/P1p5/2QP4/N4NP1/1P2PPBP/R1B2RK1 w k - 1 16",id:"sRTcOstJ",uci:"b8d7",san:"Nbd7",eval:{cp:82,best:"Qxa5",variation:"Qxa5 dxc5",depth:20,time:4003,by:"offline"}},{ply:31,fen:"3qkb1r/rp1n1ppp/p1b1pn2/P1p1N3/2QP4/N5P1/1P2PPBP/R1B2RK1 b k - 2 16",id:"mERKSBXB",uci:"f3e5",san:"Ne5",eval:{cp:74,depth:20,time:4001,by:"offline"}},{ply:32,fen:"3qkb1r/rp1n1ppp/p3pn2/P1p1N3/2QP4/N5P1/1P2PPbP/R1B2RK1 w k - 0 17",id:"SvF0rvhA",uci:"c6g2",san:"Bxg2",eval:{cp:95,depth:23,time:4002,by:"offline"}},{ply:33,fen:"3qkb1r/rp1n1ppp/p3pn2/P1p1N3/2QP4/N5P1/1P2PPKP/R1B2R2 b k - 0 17",id:"F+GFSYVx",uci:"g1g2",san:"Kxg2",eval:{cp:80,depth:26,time:4002,by:"offline"}},{ply:34,fen:"3qkb1r/rp1n1ppp/p3pn2/P3N3/2Qp4/N5P1/1P2PPKP/R1B2R2 w k - 0 18",id:"Is6xacut",uci:"c5d4",san:"cxd4",eval:{cp:85,depth:24,time:4001,by:"offline"}},{ply:35,fen:"3qkb1r/rp1n1ppp/p3pn2/P3N3/2Qp1B2/N5P1/1P2PPKP/R4R2 b k - 1 18",id:"5yW6Wm9o",uci:"c1f4",san:"Bf4",eval:{cp:85,depth:23,time:4001,by:"offline"}},{ply:36,fen:"r2qkb1r/1p1n1ppp/p3pn2/P3N3/2Qp1B2/N5P1/1P2PPKP/R4R2 w k - 2 19",id:"jKle3NV3",uci:"a7a8",san:"Ra8",eval:{cp:91,depth:23,time:4002,by:"offline"}},{ply:37,fen:"r2qkb1r/1p1n1ppp/p3pn2/P3N3/2Qp1B2/N5P1/1P2PPKP/R2R4 b k - 3 19",id:"ZmgaPN6v",uci:"f1d1",san:"Rfd1",eval:{cp:77,depth:24,time:4001,by:"offline"}},{ply:38,fen:"r2qk2r/1p1n1ppp/p3pn2/P1b1N3/2Qp1B2/N5P1/1P2PPKP/R2R4 w k - 4 20",id:"trwitwWV",uci:"f8c5",san:"Bc5",eval:{cp:68,depth:24,time:4001,by:"offline"}},{ply:39,fen:"r2qk2r/1p1n1ppp/p3pn2/P1b1N3/2Qp1B2/6P1/1PN1PPKP/R2R4 b k - 5 20",id:"oB9q4Z2N",uci:"a3c2",san:"Nc2",eval:{cp:84,depth:25,time:4002,by:"offline"}},{ply:40,fen:"r2q1rk1/1p1n1ppp/p3pn2/P1b1N3/2Qp1B2/6P1/1PN1PPKP/R2R4 w - - 6 21",id:"w69RYsxW",uci:"e8g8",san:"O-O",eval:{cp:49,best:"b5",variation:"b5",depth:24,time:4002,by:"offline"}},{ply:41,fen:"r2q1rk1/1p1N1ppp/p3pn2/P1b5/2Qp1B2/6P1/1PN1PPKP/R2R4 b - - 0 21",id:"qTHO5UuM",uci:"e5d7",san:"Nxd7",eval:{cp:84,best:"Nxd4",variation:"Nxd4 b5",depth:25,time:4003,by:"offline"}},{ply:42,fen:"r4rk1/1p1q1ppp/p3pn2/P1b5/2Qp1B2/6P1/1PN1PPKP/R2R4 w - - 0 22",id:"MHSF1Jfy",uci:"d8d7",san:"Qxd7",eval:{cp:65,best:"Nxd7",variation:"Nxd7 Nxd4 b5 axb6 Qxb6 Nb3 Qb7+ f3 Bb6 Qb4 Nf6 e4 Rfc8 Na5",depth:23,time:4001,by:"offline"}},{ply:43,fen:"r4rk1/1p1q1ppp/p3pn2/P1Q5/3p1B2/6P1/1PN1PPKP/R2R4 b - - 0 22",id:"83xC9u06",uci:"c4c5",san:"Qxc5",eval:{cp:84,depth:27,time:4001,by:"offline"}},{ply:44,fen:"r1r3k1/1p1q1ppp/p3pn2/P1Q5/3p1B2/6P1/1PN1PPKP/R2R4 w - - 1 23",id:"TsyNSaGm",uci:"f8c8",san:"Rfc8",eval:{cp:81,depth:26,time:4001,by:"offline"}},{ply:45,fen:"r1r3k1/1p1q1ppp/p3pn2/P7/3Q1B2/6P1/1PN1PPKP/R2R4 b - - 0 23",id:"EsLVQi9n",uci:"c5d4",san:"Qxd4",eval:{cp:92,depth:26,time:4002,by:"offline"}},{ply:46,fen:"r1r3k1/1p3ppp/p1q1pn2/P7/3Q1B2/6P1/1PN1PPKP/R2R4 w - - 1 24",id:"e0SD89oG",uci:"d7c6",san:"Qc6+",eval:{cp:80,depth:24,time:4001,by:"offline"}},{ply:47,fen:"r1r3k1/1p3ppp/p1q1pn2/P7/3Q1B2/5PP1/1PN1P1KP/R2R4 b - - 0 24",id:"EWWiXDQ8",uci:"f2f3",san:"f3",eval:{cp:62,depth:25,time:4002,by:"offline"}},{ply:48,fen:"r1r3k1/1p3ppp/p3pn2/P7/3Q1B2/5PP1/1Pq1P1KP/R2R4 w - - 0 25",id:"mdt/o9LC",uci:"c6c2",san:"Qxc2",eval:{cp:72,depth:26,time:4002,by:"offline"}},{ply:49,fen:"r1r3k1/1p3ppp/p3pn2/P7/3Q1B2/5PP1/1PqRP1KP/R7 b - - 1 25",id:"NYWzVhoQ",uci:"d1d2",san:"Rd2",eval:{cp:87,depth:24,time:4001,by:"offline"}},{ply:50,fen:"r1r3k1/1p3ppp/p3pn2/P7/2qQ1B2/5PP1/1P1RP1KP/R7 w - - 2 26",id:"PyrbpkpC",uci:"c2c4",san:"Qc4",eval:{cp:75,best:"Qc5",variation:"Qc5 Be5",depth:22,time:4001,by:"offline"}},{ply:51,fen:"r1r3k1/1p3ppp/p3pn2/P7/2Q2B2/5PP1/1P1RP1KP/R7 b - - 0 26",id:"eHO1qkw9",uci:"d4c4",san:"Qxc4",eval:{cp:82,best:"Be5",variation:"Be5 Qxd4 Bxd4 Rc7 Rad1 Rd8 Kf2 Rcd7 Ke1 Ne8 Bf2 Rxd2 Rxd2 Rxd2",depth:25,time:4005,by:"offline"}},{ply:52,fen:"r5k1/1p3ppp/p3pn2/P7/2r2B2/5PP1/1P1RP1KP/R7 w - - 0 27",id:"VS1kGQrY",uci:"c8c4",san:"Rxc4",eval:{cp:81,depth:28,time:4002,by:"offline"}},{ply:53,fen:"r5k1/1p3ppp/p3pn2/P7/2r1PB2/5PP1/1P1R2KP/R7 b - - 0 27",id:"nP+Malkt",uci:"e2e4",san:"e4",eval:{cp:64,depth:27,time:4001,by:"offline"}},{ply:54,fen:"2r3k1/1p3ppp/p3pn2/P7/2r1PB2/5PP1/1P1R2KP/R7 w - - 1 28",id:"THCsVXxd",uci:"a8c8",san:"Rac8",eval:{cp:79,depth:24,time:4001,by:"offline"}},{ply:55,fen:"2r3k1/1p3ppp/p3pn2/P3B3/2r1P3/5PP1/1P1R2KP/R7 b - - 2 28",id:"844no+Ov",uci:"f4e5",san:"Be5",eval:{cp:63,best:"Kf2",variation:"Kf2 Rc2 Rd1 Kf8 Ke3 Rxd2 Rxd2 Ke7 Bd6+ Ke8 Be5 Rc5 Bc3 Nd7",depth:21,time:4001,by:"offline"}},{ply:56,fen:"2r2k2/1p3ppp/p3pn2/P3B3/2r1P3/5PP1/1P1R2KP/R7 w - - 3 29",id:"B2Gaq56h",uci:"g8f8",san:"Kf8",eval:{cp:63,depth:24,time:4001,by:"offline"}},{ply:57,fen:"2r2k2/1p3ppp/p3pn2/P3B3/2r1P3/5PP1/1P1R2KP/3R4 b - - 4 29",id:"4GVWdWRX",uci:"a1d1",san:"Rad1",eval:{cp:77,best:"Bc3",variation:"Bc3 h5 Kf2 Ke7 Ra3 R8c5 Rb3 Rb5 Rxb5 axb5 Ke3 Ne8 Rd4 Rxd4",depth:23,time:4002,by:"offline"}},{ply:58,fen:"2r1k3/1p3ppp/p3pn2/P3B3/2r1P3/5PP1/1P1R2KP/3R4 w - - 5 30",id:"qOH0jLno",uci:"f8e8",san:"Ke8",eval:{cp:64,depth:25,time:4002,by:"offline"}},{ply:59,fen:"2r1k3/1p3ppp/p3pn2/P7/2r1P3/2B2PP1/1P1R2KP/3R4 b - - 6 30",id:"5Co2uze/",uci:"e5c3",san:"Bc3",eval:{cp:74,depth:28,time:4001,by:"offline"}},{ply:60,fen:"2r1k3/1p3ppp/p3pn2/P1r5/4P3/2B2PP1/1P1R2KP/3R4 w - - 7 31",id:"A/7IqPlp",uci:"c4c5",san:"R4c5",eval:{cp:60,depth:28,time:4002,by:"offline"}},{ply:61,fen:"2r1k3/1p3ppp/p3pn2/P1r5/4P3/2B2PP1/1P1R1K1P/3R4 b - - 8 31",id:"IJKgTEu/",uci:"g2f2",san:"Kf2",eval:{cp:60,best:"h3",variation:"h3 Rb5 Kf2 Ke7 Rd4 e5 Rb4 Rxb4 Bxb4+ Ke8 Bc3 Nd7 Ke3 f6",depth:26,time:4001,by:"offline"}},{ply:62,fen:"2r1k3/1p3ppp/p3pn2/Pr6/4P3/2B2PP1/1P1R1K1P/3R4 w - - 9 32",id:"uoLuJsTi",uci:"c5b5",san:"Rb5",eval:{cp:65,depth:24,time:4003,by:"offline"}},{ply:63,fen:"2r1k3/1p3ppp/p3pn2/Pr6/4P3/2B1KPP1/1P1R3P/3R4 b - - 10 32",id:"7P9r2XGP",uci:"f2e3",san:"Ke3",eval:{cp:68,best:"h3",variation:"h3 Ke7",depth:23,time:4001,by:"offline"}},{ply:64,fen:"2r5/1p2kppp/p3pn2/Pr6/4P3/2B1KPP1/1P1R3P/3R4 w - - 11 33",id:"xJCYzQsV",uci:"e8e7",san:"Ke7",eval:{cp:50,depth:24,time:4002,by:"offline"}},{ply:65,fen:"2r5/1p2kppp/p3pn2/Pr6/3RP3/2B1KPP1/1P5P/3R4 b - - 12 33",id:"OhsI1Cpi",uci:"d2d4",san:"Rd4",eval:{cp:61,best:"h4",variation:"h4 h5 Rd4 Ke8 R1d2 g6 Ke2 Ke7 Rd1 Ke8 R1d3 Ke7 Ke3 Ke8",depth:22,time:4002,by:"offline"}},{ply:66,fen:"2r5/1p2kp1p/p3pnp1/Pr6/3RP3/2B1KPP1/1P5P/3R4 w - - 0 34",id:"gbNWLw5d",uci:"g7g6",san:"g6",eval:{cp:48,best:"e5",variation:"e5 Rb4 Rcc5 f4 Ng4+ Ke2 Ke8 Rxb5 Rxb5 h3 Nf6 Kf3 exf4 Kxf4",depth:21,time:4002,by:"offline"}},{ply:67,fen:"2r5/1p2kp1p/p3pnp1/Pr6/3RP1P1/2B1KP2/1P5P/3R4 b - - 0 34",id:"b/EbDl9M",uci:"g3g4",san:"g4",eval:{cp:69,depth:21,time:4002,by:"offline"}},{ply:68,fen:"2r5/1p2kp2/p3pnp1/Pr5p/3RP1P1/2B1KP2/1P5P/3R4 w - - 0 35",id:"hGvw+1ZN",uci:"h7h5",san:"h5",eval:{cp:75,best:"e5",variation:"e5",depth:23,time:4003,by:"offline"}},{ply:69,fen:"2r5/1p2kp2/p3pnp1/Pr5P/3RP3/2B1KP2/1P5P/3R4 b - - 0 35",id:"3k3h6EeQ",uci:"g4h5",san:"gxh5",eval:{cp:81,depth:26,time:4001,by:"offline"}},{ply:70,fen:"2r5/1p2kp2/p3pnp1/P6r/3RP3/2B1KP2/1P5P/3R4 w - - 0 36",id:"tpyvTWNr",uci:"b5h5",san:"Rxh5",eval:{cp:65,depth:27,time:4002,by:"offline"}},{ply:71,fen:"2r5/1p2kp2/p3pnp1/P6r/1R2P3/2B1KP2/1P5P/3R4 b - - 1 36",id:"EUOfWfcX",uci:"d4b4",san:"Rb4",eval:{cp:64,depth:25,time:4001,by:"offline"}},{ply:72,fen:"8/1pr1kp2/p3pnp1/P6r/1R2P3/2B1KP2/1P5P/3R4 w - - 2 37",id:"wdzvayGO",uci:"c8c7",san:"Rc7",eval:{cp:90,depth:26,time:4002,by:"offline"}},{ply:73,fen:"8/1pr1kp2/p3pnp1/P6r/4P3/1RB1KP2/1P5P/3R4 b - - 3 37",id:"OAFCCxBU",uci:"b4b3",san:"Rb3",eval:{cp:64,depth:25,time:4002,by:"offline"}},{ply:74,fen:"8/1pr1kp2/p3pnp1/P7/4P3/1RB1KP1r/1P5P/3R4 w - - 4 38",id:"OgXMGgfl",uci:"h5h3",san:"Rh3",eval:{cp:35,depth:24,time:4002,by:"offline"}},{ply:75,fen:"8/1pr1kp2/p3pnp1/P7/4PK2/1RB2P1r/1P5P/3R4 b - - 5 38",id:"8TMiTKNc",uci:"e3f4",san:"Kf4",eval:{cp:75,depth:29,time:4001,by:"offline"}},{ply:76,fen:"8/1prnkp2/p3p1p1/P7/4PK2/1RB2P1r/1P5P/3R4 w - - 6 39",id:"d9ejojF/",uci:"f6d7",san:"Nd7",eval:{cp:77,depth:27,time:4002,by:"offline"}},{ply:77,fen:"8/1prnkp2/p3p1p1/P7/1B2PK2/1R3P1r/1P5P/3R4 b - - 7 39",id:"sIRfzzNe",uci:"c3b4",san:"Bb4+",eval:{cp:35,depth:30,time:4003,by:"offline"}},{ply:78,fen:"8/1prn1p2/p3pkp1/P7/1B2PK2/1R3P1r/1P5P/3R4 w - - 8 40",id:"4WBc+vcB",uci:"e7f6",san:"Kf6",eval:{cp:36,depth:31,time:4007,by:"offline"}},{ply:79,fen:"8/1prn1p2/p2Bpkp1/P7/4PK2/1R3P1r/1P5P/3R4 b - - 9 40",id:"8CkF6gY3",uci:"b4d6",san:"Bd6",eval:{cp:35,depth:32,time:4002,by:"offline"}},{ply:80,fen:"8/1prn1p2/p2Bpk2/P5p1/4PK2/1R3P1r/1P5P/3R4 w - - 0 41",id:"TzPyeiDM",uci:"g6g5",san:"g5+",eval:{cp:35,depth:29,time:4002,by:"offline"}},{ply:81,fen:"8/1prn1p2/p2Bpk2/P5p1/4P1K1/1R3P1r/1P5P/3R4 b - - 1 41",id:"yXKmbScJ",uci:"f4g4",san:"Kg4",eval:{cp:51,depth:31,time:4001,by:"offline"}},{ply:82,fen:"8/1prn1p2/p2Bpk2/P5p1/4P1Kr/1R3P2/1P5P/3R4 w - - 2 42",id:"Gsb/W+RC",uci:"h3h4",san:"Rh4+",eval:{cp:51,depth:30,time:4001,by:"offline"}},{ply:83,fen:"8/1prn1p2/p2Bpk2/P5p1/4P2r/1R3PK1/1P5P/3R4 b - - 3 42",id:"MgfRxuiD",uci:"g4g3",san:"Kg3",eval:{cp:60,depth:31,time:4001,by:"offline"}},{ply:84,fen:"8/1p1n1p2/p2Bpk2/P5p1/4P2r/1R3PK1/1Pr4P/3R4 w - - 4 43",id:"vcmi1pry",uci:"c7c2",san:"Rc2",eval:{cp:45,depth:30,time:4015,by:"offline"}},{ply:85,fen:"8/1p1n1p2/p2Bpk2/P5p1/4P2r/1R3PKP/1Pr5/3R4 b - - 0 43",id:"U8mzdx7X",uci:"h2h3",san:"h3",eval:{cp:76,depth:29,time:4001,by:"offline"}},{ply:86,fen:"8/1p1n1p2/p2Bp1k1/P5p1/4P2r/1R3PKP/1Pr5/3R4 w - - 1 44",id:"c/0ctXE1",uci:"f6g6",san:"Kg6",eval:{cp:32,depth:32,time:4001,by:"offline"}},{ply:87,fen:"8/1p1nBp2/p3p1k1/P5p1/4P2r/1R3PKP/1Pr5/3R4 b - - 2 44",id:"8gVA/PwJ",uci:"d6e7",san:"Be7",eval:{cp:32,depth:30,time:4001,by:"offline"}},{ply:88,fen:"8/1p2Bp2/p3p1k1/P3n1p1/4P2r/1R3PKP/1Pr5/3R4 w - - 3 45",id:"ZJCfqpcy",uci:"d7e5",san:"Ne5",eval:{cp:30,depth:31,time:4001,by:"offline"}},{ply:89,fen:"3R4/1p2Bp2/p3p1k1/P3n1p1/4P2r/1R3PKP/1Pr5/8 b - - 4 45",id:"5RmIlF97",uci:"d1d8",san:"Rd8",eval:{cp:29,depth:30,time:4002,by:"offline"}},{ply:90,fen:"3R4/1p2B3/p3ppk1/P3n1p1/4P2r/1R3PKP/1Pr5/8 w - - 0 46",id:"zLep3ZFe",uci:"f7f6",san:"f6",eval:{cp:35,depth:29,time:4001,by:"offline"}},{ply:91,fen:"3R4/1R2B3/p3ppk1/P3n1p1/4P2r/5PKP/1Pr5/8 b - - 0 46",id:"CMYmIbcW",uci:"b3b7",san:"Rxb7",eval:{cp:76,best:"Bd6",variation:"Bd6 Nc6 Rg8+ Kh7 Rf8 Nxa5 Rb6 Rc6 Rxc6 Nxc6 Rxf6 Kg7 Rf8 Rh7",depth:25,time:4002,by:"offline"}},{ply:92,fen:"3R4/1R2B3/p3ppk1/P3n1p1/4Pr2/5PKP/1Pr5/8 w - - 1 47",id:"ctUcMPzb",uci:"h4f4",san:"Rf4",eval:{cp:29,depth:33,time:4002,by:"offline"}},{ply:93,fen:"3R4/4B3/p3ppk1/P3n1p1/4Pr2/1R3PKP/1Pr5/8 b - - 2 47",id:"hR1X+FYl",uci:"b7b3",san:"Rb3",eval:{cp:29,depth:35,time:4001,by:"offline"}},{ply:94,fen:"3R4/4B3/p1n1ppk1/P5p1/4Pr2/1R3PKP/1Pr5/8 w - - 3 48",id:"XCn4rPd4",uci:"e5c6",san:"Nc6",eval:{cp:30,depth:34,time:4002,by:"offline"}},{ply:95,fen:"2R5/4B3/p1n1ppk1/P5p1/4Pr2/1R3PKP/1Pr5/8 b - - 4 48",id:"p1ywZ8",uci:"d8c8",san:"Rc8",eval:{cp:30,depth:34,time:4002,by:"offline"}},{ply:96,fen:"2R5/4B3/p3ppk1/n5p1/4Pr2/1R3PKP/1Pr5/8 w - - 0 49",id:"njuzZwlB",uci:"c6a5",san:"Nxa5",eval:{cp:30,depth:35,time:4029,by:"offline"}},{ply:97,fen:"2R5/4B3/p3ppk1/n5p1/4Pr2/2R2PKP/1Pr5/8 b - - 1 49",id:"FjPY3ege",uci:"b3c3",san:"Rbc3",eval:{cp:29,depth:33,time:4002,by:"offline"}},{ply:98,fen:"2R5/4B3/p3ppk1/n5p1/4Pr2/2R2PKP/1r6/8 w - - 0 50",id:"LqXq3Ijw",uci:"c2b2",san:"Rxb2",eval:{cp:29,depth:33,time:4001,by:"offline"}},{ply:99,fen:"2R5/8/p2Bppk1/n5p1/4Pr2/2R2PKP/1r6/8 b - - 1 50",id:"7Yi+idKZ",uci:"e7d6",san:"Bd6",eval:{cp:29,depth:31,time:4002,by:"offline"}},{ply:100,fen:"2R5/8/p2B1pk1/n3p1p1/4Pr2/2R2PKP/1r6/8 w - - 0 51",id:"mUKtl101",uci:"e6e5",san:"e5",eval:{cp:29,depth:31,time:4002,by:"offline"}},{ply:101,fen:"2R5/2R5/p2B1pk1/n3p1p1/4Pr2/5PKP/1r6/8 b - - 1 51",id:"D+6c/H0j",uci:"c3c7",san:"R3c7",eval:{cp:46,depth:30,time:4001,by:"offline"}},{ply:102,fen:"2R5/1rR5/p2B1pk1/n3p1p1/4Pr2/5PKP/8/8 w - - 2 52",id:"UIxKSSoZ",uci:"b2b7",san:"Rb7",eval:{cp:61,depth:31,time:4001,by:"offline"}},{ply:103,fen:"2R5/1R6/p2B1pk1/n3p1p1/4Pr2/5PKP/8/8 b - - 0 52",id:"FOb3TYjW",uci:"c7b7",san:"Rxb7",eval:{cp:51,depth:30,time:4001,by:"offline"}},{ply:104,fen:"2R5/1n6/p2B1pk1/4p1p1/4Pr2/5PKP/8/8 w - - 0 53",id:"FMUzzJVD",uci:"a5b7",san:"Nxb7",eval:{cp:63,depth:34,time:4001,by:"offline"}},{ply:105,fen:"2R5/1n2B3/p4pk1/4p1p1/4Pr2/5PKP/8/8 b - - 1 53",id:"Bqlo7bk5",uci:"d6e7",san:"Be7",eval:{cp:29,depth:31,time:4001,by:"offline"}},{ply:106,fen:"2R5/4B3/p4pk1/n3p1p1/4Pr2/5PKP/8/8 w - - 2 54",id:"uIkFUP6w",uci:"b7a5",san:"Na5",eval:{cp:29,depth:33,time:4001,by:"offline"}},{ply:107,fen:"8/4B3/p4pk1/n3p1p1/4Pr2/2R2PKP/8/8 b - - 3 54",id:"imCh3LiW",uci:"c8c3",san:"Rc3",eval:{cp:29,depth:33,time:4001,by:"offline"}},{ply:108,fen:"8/4B3/p4p2/n3p1pk/4Pr2/2R2PKP/8/8 w - - 4 55",id:"Gg1fIKF1",uci:"g6h5",san:"Kh5",eval:{cp:29,depth:32,time:4003,by:"offline"}},{ply:109,fen:"8/4B3/p4p2/n3p1pk/4Pr2/2R2P1P/6K1/8 b - - 5 55",id:"dHwAasP6",uci:"g3g2",san:"Kg2",eval:{cp:29,depth:30,time:4001,by:"offline"}},{ply:110,fen:"8/4B3/p7/n3pppk/4Pr2/2R2P1P/6K1/8 w - - 0 56",id:"S1E0awI2",uci:"f6f5",san:"f5",eval:{cp:29,depth:32,time:4001,by:"offline"}},{ply:111,fen:"8/8/p7/n3pppk/1B2Pr2/2R2P1P/6K1/8 b - - 1 56",id:"qbMWhTsG",uci:"e7b4",san:"Bb4",eval:{cp:30,depth:35,time:4001,by:"offline"}},{ply:112,fen:"8/1n6/p7/4pppk/1B2Pr2/2R2P1P/6K1/8 w - - 2 57",id:"XXenauF",uci:"a5b7",san:"Nb7",eval:{cp:30,depth:34,time:4001,by:"offline"}},{ply:113,fen:"8/1nR5/p7/4pppk/1B2Pr2/5P1P/6K1/8 b - - 3 57",id:"W/INknXS",uci:"c3c7",san:"Rc7",eval:{cp:30,depth:34,time:4001,by:"offline"}},{ply:114,fen:"3n4/2R5/p7/4pppk/1B2Pr2/5P1P/6K1/8 w - - 4 58",id:"j7cQDVaA",uci:"b7d8",san:"Nd8",eval:{cp:30,depth:32,time:4001,by:"offline"}},{ply:115,fen:"3n4/2R5/p7/4pppk/4Pr2/5P1P/3B2K1/8 b - - 5 58",id:"pxYPKsV2",uci:"b4d2",san:"Bd2",eval:{cp:30,depth:31,time:4001,by:"offline"}},{ply:116,fen:"8/2R5/p3n3/4pppk/4Pr2/5P1P/3B2K1/8 w - - 6 59",id:"hY1crNRK",uci:"d8e6",san:"Ne6",eval:{cp:30,best:"fxe4",variation:"fxe4 Bxf4 exf3+ Kxf3 exf4 Re7 Nc6 Rh7+ Kg6 Rc7 Ne5+ Ke4 Nf7 Rc6+",depth:29,time:4002,by:"offline"},comments:[{name:"Inaccuracy",comment:"Mistake. Best mowe was fxe4"}],glyphs:[{name:"Mistake",symbol:"?"}]},{ply:117,fen:"8/4R3/p3n3/4pppk/4Pr2/5P1P/3B2K1/8 b - - 7 59",id:"oKxeOzEc",uci:"c7e7",san:"Re7",eval:{cp:94,depth:36,time:4003,by:"offline"}},{ply:118,fen:"8/4R3/p3n3/4p1pk/4pr2/5P1P/3B2K1/8 w - - 0 60",id:"cXADW1qP",uci:"f5e4",san:"fxe4",eval:{cp:92,depth:40,time:4001,by:"offline"}},{ply:119,fen:"8/8/p3R3/4p1pk/4pr2/5P1P/3B2K1/8 b - - 0 60",id:"FCLPm1Dx",uci:"e7e6",san:"Rxe6",eval:{cp:84,depth:41,time:4001,by:"offline"}},{ply:120,fen:"8/8/p3R3/4p1pk/5r2/5p1P/3B2K1/8 w - - 0 61",id:"bcsqPs0X",uci:"e4f3",san:"exf3+",eval:{cp:84,depth:41,time:4001,by:"offline"}},{ply:121,fen:"8/8/p3R3/4p1pk/5r2/5p1P/3B1K2/8 b - - 1 61",id:"v4bufyl2",uci:"g2f2",san:"Kf2",eval:{cp:84,depth:39,time:4002,by:"offline"}},{ply:122,fen:"8/8/p3R3/4p1pk/7r/5p1P/3B1K2/8 w - - 2 62",id:"MsnMTHlz",uci:"f4h4",san:"Rh4",eval:{cp:84,depth:37,time:4002,by:"offline"}},{ply:123,fen:"8/8/p7/4R1pk/7r/5p1P/3B1K2/8 b - - 0 62",id:"/cMXTf/4",uci:"e6e5",san:"Rxe5",eval:{cp:84,depth:35,time:4001,by:"offline"}},{ply:124,fen:"8/8/p7/4R1pk/8/5p1r/3B1K2/8 w - - 0 63",id:"t2gKIpVf",uci:"h4h3",san:"Rxh3",eval:{cp:84,depth:36,time:4001,by:"offline"}},{ply:125,fen:"8/8/p7/6Rk/8/5p1r/3B1K2/8 b - - 0 63",id:"aOX7Uqtv",uci:"e5g5",san:"Rxg5+",eval:{cp:91,depth:30,time:4002,by:"offline"}}],finalFen:"8/8/p7/6Rk/8/5p1r/3B1K2/8 b - - 0 64",pgn:'[Event "\'Личный чемпионат сайта по адвансу - 2018\', финал"]\n[Site "https://www.chess-online.com/7782247"]\n[Date "2020.02.10"]\n[Round "?"]\n[White "AHDPEI"]\n[Black "Sheldon"]\n[Result "1/2-1/2"]\n[WhiteUSCF "1653"]\n[BlackUSCF "1598"]\n[ECO "A05"]\n[EventDate "2019.04.02"]\n[Termination "normal"]\n\n1. Nf3 Nf6 2. g3 d5 3. Bg2 c5 4. O-O a6 5. c4 dxc4 6. Ne5 Ra7 7. a4 Qd4 8. Nf3\nQd8 9. Na3 Be6 10. Ne5 Qd4 11. Nf3 Qd8 12. a5 Bd5 13. Qa4+ Bc6 14. Qxc4 e6 15.\nd4 Nbd7 16. Ne5 Bxg2 17. Kxg2 cxd4 18. Bf4 Ra8 19. Rfd1 Bc5 20. Nc2 O-O 21. Nxd7\nQxd7 22. Qxc5 Rfc8 23. Qxd4 Qc6+ 24. f3 Qxc2 25. Rd2 Qc4 26. Qxc4 Rxc4 27. e4\nRac8 28. Be5 Kf8 29. Rad1 Ke8 30. Bc3 R4c5 31. Kf2 Rb5 32. Ke3 Ke7 33. Rd4 g6\n34. g4 h5 35. gxh5 Rxh5 36. Rb4 Rc7 37. Rb3 Rh3 38. Kf4 Nd7 39. Bb4+ Kf6 40. Bd6\ng5+ 41. Kg4 Rh4+ 42. Kg3 Rc2 43. h3 Kg6 44. Be7 Ne5 45. Rd8 f6 46. Rxb7 Rf4 47.\nRb3 Nc6 48. Rc8 Nxa5 49. Rbc3 Rxb2 50. Bd6 e5 51. R3c7 Rb7 52. Rxb7 Nxb7 53. Be7\nNa5 54. Rc3 Kh5 55. Kg2 f5 56. Bb4 Nb7 57. Rc7 Nd8 58. Bd2 Ne6 59. Re7 fxe4 60.\nRxe6 exf3+ 61. Kf2 Rh4 62. Rxe5 Rxh3 63. Rxg5+ 1/2-1/2\n'}};t.AnalyseGameTest=e=>i.AnalyseGame(a,document.getElementById(e))},5228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureGameTest=void 0;const i=n(6769);var a={size:4,piece:"alpha",square:"cedar",coordinates:!0};t.ConfigureGameTest=e=>i.ConfigureGame(a,document.getElementById(e))},2644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatchGameTest=void 0;const i=n(2517);var a={board:{orientation:"white",coordinates:!0,size:5,piece:"alpha",square:"cedar",configUrl:"https://www.chess-online.com/settings/board"},game:{game:{id:7830568,load:!1,insite:!0,variant:{key:"standard",name:"Standard",shortName:"Std"},speed:"correspondence",perf:"main",rated:!0,initialFen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -",fen:"8/2b5/2k5/pr1N2p1/3K2P1/2P4P/8/R7 w - - 7 47",player:"white",turns:92,startedAtTurn:0,status:{name:"started"},event:"Простая партия",createdAt:1604647899453,createdBy:336243,private:!1,advance:!1,lastMove:"b6c6",opening:{code:"A00",name:"Start position"}},correspondence:{limit:"7 дней/ход",can_pause:!0,parts:[{per:"move",initial:6048e5,increment:0,min:6048e5}],white:543485e3,black:6048e5,totalTime:2336991e3,lastMoveAt:1606984890190,serverNow:1607275499590},player:{color:"white",name:"wb04",user:{id:336243,name:"wb04",display:"wb04",online:"3d",perfs:{main:{games:348,rating:1185,avg:1130}},language:"ru-RU",patron:"base",status:"base",title:""}},opponent:{color:"black",name:"Борюшка",user:{id:246574,name:"Борюшка",display:"Борюшка",online:"12h",perfs:{main:{games:430,rating:1004,avg:978}},language:"ru-RU",patron:"base",status:"base",title:""}},orientation:"white",steps:[{ply:0,fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},{ply:1,uci:"e2e4",san:"e4",fen:"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq - 0 1",id:"JDs/UyzN"},{ply:2,uci:"e7e5",san:"e5",fen:"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq - 0 2",id:"RBN7Xk8W"},{ply:3,uci:"g1f3",san:"Nf3",fen:"rnbqkbnr/pppp1ppp/8/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R b KQkq - 1 2",id:"/g9wPk5+"},{ply:4,uci:"d7d6",san:"d6",fen:"rnbqkbnr/ppp2ppp/3p4/4p3/4P3/5N2/PPPP1PPP/RNBQKB1R w KQkq - 0 3",id:"6pSJqUSk"},{ply:5,uci:"d2d4",san:"d4",fen:"rnbqkbnr/ppp2ppp/3p4/4p3/3PP3/5N2/PPP2PPP/RNBQKB1R b KQkq - 0 3",id:"2iEYbktR"},{ply:6,uci:"b8d7",san:"Nd7",fen:"r1bqkbnr/pppn1ppp/3p4/4p3/3PP3/5N2/PPP2PPP/RNBQKB1R w KQkq - 1 4",id:"cA1Iosjb"},{ply:7,uci:"d4d5",san:"d5",fen:"r1bqkbnr/pppn1ppp/3p4/3Pp3/4P3/5N2/PPP2PPP/RNBQKB1R b KQkq - 0 4",id:"rggGgsG0"},{ply:8,uci:"g8f6",san:"Ngf6",fen:"r1bqkb1r/pppn1ppp/3p1n2/3Pp3/4P3/5N2/PPP2PPP/RNBQKB1R w KQkq - 1 5",id:"8dXyN5Ke"},{ply:9,uci:"b1c3",san:"Nc3",fen:"r1bqkb1r/pppn1ppp/3p1n2/3Pp3/4P3/2N2N2/PPP2PPP/R1BQKB1R b KQkq - 2 5",id:"11qLGIr8"},{ply:10,uci:"c7c6",san:"c6",fen:"r1bqkb1r/pp1n1ppp/2pp1n2/3Pp3/4P3/2N2N2/PPP2PPP/R1BQKB1R w KQkq - 0 6",id:"1G5h8p0/"},{ply:11,uci:"c1g5",san:"Bg5",fen:"r1bqkb1r/pp1n1ppp/2pp1n2/3Pp1B1/4P3/2N2N2/PPP2PPP/R2QKB1R b KQkq - 1 6",id:"rqmJ9kUi"},{ply:12,uci:"h7h6",san:"h6",fen:"r1bqkb1r/pp1n1pp1/2pp1n1p/3Pp1B1/4P3/2N2N2/PPP2PPP/R2QKB1R w KQkq - 0 7",id:"AhdDY+Gw"},{ply:13,uci:"g5f6",san:"Bxf6",fen:"r1bqkb1r/pp1n1pp1/2pp1B1p/3Pp3/4P3/2N2N2/PPP2PPP/R2QKB1R b KQkq - 0 7",id:"++5Aae7N"},{ply:14,uci:"d7f6",san:"Nxf6",fen:"r1bqkb1r/pp3pp1/2pp1n1p/3Pp3/4P3/2N2N2/PPP2PPP/R2QKB1R w KQkq - 0 8",id:"Yh8jN75/"},{ply:15,uci:"d5c6",san:"dxc6",fen:"r1bqkb1r/pp3pp1/2Pp1n1p/4p3/4P3/2N2N2/PPP2PPP/R2QKB1R b KQkq - 0 8",id:"YHSW+ZDC"},{ply:16,uci:"b7c6",san:"bxc6",fen:"r1bqkb1r/p4pp1/2pp1n1p/4p3/4P3/2N2N2/PPP2PPP/R2QKB1R w KQkq - 0 9",id:"/RTAIWsU"},{ply:17,uci:"f1c4",san:"Bc4",fen:"r1bqkb1r/p4pp1/2pp1n1p/4p3/2B1P3/2N2N2/PPP2PPP/R2QK2R b KQkq - 1 9",id:"+JjiijB0"},{ply:18,uci:"d8e7",san:"Qe7",fen:"r1b1kb1r/p3qpp1/2pp1n1p/4p3/2B1P3/2N2N2/PPP2PPP/R2QK2R w KQkq - 2 10",id:"W2SF8Wcg"},{ply:19,uci:"e1g1",san:"O-O",fen:"r1b1kb1r/p3qpp1/2pp1n1p/4p3/2B1P3/2N2N2/PPP2PPP/R2Q1RK1 b kq - 3 10",id:"teoxPn3X"},{ply:20,uci:"c8e6",san:"Be6",fen:"r3kb1r/p3qpp1/2ppbn1p/4p3/2B1P3/2N2N2/PPP2PPP/R2Q1RK1 w kq - 4 11",id:"mR7p1dbb"},{ply:21,uci:"c4e6",san:"Bxe6",fen:"r3kb1r/p3qpp1/2ppBn1p/4p3/4P3/2N2N2/PPP2PPP/R2Q1RK1 b kq - 0 11",id:"EpgaTAw8"},{ply:22,uci:"e7e6",san:"Qxe6",fen:"r3kb1r/p4pp1/2ppqn1p/4p3/4P3/2N2N2/PPP2PPP/R2Q1RK1 w kq - 0 12",id:"r4fTW2tU"},{ply:23,uci:"h2h3",san:"h3",fen:"r3kb1r/p4pp1/2ppqn1p/4p3/4P3/2N2N1P/PPP2PP1/R2Q1RK1 b kq - 0 12",id:"crV+p7Kf"},{ply:24,uci:"f8e7",san:"Be7",fen:"r3k2r/p3bpp1/2ppqn1p/4p3/4P3/2N2N1P/PPP2PP1/R2Q1RK1 w kq - 1 13",id:"OLbpLBls"},{ply:25,uci:"a2a3",san:"a3",fen:"r3k2r/p3bpp1/2ppqn1p/4p3/4P3/P1N2N1P/1PP2PP1/R2Q1RK1 b kq - 0 13",id:"eZjTGx2e"},{ply:26,uci:"e8g8",san:"O-O",fen:"r4rk1/p3bpp1/2ppqn1p/4p3/4P3/P1N2N1P/1PP2PP1/R2Q1RK1 w - - 1 14",id:"PVI0FaSj"},{ply:27,uci:"d1d3",san:"Qd3",fen:"r4rk1/p3bpp1/2ppqn1p/4p3/4P3/P1NQ1N1P/1PP2PP1/R4RK1 b - - 2 14",id:"ji0wAJ9e"},{ply:28,uci:"c6c5",san:"c5",fen:"r4rk1/p3bpp1/3pqn1p/2p1p3/4P3/P1NQ1N1P/1PP2PP1/R4RK1 w - - 0 15",id:"/DYHGcIy"},{ply:29,uci:"c3d5",san:"Nd5",fen:"r4rk1/p3bpp1/3pqn1p/2pNp3/4P3/P2Q1N1P/1PP2PP1/R4RK1 b - - 1 15",id:"MJ4AHe7Y"},{ply:30,uci:"f8c8",san:"Rfc8",fen:"r1r3k1/p3bpp1/3pqn1p/2pNp3/4P3/P2Q1N1P/1PP2PP1/R4RK1 w - - 2 16",id:"9GUJsPWE"},{ply:31,uci:"a1d1",san:"Rad1",fen:"r1r3k1/p3bpp1/3pqn1p/2pNp3/4P3/P2Q1N1P/1PP2PP1/3R1RK1 b - - 3 16",id:"SVdn3ehf"},{ply:32,uci:"e7d8",san:"Bd8",fen:"r1rb2k1/p4pp1/3pqn1p/2pNp3/4P3/P2Q1N1P/1PP2PP1/3R1RK1 w - - 4 17",id:"Ii90RMCT"},{ply:33,uci:"d5f6",san:"Nxf6+",fen:"r1rb2k1/p4pp1/3pqN1p/2p1p3/4P3/P2Q1N1P/1PP2PP1/3R1RK1 b - - 0 17",id:"Zf2MT5M0"},{ply:34,uci:"e6f6",san:"Qxf6",fen:"r1rb2k1/p4pp1/3p1q1p/2p1p3/4P3/P2Q1N1P/1PP2PP1/3R1RK1 w - - 0 18",id:"kuHbgNkE"},{ply:35,uci:"d3d6",san:"Qxd6",fen:"r1rb2k1/p4pp1/3Q1q1p/2p1p3/4P3/P4N1P/1PP2PP1/3R1RK1 b - - 0 18",id:"wuvPCmEv"},{ply:36,uci:"f6d6",san:"Qxd6",fen:"r1rb2k1/p4pp1/3q3p/2p1p3/4P3/P4N1P/1PP2PP1/3R1RK1 w - - 0 19",id:"Rn9Vs7HK"},{ply:37,uci:"d1d6",san:"Rxd6",fen:"r1rb2k1/p4pp1/3R3p/2p1p3/4P3/P4N1P/1PP2PP1/5RK1 b - - 0 19",id:"J4z/i6li"},{ply:38,uci:"d8e7",san:"Be7",fen:"r1r3k1/p3bpp1/3R3p/2p1p3/4P3/P4N1P/1PP2PP1/5RK1 w - - 1 20",id:"B9uzQo51"},{ply:39,uci:"d6d5",san:"Rd5",fen:"r1r3k1/p3bpp1/7p/2pRp3/4P3/P4N1P/1PP2PP1/5RK1 b - - 2 20",id:"8Eal8AmP"},{ply:40,uci:"e7f6",san:"Bf6",fen:"r1r3k1/p4pp1/5b1p/2pRp3/4P3/P4N1P/1PP2PP1/5RK1 w - - 3 21",id:"4zF+iiXc"},{ply:41,uci:"f3e5",san:"Nxe5",fen:"r1r3k1/p4pp1/5b1p/2pRN3/4P3/P6P/1PP2PP1/5RK1 b - - 0 21",id:"9W0+CgFr"},{ply:42,uci:"c5c4",san:"c4",fen:"r1r3k1/p4pp1/5b1p/3RN3/2p1P3/P6P/1PP2PP1/5RK1 w - - 0 22",id:"m79ilAJC"},{ply:43,uci:"c2c3",san:"c3",fen:"r1r3k1/p4pp1/5b1p/3RN3/2p1P3/P1P4P/1P3PP1/5RK1 b - - 0 22",id:"dwkFNOkb"},{ply:44,uci:"a7a5",san:"a5",fen:"r1r3k1/5pp1/5b1p/p2RN3/2p1P3/P1P4P/1P3PP1/5RK1 w - - 0 23",id:"sHoc1HFk"},{ply:45,uci:"e5g4",san:"Ng4",fen:"r1r3k1/5pp1/5b1p/p2R4/2p1P1N1/P1P4P/1P3PP1/5RK1 b - - 1 23",id:"LlfsJVx+"},{ply:46,uci:"f6e7",san:"Be7",fen:"r1r3k1/4bpp1/7p/p2R4/2p1P1N1/P1P4P/1P3PP1/5RK1 w - - 2 24",id:"A7oTLo9f"},{ply:47,uci:"f1d1",san:"Rfd1",fen:"r1r3k1/4bpp1/7p/p2R4/2p1P1N1/P1P4P/1P3PP1/3R2K1 b - - 3 24",id:"wkI9SC1r"},{ply:48,uci:"e7g5",san:"Bg5",fen:"r1r3k1/5pp1/7p/p2R2b1/2p1P1N1/P1P4P/1P3PP1/3R2K1 w - - 4 25",id:"7anDrNWx"},{ply:49,uci:"g2g3",san:"g3",fen:"r1r3k1/5pp1/7p/p2R2b1/2p1P1N1/P1P3PP/1P3P2/3R2K1 b - - 0 25",id:"rvP1Iq+P"},{ply:50,uci:"c8b8",san:"Rcb8",fen:"rr4k1/5pp1/7p/p2R2b1/2p1P1N1/P1P3PP/1P3P2/3R2K1 w - - 1 26",id:"Xbefmiuf"},{ply:51,uci:"d1b1",san:"Rb1",fen:"rr4k1/5pp1/7p/p2R2b1/2p1P1N1/P1P3PP/1P3P2/1R4K1 b - - 2 26",id:"eWHznoM/"},{ply:52,uci:"g5e7",san:"Be7",fen:"rr4k1/4bpp1/7p/p2R4/2p1P1N1/P1P3PP/1P3P2/1R4K1 w - - 3 27",id:"zChLZcHC"},{ply:53,uci:"d5d1",san:"Rdd1",fen:"rr4k1/4bpp1/7p/p7/2p1P1N1/P1P3PP/1P3P2/1R1R2K1 b - - 4 27",id:"nGfhe3be"},{ply:54,uci:"b8b7",san:"Rb7",fen:"r5k1/1r2bpp1/7p/p7/2p1P1N1/P1P3PP/1P3P2/1R1R2K1 w - - 5 28",id:"lpuzB1lk"},{ply:55,uci:"f2f4",san:"f4",fen:"r5k1/1r2bpp1/7p/p7/2p1PPN1/P1P3PP/1P6/1R1R2K1 b - - 0 28",id:"7svHemqi"},{ply:56,uci:"a8b8",san:"Rab8",fen:"1r4k1/1r2bpp1/7p/p7/2p1PPN1/P1P3PP/1P6/1R1R2K1 w - - 1 29",id:"LqlICMth"},{ply:57,uci:"d1d2",san:"Rd2",fen:"1r4k1/1r2bpp1/7p/p7/2p1PPN1/P1P3PP/1P1R4/1R4K1 b - - 2 29",id:"L5UN3Mxq"},{ply:58,uci:"e7a3",san:"Bxa3",fen:"1r4k1/1r3pp1/7p/p7/2p1PPN1/b1P3PP/1P1R4/1R4K1 w - - 0 30",id:"2xS2iolX"},{ply:59,uci:"d2c2",san:"Rc2",fen:"1r4k1/1r3pp1/7p/p7/2p1PPN1/b1P3PP/1PR5/1R4K1 b - - 1 30",id:"DpnkxNK7"},{ply:60,uci:"b7b2",san:"Rxb2",fen:"1r4k1/5pp1/7p/p7/2p1PPN1/b1P3PP/1rR5/1R4K1 w - - 0 31",id:"WvxB4S1T"},{ply:61,uci:"c2b2",san:"Rcxb2",fen:"1r4k1/5pp1/7p/p7/2p1PPN1/b1P3PP/1R6/1R4K1 b - - 0 31",id:"se1mXzEC"},{ply:62,uci:"b8b2",san:"Rxb2",fen:"6k1/5pp1/7p/p7/2p1PPN1/b1P3PP/1r6/1R4K1 w - - 0 32",id:"Eov1C3nS"},{ply:63,uci:"b1a1",san:"Ra1",fen:"6k1/5pp1/7p/p7/2p1PPN1/b1P3PP/1r6/R5K1 b - - 1 32",id:"My1HxX8G"},{ply:64,uci:"a3c5",san:"Bc5+",fen:"6k1/5pp1/7p/p1b5/2p1PPN1/2P3PP/1r6/R5K1 w - - 2 33",id:"XmmcDaLf"},{ply:65,uci:"g1f1",san:"Kf1",fen:"6k1/5pp1/7p/p1b5/2p1PPN1/2P3PP/1r6/R4K2 b - - 3 33",id:"M7t0gEo0"},{ply:66,uci:"b2b5",san:"Rb5",fen:"6k1/5pp1/7p/prb5/2p1PPN1/2P3PP/8/R4K2 w - - 4 34",id:"Mc6PKNWU"},{ply:67,uci:"g4e5",san:"Ne5",fen:"6k1/5pp1/7p/prb1N3/2p1PP2/2P3PP/8/R4K2 b - - 5 34",id:"DQuQzoTS"},{ply:68,uci:"c5b6",san:"Bb6",fen:"6k1/5pp1/1b5p/pr2N3/2p1PP2/2P3PP/8/R4K2 w - - 6 35",id:"ueL37FYF"},{ply:69,uci:"e5c4",san:"Nxc4",fen:"6k1/5pp1/1b5p/pr6/2N1PP2/2P3PP/8/R4K2 b - - 0 35",id:"WSuF8ook"},{ply:70,uci:"b6c7",san:"Bc7",fen:"6k1/2b2pp1/7p/pr6/2N1PP2/2P3PP/8/R4K2 w - - 1 36",id:"Ono1MfuU"},{ply:71,uci:"f1e2",san:"Ke2",fen:"6k1/2b2pp1/7p/pr6/2N1PP2/2P3PP/4K3/R7 b - - 2 36",id:"iBKfgpJ4"},{ply:72,uci:"g8f8",san:"Kf8",fen:"5k2/2b2pp1/7p/pr6/2N1PP2/2P3PP/4K3/R7 w - - 3 37",id:"4ytY5+LJ"},{ply:73,uci:"e2d3",san:"Kd3",fen:"5k2/2b2pp1/7p/pr6/2N1PP2/2PK2PP/8/R7 b - - 4 37",id:"mLtZiMtF"},{ply:74,uci:"f8e7",san:"Ke7",fen:"8/2b1kpp1/7p/pr6/2N1PP2/2PK2PP/8/R7 w - - 5 38",id:"5PSPxJba"},{ply:75,uci:"e4e5",san:"e5",fen:"8/2b1kpp1/7p/pr2P3/2N2P2/2PK2PP/8/R7 b - - 0 38",id:"iWHaDUwZ"},{ply:76,uci:"f7f6",san:"f6",fen:"8/2b1k1p1/5p1p/pr2P3/2N2P2/2PK2PP/8/R7 w - - 0 39",id:"1P+XCs6i"},{ply:77,uci:"e5f6",san:"exf6+",fen:"8/2b1k1p1/5P1p/pr6/2N2P2/2PK2PP/8/R7 b - - 0 39",id:"WGWQVvrO"},{ply:78,uci:"e7f6",san:"Kxf6",fen:"8/2b3p1/5k1p/pr6/2N2P2/2PK2PP/8/R7 w - - 0 40",id:"hoY++7Gw"},{ply:79,uci:"d3d4",san:"Kd4",fen:"8/2b3p1/5k1p/pr6/2NK1P2/2P3PP/8/R7 b - - 1 40",id:"IKDbeQsA"},{ply:80,uci:"g7g5",san:"g5",fen:"8/2b5/5k1p/pr4p1/2NK1P2/2P3PP/8/R7 w - - 0 41",id:"qIRfALQa"},{ply:81,uci:"d4e4",san:"Ke4",fen:"8/2b5/5k1p/pr4p1/2N1KP2/2P3PP/8/R7 b - - 1 41",id:"uTInox66"},{ply:82,uci:"f6e6",san:"Ke6",fen:"8/2b5/4k2p/pr4p1/2N1KP2/2P3PP/8/R7 w - - 2 42",id:"ZRsu9nRS"},{ply:83,uci:"f4g5",san:"fxg5",fen:"8/2b5/4k2p/pr4P1/2N1K3/2P3PP/8/R7 b - - 0 42",id:"VPe/pIlW"},{ply:84,uci:"h6g5",san:"hxg5",fen:"8/2b5/4k3/pr4p1/2N1K3/2P3PP/8/R7 w - - 0 43",id:"8HnCQcgq"},{ply:85,uci:"g3g4",san:"g4",fen:"8/2b5/4k3/pr4p1/2N1K1P1/2P4P/8/R7 b - - 0 43",id:"3nxeaY6m"},{ply:86,uci:"e6d7",san:"Kd7",fen:"8/2bk4/8/pr4p1/2N1K1P1/2P4P/8/R7 w - - 1 44",id:"pbjRoWX9"},{ply:87,uci:"e4d4",san:"Kd4",fen:"8/2bk4/8/pr4p1/2NK2P1/2P4P/8/R7 b - - 2 44",id:"LifQscwB"},{ply:88,uci:"d7c6",san:"Kc6",fen:"8/2b5/2k5/pr4p1/2NK2P1/2P4P/8/R7 w - - 3 45",id:"oTejzprG"},{ply:89,uci:"c4e3",san:"Ne3",fen:"8/2b5/2k5/pr4p1/3K2P1/2P1N2P/8/R7 b - - 4 45",id:"7ekmj4i7"},{ply:90,uci:"c6b6",san:"Kb6",fen:"8/2b5/1k6/pr4p1/3K2P1/2P1N2P/8/R7 w - - 5 46",id:"x+R0mxdv"},{ply:91,uci:"e3d5",san:"Nd5+",fen:"8/2b5/1k6/pr1N2p1/3K2P1/2P4P/8/R7 b - - 6 46",id:"50xgLB9L"},{ply:92,uci:"b6c6",san:"Kc6",fen:"8/2b5/2k5/pr1N2p1/3K2P1/2P4P/8/R7 w - - 7 47",id:"/GYL/PqK"}]}};t.WatchGameTest=e=>i.WatchGame(a,document.getElementById(e))},7547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigureGameTest=t.AnalyseGameTest=t.WatchGameTest=void 0;var i=n(2644);Object.defineProperty(t,"WatchGameTest",{enumerable:!0,get:function(){return i.WatchGameTest}});var a=n(2870);Object.defineProperty(t,"AnalyseGameTest",{enumerable:!0,get:function(){return a.AnalyseGameTest}});var s=n(5228);Object.defineProperty(t,"ConfigureGameTest",{enumerable:!0,get:function(){return s.ConfigureGameTest}})}},0,[[7547,700,216]]])}));